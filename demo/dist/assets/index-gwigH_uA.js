(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function od(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var id={exports:{}},Qi={},sd={exports:{}},W={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _o=Symbol.for("react.element"),wh=Symbol.for("react.portal"),xh=Symbol.for("react.fragment"),kh=Symbol.for("react.strict_mode"),Ih=Symbol.for("react.profiler"),Ch=Symbol.for("react.provider"),Eh=Symbol.for("react.context"),Ah=Symbol.for("react.forward_ref"),_h=Symbol.for("react.suspense"),Mh=Symbol.for("react.memo"),zh=Symbol.for("react.lazy"),Cu=Symbol.iterator;function jh(e){return e===null||typeof e!="object"?null:(e=Cu&&e[Cu]||e["@@iterator"],typeof e=="function"?e:null)}var ad={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ld=Object.assign,ud={};function Ar(e,t,n){this.props=e,this.context=t,this.refs=ud,this.updater=n||ad}Ar.prototype.isReactComponent={};Ar.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ar.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function cd(){}cd.prototype=Ar.prototype;function pl(e,t,n){this.props=e,this.context=t,this.refs=ud,this.updater=n||ad}var hl=pl.prototype=new cd;hl.constructor=pl;ld(hl,Ar.prototype);hl.isPureReactComponent=!0;var Eu=Array.isArray,dd=Object.prototype.hasOwnProperty,ml={current:null},fd={key:!0,ref:!0,__self:!0,__source:!0};function pd(e,t,n){var r,o={},i=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(i=""+t.key),t)dd.call(t,r)&&!fd.hasOwnProperty(r)&&(o[r]=t[r]);var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];o.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)o[r]===void 0&&(o[r]=a[r]);return{$$typeof:_o,type:e,key:i,ref:s,props:o,_owner:ml.current}}function Th(e,t){return{$$typeof:_o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function yl(e){return typeof e=="object"&&e!==null&&e.$$typeof===_o}function Ph(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Au=/\/+/g;function ws(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Ph(""+e.key):t.toString(36)}function ni(e,t,n,r,o){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case _o:case wh:s=!0}}if(s)return s=e,o=o(s),e=r===""?"."+ws(s,0):r,Eu(o)?(n="",e!=null&&(n=e.replace(Au,"$&/")+"/"),ni(o,t,n,"",function(u){return u})):o!=null&&(yl(o)&&(o=Th(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(Au,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=r===""?".":r+":",Eu(e))for(var a=0;a<e.length;a++){i=e[a];var l=r+ws(i,a);s+=ni(i,t,n,l,o)}else if(l=jh(e),typeof l=="function")for(e=l.call(e),a=0;!(i=e.next()).done;)i=i.value,l=r+ws(i,a++),s+=ni(i,t,n,l,o);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Oo(e,t,n){if(e==null)return e;var r=[],o=0;return ni(e,r,"","",function(i){return t.call(n,i,o++)}),r}function Nh(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Be={current:null},ri={transition:null},Rh={ReactCurrentDispatcher:Be,ReactCurrentBatchConfig:ri,ReactCurrentOwner:ml};function hd(){throw Error("act(...) is not supported in production builds of React.")}W.Children={map:Oo,forEach:function(e,t,n){Oo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Oo(e,function(){t++}),t},toArray:function(e){return Oo(e,function(t){return t})||[]},only:function(e){if(!yl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};W.Component=Ar;W.Fragment=xh;W.Profiler=Ih;W.PureComponent=pl;W.StrictMode=kh;W.Suspense=_h;W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rh;W.act=hd;W.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=ld({},e.props),o=e.key,i=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,s=ml.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)dd.call(t,l)&&!fd.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:_o,type:e.type,key:o,ref:i,props:r,_owner:s}};W.createContext=function(e){return e={$$typeof:Eh,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Ch,_context:e},e.Consumer=e};W.createElement=pd;W.createFactory=function(e){var t=pd.bind(null,e);return t.type=e,t};W.createRef=function(){return{current:null}};W.forwardRef=function(e){return{$$typeof:Ah,render:e}};W.isValidElement=yl;W.lazy=function(e){return{$$typeof:zh,_payload:{_status:-1,_result:e},_init:Nh}};W.memo=function(e,t){return{$$typeof:Mh,type:e,compare:t===void 0?null:t}};W.startTransition=function(e){var t=ri.transition;ri.transition={};try{e()}finally{ri.transition=t}};W.unstable_act=hd;W.useCallback=function(e,t){return Be.current.useCallback(e,t)};W.useContext=function(e){return Be.current.useContext(e)};W.useDebugValue=function(){};W.useDeferredValue=function(e){return Be.current.useDeferredValue(e)};W.useEffect=function(e,t){return Be.current.useEffect(e,t)};W.useId=function(){return Be.current.useId()};W.useImperativeHandle=function(e,t,n){return Be.current.useImperativeHandle(e,t,n)};W.useInsertionEffect=function(e,t){return Be.current.useInsertionEffect(e,t)};W.useLayoutEffect=function(e,t){return Be.current.useLayoutEffect(e,t)};W.useMemo=function(e,t){return Be.current.useMemo(e,t)};W.useReducer=function(e,t,n){return Be.current.useReducer(e,t,n)};W.useRef=function(e){return Be.current.useRef(e)};W.useState=function(e){return Be.current.useState(e)};W.useSyncExternalStore=function(e,t,n){return Be.current.useSyncExternalStore(e,t,n)};W.useTransition=function(){return Be.current.useTransition()};W.version="18.3.1";sd.exports=W;var A=sd.exports;const at=od(A);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dh=A,Lh=Symbol.for("react.element"),Oh=Symbol.for("react.fragment"),$h=Object.prototype.hasOwnProperty,Uh=Dh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Fh={key:!0,ref:!0,__self:!0,__source:!0};function md(e,t,n){var r,o={},i=null,s=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)$h.call(t,r)&&!Fh.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:Lh,type:e,key:i,ref:s,props:o,_owner:Uh.current}}Qi.Fragment=Oh;Qi.jsx=md;Qi.jsxs=md;id.exports=Qi;var k=id.exports,yd={exports:{}},dt={},gd={exports:{}},vd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,U){var F=j.length;j.push(U);e:for(;0<F;){var b=F-1>>>1,H=j[b];if(0<o(H,U))j[b]=U,j[F]=H,F=b;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var U=j[0],F=j.pop();if(F!==U){j[0]=F;e:for(var b=0,H=j.length,G=H>>>1;b<G;){var q=2*(b+1)-1,K=j[q],ee=q+1,X=j[ee];if(0>o(K,F))ee<H&&0>o(X,K)?(j[b]=X,j[ee]=F,b=ee):(j[b]=K,j[q]=F,b=q);else if(ee<H&&0>o(X,F))j[b]=X,j[ee]=F,b=ee;else break e}}return U}function o(j,U){var F=j.sortIndex-U.sortIndex;return F!==0?F:j.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var l=[],u=[],c=1,d=null,h=3,v=!1,S=!1,p=!1,x=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(j){for(var U=n(u);U!==null;){if(U.callback===null)r(u);else if(U.startTime<=j)r(u),U.sortIndex=U.expirationTime,t(l,U);else break;U=n(u)}}function E(j){if(p=!1,g(j),!S)if(n(l)!==null)S=!0,L(w);else{var U=n(u);U!==null&&O(E,U.startTime-j)}}function w(j,U){S=!1,p&&(p=!1,m(z),z=-1),v=!0;var F=h;try{for(g(U),d=n(l);d!==null&&(!(d.expirationTime>U)||j&&!R());){var b=d.callback;if(typeof b=="function"){d.callback=null,h=d.priorityLevel;var H=b(d.expirationTime<=U);U=e.unstable_now(),typeof H=="function"?d.callback=H:d===n(l)&&r(l),g(U)}else r(l);d=n(l)}if(d!==null)var G=!0;else{var q=n(u);q!==null&&O(E,q.startTime-U),G=!1}return G}finally{d=null,h=F,v=!1}}var y=!1,C=null,z=-1,I=5,_=-1;function R(){return!(e.unstable_now()-_<I)}function M(){if(C!==null){var j=e.unstable_now();_=j;var U=!0;try{U=C(!0,j)}finally{U?T():(y=!1,C=null)}}else y=!1}var T;if(typeof f=="function")T=function(){f(M)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,D=N.port2;N.port1.onmessage=M,T=function(){D.postMessage(null)}}else T=function(){x(M,0)};function L(j){C=j,y||(y=!0,T())}function O(j,U){z=x(function(){j(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_continueExecution=function(){S||v||(S=!0,L(w))},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(j){switch(h){case 1:case 2:case 3:var U=3;break;default:U=h}var F=h;h=U;try{return j()}finally{h=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(j,U){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var F=h;h=j;try{return U()}finally{h=F}},e.unstable_scheduleCallback=function(j,U,F){var b=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?b+F:b):F=b,j){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=F+H,j={id:c++,callback:U,priorityLevel:j,startTime:F,expirationTime:H,sortIndex:-1},F>b?(j.sortIndex=F,t(u,j),n(l)===null&&j===n(u)&&(p?(m(z),z=-1):p=!0,O(E,F-b))):(j.sortIndex=H,t(l,j),S||v||(S=!0,L(w))),j},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(j){var U=h;return function(){var F=h;h=U;try{return j.apply(this,arguments)}finally{h=F}}}})(vd);gd.exports=vd;var bh=gd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vh=A,lt=bh;function $(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Sd=new Set,ro={};function Un(e,t){fr(e,t),fr(e+"Capture",t)}function fr(e,t){for(ro[e]=t,e=0;e<t.length;e++)Sd.add(t[e])}var Kt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),na=Object.prototype.hasOwnProperty,Hh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_u={},Mu={};function Bh(e){return na.call(Mu,e)?!0:na.call(_u,e)?!1:Hh.test(e)?Mu[e]=!0:(_u[e]=!0,!1)}function Wh(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Kh(e,t,n,r){if(t===null||typeof t>"u"||Wh(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function We(e,t,n,r,o,i,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var Pe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Pe[e]=new We(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Pe[t]=new We(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Pe[e]=new We(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Pe[e]=new We(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Pe[e]=new We(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Pe[e]=new We(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Pe[e]=new We(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Pe[e]=new We(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Pe[e]=new We(e,5,!1,e.toLowerCase(),null,!1,!1)});var gl=/[\-:]([a-z])/g;function vl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(gl,vl);Pe[t]=new We(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(gl,vl);Pe[t]=new We(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(gl,vl);Pe[t]=new We(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Pe[e]=new We(e,1,!1,e.toLowerCase(),null,!1,!1)});Pe.xlinkHref=new We("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Pe[e]=new We(e,1,!1,e.toLowerCase(),null,!0,!0)});function Sl(e,t,n,r){var o=Pe.hasOwnProperty(t)?Pe[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Kh(t,n,o,r)&&(n=null),r||o===null?Bh(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Xt=Vh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$o=Symbol.for("react.element"),Wn=Symbol.for("react.portal"),Kn=Symbol.for("react.fragment"),wl=Symbol.for("react.strict_mode"),ra=Symbol.for("react.profiler"),wd=Symbol.for("react.provider"),xd=Symbol.for("react.context"),xl=Symbol.for("react.forward_ref"),oa=Symbol.for("react.suspense"),ia=Symbol.for("react.suspense_list"),kl=Symbol.for("react.memo"),Zt=Symbol.for("react.lazy"),kd=Symbol.for("react.offscreen"),zu=Symbol.iterator;function jr(e){return e===null||typeof e!="object"?null:(e=zu&&e[zu]||e["@@iterator"],typeof e=="function"?e:null)}var me=Object.assign,xs;function Fr(e){if(xs===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);xs=t&&t[1]||""}return`
`+xs+e}var ks=!1;function Is(e,t){if(!e||ks)return"";ks=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var o=u.stack.split(`
`),i=r.stack.split(`
`),s=o.length-1,a=i.length-1;1<=s&&0<=a&&o[s]!==i[a];)a--;for(;1<=s&&0<=a;s--,a--)if(o[s]!==i[a]){if(s!==1||a!==1)do if(s--,a--,0>a||o[s]!==i[a]){var l=`
`+o[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=a);break}}}finally{ks=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Fr(e):""}function Qh(e){switch(e.tag){case 5:return Fr(e.type);case 16:return Fr("Lazy");case 13:return Fr("Suspense");case 19:return Fr("SuspenseList");case 0:case 2:case 15:return e=Is(e.type,!1),e;case 11:return e=Is(e.type.render,!1),e;case 1:return e=Is(e.type,!0),e;default:return""}}function sa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Kn:return"Fragment";case Wn:return"Portal";case ra:return"Profiler";case wl:return"StrictMode";case oa:return"Suspense";case ia:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case xd:return(e.displayName||"Context")+".Consumer";case wd:return(e._context.displayName||"Context")+".Provider";case xl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case kl:return t=e.displayName||null,t!==null?t:sa(e.type)||"Memo";case Zt:t=e._payload,e=e._init;try{return sa(e(t))}catch{}}return null}function Yh(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sa(t);case 8:return t===wl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function pn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Id(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Gh(e){var t=Id(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(s){r=""+s,i.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Uo(e){e._valueTracker||(e._valueTracker=Gh(e))}function Cd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Id(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function yi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function aa(e,t){var n=t.checked;return me({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ju(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=pn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ed(e,t){t=t.checked,t!=null&&Sl(e,"checked",t,!1)}function la(e,t){Ed(e,t);var n=pn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ua(e,t.type,n):t.hasOwnProperty("defaultValue")&&ua(e,t.type,pn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Tu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ua(e,t,n){(t!=="number"||yi(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var br=Array.isArray;function ir(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+pn(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function ca(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error($(91));return me({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Pu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error($(92));if(br(n)){if(1<n.length)throw Error($(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:pn(n)}}function Ad(e,t){var n=pn(t.value),r=pn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Nu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function _d(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function da(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?_d(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Fo,Md=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Fo=Fo||document.createElement("div"),Fo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Fo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function oo(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Yr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xh=["Webkit","ms","Moz","O"];Object.keys(Yr).forEach(function(e){Xh.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Yr[t]=Yr[e]})});function zd(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Yr.hasOwnProperty(e)&&Yr[e]?(""+t).trim():t+"px"}function jd(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=zd(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var Jh=me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fa(e,t){if(t){if(Jh[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error($(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error($(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error($(61))}if(t.style!=null&&typeof t.style!="object")throw Error($(62))}}function pa(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ha=null;function Il(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ma=null,sr=null,ar=null;function Ru(e){if(e=jo(e)){if(typeof ma!="function")throw Error($(280));var t=e.stateNode;t&&(t=Zi(t),ma(e.stateNode,e.type,t))}}function Td(e){sr?ar?ar.push(e):ar=[e]:sr=e}function Pd(){if(sr){var e=sr,t=ar;if(ar=sr=null,Ru(e),t)for(e=0;e<t.length;e++)Ru(t[e])}}function Nd(e,t){return e(t)}function Rd(){}var Cs=!1;function Dd(e,t,n){if(Cs)return e(t,n);Cs=!0;try{return Nd(e,t,n)}finally{Cs=!1,(sr!==null||ar!==null)&&(Rd(),Pd())}}function io(e,t){var n=e.stateNode;if(n===null)return null;var r=Zi(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error($(231,t,typeof n));return n}var ya=!1;if(Kt)try{var Tr={};Object.defineProperty(Tr,"passive",{get:function(){ya=!0}}),window.addEventListener("test",Tr,Tr),window.removeEventListener("test",Tr,Tr)}catch{ya=!1}function Zh(e,t,n,r,o,i,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Gr=!1,gi=null,vi=!1,ga=null,qh={onError:function(e){Gr=!0,gi=e}};function em(e,t,n,r,o,i,s,a,l){Gr=!1,gi=null,Zh.apply(qh,arguments)}function tm(e,t,n,r,o,i,s,a,l){if(em.apply(this,arguments),Gr){if(Gr){var u=gi;Gr=!1,gi=null}else throw Error($(198));vi||(vi=!0,ga=u)}}function Fn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ld(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Du(e){if(Fn(e)!==e)throw Error($(188))}function nm(e){var t=e.alternate;if(!t){if(t=Fn(e),t===null)throw Error($(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var i=o.alternate;if(i===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return Du(o),e;if(i===r)return Du(o),t;i=i.sibling}throw Error($(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s){for(a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?e:t}function Od(e){return e=nm(e),e!==null?$d(e):null}function $d(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=$d(e);if(t!==null)return t;e=e.sibling}return null}var Ud=lt.unstable_scheduleCallback,Lu=lt.unstable_cancelCallback,rm=lt.unstable_shouldYield,om=lt.unstable_requestPaint,we=lt.unstable_now,im=lt.unstable_getCurrentPriorityLevel,Cl=lt.unstable_ImmediatePriority,Fd=lt.unstable_UserBlockingPriority,Si=lt.unstable_NormalPriority,sm=lt.unstable_LowPriority,bd=lt.unstable_IdlePriority,Yi=null,Ot=null;function am(e){if(Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(Yi,e,void 0,(e.current.flags&128)===128)}catch{}}var zt=Math.clz32?Math.clz32:cm,lm=Math.log,um=Math.LN2;function cm(e){return e>>>=0,e===0?32:31-(lm(e)/um|0)|0}var bo=64,Vo=4194304;function Vr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function wi(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,s=n&268435455;if(s!==0){var a=s&~o;a!==0?r=Vr(a):(i&=s,i!==0&&(r=Vr(i)))}else s=n&~o,s!==0?r=Vr(s):i!==0&&(r=Vr(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,i=t&-t,o>=i||o===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-zt(t),o=1<<n,r|=e[n],t&=~o;return r}function dm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fm(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-zt(i),a=1<<s,l=o[s];l===-1?(!(a&n)||a&r)&&(o[s]=dm(a,t)):l<=t&&(e.expiredLanes|=a),i&=~a}}function va(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Vd(){var e=bo;return bo<<=1,!(bo&4194240)&&(bo=64),e}function Es(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Mo(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-zt(t),e[t]=n}function pm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-zt(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}function El(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-zt(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var re=0;function Hd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Bd,Al,Wd,Kd,Qd,Sa=!1,Ho=[],on=null,sn=null,an=null,so=new Map,ao=new Map,en=[],hm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ou(e,t){switch(e){case"focusin":case"focusout":on=null;break;case"dragenter":case"dragleave":sn=null;break;case"mouseover":case"mouseout":an=null;break;case"pointerover":case"pointerout":so.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ao.delete(t.pointerId)}}function Pr(e,t,n,r,o,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},t!==null&&(t=jo(t),t!==null&&Al(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function mm(e,t,n,r,o){switch(t){case"focusin":return on=Pr(on,e,t,n,r,o),!0;case"dragenter":return sn=Pr(sn,e,t,n,r,o),!0;case"mouseover":return an=Pr(an,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return so.set(i,Pr(so.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,ao.set(i,Pr(ao.get(i)||null,e,t,n,r,o)),!0}return!1}function Yd(e){var t=_n(e.target);if(t!==null){var n=Fn(t);if(n!==null){if(t=n.tag,t===13){if(t=Ld(n),t!==null){e.blockedOn=t,Qd(e.priority,function(){Wd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function oi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=wa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ha=r,n.target.dispatchEvent(r),ha=null}else return t=jo(n),t!==null&&Al(t),e.blockedOn=n,!1;t.shift()}return!0}function $u(e,t,n){oi(e)&&n.delete(t)}function ym(){Sa=!1,on!==null&&oi(on)&&(on=null),sn!==null&&oi(sn)&&(sn=null),an!==null&&oi(an)&&(an=null),so.forEach($u),ao.forEach($u)}function Nr(e,t){e.blockedOn===t&&(e.blockedOn=null,Sa||(Sa=!0,lt.unstable_scheduleCallback(lt.unstable_NormalPriority,ym)))}function lo(e){function t(o){return Nr(o,e)}if(0<Ho.length){Nr(Ho[0],e);for(var n=1;n<Ho.length;n++){var r=Ho[n];r.blockedOn===e&&(r.blockedOn=null)}}for(on!==null&&Nr(on,e),sn!==null&&Nr(sn,e),an!==null&&Nr(an,e),so.forEach(t),ao.forEach(t),n=0;n<en.length;n++)r=en[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<en.length&&(n=en[0],n.blockedOn===null);)Yd(n),n.blockedOn===null&&en.shift()}var lr=Xt.ReactCurrentBatchConfig,xi=!0;function gm(e,t,n,r){var o=re,i=lr.transition;lr.transition=null;try{re=1,_l(e,t,n,r)}finally{re=o,lr.transition=i}}function vm(e,t,n,r){var o=re,i=lr.transition;lr.transition=null;try{re=4,_l(e,t,n,r)}finally{re=o,lr.transition=i}}function _l(e,t,n,r){if(xi){var o=wa(e,t,n,r);if(o===null)Ds(e,t,r,ki,n),Ou(e,r);else if(mm(o,e,t,n,r))r.stopPropagation();else if(Ou(e,r),t&4&&-1<hm.indexOf(e)){for(;o!==null;){var i=jo(o);if(i!==null&&Bd(i),i=wa(e,t,n,r),i===null&&Ds(e,t,r,ki,n),i===o)break;o=i}o!==null&&r.stopPropagation()}else Ds(e,t,r,null,n)}}var ki=null;function wa(e,t,n,r){if(ki=null,e=Il(r),e=_n(e),e!==null)if(t=Fn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ld(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ki=e,null}function Gd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(im()){case Cl:return 1;case Fd:return 4;case Si:case sm:return 16;case bd:return 536870912;default:return 16}default:return 16}}var nn=null,Ml=null,ii=null;function Xd(){if(ii)return ii;var e,t=Ml,n=t.length,r,o="value"in nn?nn.value:nn.textContent,i=o.length;for(e=0;e<n&&t[e]===o[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===o[i-r];r++);return ii=o.slice(e,1<r?1-r:void 0)}function si(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Bo(){return!0}function Uu(){return!1}function ft(e){function t(n,r,o,i,s){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Bo:Uu,this.isPropagationStopped=Uu,this}return me(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Bo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Bo)},persist:function(){},isPersistent:Bo}),t}var _r={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zl=ft(_r),zo=me({},_r,{view:0,detail:0}),Sm=ft(zo),As,_s,Rr,Gi=me({},zo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Rr&&(Rr&&e.type==="mousemove"?(As=e.screenX-Rr.screenX,_s=e.screenY-Rr.screenY):_s=As=0,Rr=e),As)},movementY:function(e){return"movementY"in e?e.movementY:_s}}),Fu=ft(Gi),wm=me({},Gi,{dataTransfer:0}),xm=ft(wm),km=me({},zo,{relatedTarget:0}),Ms=ft(km),Im=me({},_r,{animationName:0,elapsedTime:0,pseudoElement:0}),Cm=ft(Im),Em=me({},_r,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Am=ft(Em),_m=me({},_r,{data:0}),bu=ft(_m),Mm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=jm[e])?!!t[e]:!1}function jl(){return Tm}var Pm=me({},zo,{key:function(e){if(e.key){var t=Mm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=si(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?zm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jl,charCode:function(e){return e.type==="keypress"?si(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?si(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Nm=ft(Pm),Rm=me({},Gi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vu=ft(Rm),Dm=me({},zo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jl}),Lm=ft(Dm),Om=me({},_r,{propertyName:0,elapsedTime:0,pseudoElement:0}),$m=ft(Om),Um=me({},Gi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Fm=ft(Um),bm=[9,13,27,32],Tl=Kt&&"CompositionEvent"in window,Xr=null;Kt&&"documentMode"in document&&(Xr=document.documentMode);var Vm=Kt&&"TextEvent"in window&&!Xr,Jd=Kt&&(!Tl||Xr&&8<Xr&&11>=Xr),Hu=" ",Bu=!1;function Zd(e,t){switch(e){case"keyup":return bm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qn=!1;function Hm(e,t){switch(e){case"compositionend":return qd(t);case"keypress":return t.which!==32?null:(Bu=!0,Hu);case"textInput":return e=t.data,e===Hu&&Bu?null:e;default:return null}}function Bm(e,t){if(Qn)return e==="compositionend"||!Tl&&Zd(e,t)?(e=Xd(),ii=Ml=nn=null,Qn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Jd&&t.locale!=="ko"?null:t.data;default:return null}}var Wm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Wm[e.type]:t==="textarea"}function ef(e,t,n,r){Td(r),t=Ii(t,"onChange"),0<t.length&&(n=new zl("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Jr=null,uo=null;function Km(e){ff(e,0)}function Xi(e){var t=Xn(e);if(Cd(t))return e}function Qm(e,t){if(e==="change")return t}var tf=!1;if(Kt){var zs;if(Kt){var js="oninput"in document;if(!js){var Ku=document.createElement("div");Ku.setAttribute("oninput","return;"),js=typeof Ku.oninput=="function"}zs=js}else zs=!1;tf=zs&&(!document.documentMode||9<document.documentMode)}function Qu(){Jr&&(Jr.detachEvent("onpropertychange",nf),uo=Jr=null)}function nf(e){if(e.propertyName==="value"&&Xi(uo)){var t=[];ef(t,uo,e,Il(e)),Dd(Km,t)}}function Ym(e,t,n){e==="focusin"?(Qu(),Jr=t,uo=n,Jr.attachEvent("onpropertychange",nf)):e==="focusout"&&Qu()}function Gm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Xi(uo)}function Xm(e,t){if(e==="click")return Xi(t)}function Jm(e,t){if(e==="input"||e==="change")return Xi(t)}function Zm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Tt=typeof Object.is=="function"?Object.is:Zm;function co(e,t){if(Tt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!na.call(t,o)||!Tt(e[o],t[o]))return!1}return!0}function Yu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Gu(e,t){var n=Yu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Yu(n)}}function rf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?rf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function of(){for(var e=window,t=yi();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=yi(e.document)}return t}function Pl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function qm(e){var t=of(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&rf(n.ownerDocument.documentElement,n)){if(r!==null&&Pl(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=r.end===void 0?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=Gu(n,i);var s=Gu(n,r);o&&s&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ey=Kt&&"documentMode"in document&&11>=document.documentMode,Yn=null,xa=null,Zr=null,ka=!1;function Xu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ka||Yn==null||Yn!==yi(r)||(r=Yn,"selectionStart"in r&&Pl(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zr&&co(Zr,r)||(Zr=r,r=Ii(xa,"onSelect"),0<r.length&&(t=new zl("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Yn)))}function Wo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Gn={animationend:Wo("Animation","AnimationEnd"),animationiteration:Wo("Animation","AnimationIteration"),animationstart:Wo("Animation","AnimationStart"),transitionend:Wo("Transition","TransitionEnd")},Ts={},sf={};Kt&&(sf=document.createElement("div").style,"AnimationEvent"in window||(delete Gn.animationend.animation,delete Gn.animationiteration.animation,delete Gn.animationstart.animation),"TransitionEvent"in window||delete Gn.transitionend.transition);function Ji(e){if(Ts[e])return Ts[e];if(!Gn[e])return e;var t=Gn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in sf)return Ts[e]=t[n];return e}var af=Ji("animationend"),lf=Ji("animationiteration"),uf=Ji("animationstart"),cf=Ji("transitionend"),df=new Map,Ju="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mn(e,t){df.set(e,t),Un(t,[e])}for(var Ps=0;Ps<Ju.length;Ps++){var Ns=Ju[Ps],ty=Ns.toLowerCase(),ny=Ns[0].toUpperCase()+Ns.slice(1);mn(ty,"on"+ny)}mn(af,"onAnimationEnd");mn(lf,"onAnimationIteration");mn(uf,"onAnimationStart");mn("dblclick","onDoubleClick");mn("focusin","onFocus");mn("focusout","onBlur");mn(cf,"onTransitionEnd");fr("onMouseEnter",["mouseout","mouseover"]);fr("onMouseLeave",["mouseout","mouseover"]);fr("onPointerEnter",["pointerout","pointerover"]);fr("onPointerLeave",["pointerout","pointerover"]);Un("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Un("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Un("onBeforeInput",["compositionend","keypress","textInput","paste"]);Un("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Un("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Un("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ry=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hr));function Zu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,tm(r,t,void 0,e),e.currentTarget=null}function ff(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&o.isPropagationStopped())break e;Zu(o,a,u),i=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&o.isPropagationStopped())break e;Zu(o,a,u),i=l}}}if(vi)throw e=ga,vi=!1,ga=null,e}function ae(e,t){var n=t[_a];n===void 0&&(n=t[_a]=new Set);var r=e+"__bubble";n.has(r)||(pf(t,e,2,!1),n.add(r))}function Rs(e,t,n){var r=0;t&&(r|=4),pf(n,e,r,t)}var Ko="_reactListening"+Math.random().toString(36).slice(2);function fo(e){if(!e[Ko]){e[Ko]=!0,Sd.forEach(function(n){n!=="selectionchange"&&(ry.has(n)||Rs(n,!1,e),Rs(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ko]||(t[Ko]=!0,Rs("selectionchange",!1,t))}}function pf(e,t,n,r){switch(Gd(t)){case 1:var o=gm;break;case 4:o=vm;break;default:o=_l}n=o.bind(null,t,n,e),o=void 0,!ya||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Ds(e,t,n,r,o){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===o||l.nodeType===8&&l.parentNode===o))return;s=s.return}for(;a!==null;){if(s=_n(a),s===null)return;if(l=s.tag,l===5||l===6){r=i=s;continue e}a=a.parentNode}}r=r.return}Dd(function(){var u=i,c=Il(n),d=[];e:{var h=df.get(e);if(h!==void 0){var v=zl,S=e;switch(e){case"keypress":if(si(n)===0)break e;case"keydown":case"keyup":v=Nm;break;case"focusin":S="focus",v=Ms;break;case"focusout":S="blur",v=Ms;break;case"beforeblur":case"afterblur":v=Ms;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Fu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=xm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=Lm;break;case af:case lf:case uf:v=Cm;break;case cf:v=$m;break;case"scroll":v=Sm;break;case"wheel":v=Fm;break;case"copy":case"cut":case"paste":v=Am;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Vu}var p=(t&4)!==0,x=!p&&e==="scroll",m=p?h!==null?h+"Capture":null:h;p=[];for(var f=u,g;f!==null;){g=f;var E=g.stateNode;if(g.tag===5&&E!==null&&(g=E,m!==null&&(E=io(f,m),E!=null&&p.push(po(f,E,g)))),x)break;f=f.return}0<p.length&&(h=new v(h,S,null,n,c),d.push({event:h,listeners:p}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",h&&n!==ha&&(S=n.relatedTarget||n.fromElement)&&(_n(S)||S[Qt]))break e;if((v||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,v?(S=n.relatedTarget||n.toElement,v=u,S=S?_n(S):null,S!==null&&(x=Fn(S),S!==x||S.tag!==5&&S.tag!==6)&&(S=null)):(v=null,S=u),v!==S)){if(p=Fu,E="onMouseLeave",m="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(p=Vu,E="onPointerLeave",m="onPointerEnter",f="pointer"),x=v==null?h:Xn(v),g=S==null?h:Xn(S),h=new p(E,f+"leave",v,n,c),h.target=x,h.relatedTarget=g,E=null,_n(c)===u&&(p=new p(m,f+"enter",S,n,c),p.target=g,p.relatedTarget=x,E=p),x=E,v&&S)t:{for(p=v,m=S,f=0,g=p;g;g=Vn(g))f++;for(g=0,E=m;E;E=Vn(E))g++;for(;0<f-g;)p=Vn(p),f--;for(;0<g-f;)m=Vn(m),g--;for(;f--;){if(p===m||m!==null&&p===m.alternate)break t;p=Vn(p),m=Vn(m)}p=null}else p=null;v!==null&&qu(d,h,v,p,!1),S!==null&&x!==null&&qu(d,x,S,p,!0)}}e:{if(h=u?Xn(u):window,v=h.nodeName&&h.nodeName.toLowerCase(),v==="select"||v==="input"&&h.type==="file")var w=Qm;else if(Wu(h))if(tf)w=Jm;else{w=Gm;var y=Ym}else(v=h.nodeName)&&v.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=Xm);if(w&&(w=w(e,u))){ef(d,w,n,c);break e}y&&y(e,h,u),e==="focusout"&&(y=h._wrapperState)&&y.controlled&&h.type==="number"&&ua(h,"number",h.value)}switch(y=u?Xn(u):window,e){case"focusin":(Wu(y)||y.contentEditable==="true")&&(Yn=y,xa=u,Zr=null);break;case"focusout":Zr=xa=Yn=null;break;case"mousedown":ka=!0;break;case"contextmenu":case"mouseup":case"dragend":ka=!1,Xu(d,n,c);break;case"selectionchange":if(ey)break;case"keydown":case"keyup":Xu(d,n,c)}var C;if(Tl)e:{switch(e){case"compositionstart":var z="onCompositionStart";break e;case"compositionend":z="onCompositionEnd";break e;case"compositionupdate":z="onCompositionUpdate";break e}z=void 0}else Qn?Zd(e,n)&&(z="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(z="onCompositionStart");z&&(Jd&&n.locale!=="ko"&&(Qn||z!=="onCompositionStart"?z==="onCompositionEnd"&&Qn&&(C=Xd()):(nn=c,Ml="value"in nn?nn.value:nn.textContent,Qn=!0)),y=Ii(u,z),0<y.length&&(z=new bu(z,e,null,n,c),d.push({event:z,listeners:y}),C?z.data=C:(C=qd(n),C!==null&&(z.data=C)))),(C=Vm?Hm(e,n):Bm(e,n))&&(u=Ii(u,"onBeforeInput"),0<u.length&&(c=new bu("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=C))}ff(d,t)})}function po(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ii(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=io(e,n),i!=null&&r.unshift(po(e,i,o)),i=io(e,t),i!=null&&r.push(po(e,i,o))),e=e.return}return r}function Vn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function qu(e,t,n,r,o){for(var i=t._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,o?(l=io(n,i),l!=null&&s.unshift(po(n,l,a))):o||(l=io(n,i),l!=null&&s.push(po(n,l,a)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var oy=/\r\n?/g,iy=/\u0000|\uFFFD/g;function ec(e){return(typeof e=="string"?e:""+e).replace(oy,`
`).replace(iy,"")}function Qo(e,t,n){if(t=ec(t),ec(e)!==t&&n)throw Error($(425))}function Ci(){}var Ia=null,Ca=null;function Ea(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Aa=typeof setTimeout=="function"?setTimeout:void 0,sy=typeof clearTimeout=="function"?clearTimeout:void 0,tc=typeof Promise=="function"?Promise:void 0,ay=typeof queueMicrotask=="function"?queueMicrotask:typeof tc<"u"?function(e){return tc.resolve(null).then(e).catch(ly)}:Aa;function ly(e){setTimeout(function(){throw e})}function Ls(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),lo(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);lo(t)}function ln(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function nc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Mr=Math.random().toString(36).slice(2),Lt="__reactFiber$"+Mr,ho="__reactProps$"+Mr,Qt="__reactContainer$"+Mr,_a="__reactEvents$"+Mr,uy="__reactListeners$"+Mr,cy="__reactHandles$"+Mr;function _n(e){var t=e[Lt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Qt]||n[Lt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=nc(e);e!==null;){if(n=e[Lt])return n;e=nc(e)}return t}e=n,n=e.parentNode}return null}function jo(e){return e=e[Lt]||e[Qt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Xn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error($(33))}function Zi(e){return e[ho]||null}var Ma=[],Jn=-1;function yn(e){return{current:e}}function le(e){0>Jn||(e.current=Ma[Jn],Ma[Jn]=null,Jn--)}function se(e,t){Jn++,Ma[Jn]=e.current,e.current=t}var hn={},Fe=yn(hn),et=yn(!1),Pn=hn;function pr(e,t){var n=e.type.contextTypes;if(!n)return hn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in n)o[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function tt(e){return e=e.childContextTypes,e!=null}function Ei(){le(et),le(Fe)}function rc(e,t,n){if(Fe.current!==hn)throw Error($(168));se(Fe,t),se(et,n)}function hf(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error($(108,Yh(e)||"Unknown",o));return me({},n,r)}function Ai(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hn,Pn=Fe.current,se(Fe,e),se(et,et.current),!0}function oc(e,t,n){var r=e.stateNode;if(!r)throw Error($(169));n?(e=hf(e,t,Pn),r.__reactInternalMemoizedMergedChildContext=e,le(et),le(Fe),se(Fe,e)):le(et),se(et,n)}var Vt=null,qi=!1,Os=!1;function mf(e){Vt===null?Vt=[e]:Vt.push(e)}function dy(e){qi=!0,mf(e)}function gn(){if(!Os&&Vt!==null){Os=!0;var e=0,t=re;try{var n=Vt;for(re=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Vt=null,qi=!1}catch(o){throw Vt!==null&&(Vt=Vt.slice(e+1)),Ud(Cl,gn),o}finally{re=t,Os=!1}}return null}var Zn=[],qn=0,_i=null,Mi=0,ht=[],mt=0,Nn=null,Ht=1,Bt="";function In(e,t){Zn[qn++]=Mi,Zn[qn++]=_i,_i=e,Mi=t}function yf(e,t,n){ht[mt++]=Ht,ht[mt++]=Bt,ht[mt++]=Nn,Nn=e;var r=Ht;e=Bt;var o=32-zt(r)-1;r&=~(1<<o),n+=1;var i=32-zt(t)+o;if(30<i){var s=o-o%5;i=(r&(1<<s)-1).toString(32),r>>=s,o-=s,Ht=1<<32-zt(t)+o|n<<o|r,Bt=i+e}else Ht=1<<i|n<<o|r,Bt=e}function Nl(e){e.return!==null&&(In(e,1),yf(e,1,0))}function Rl(e){for(;e===_i;)_i=Zn[--qn],Zn[qn]=null,Mi=Zn[--qn],Zn[qn]=null;for(;e===Nn;)Nn=ht[--mt],ht[mt]=null,Bt=ht[--mt],ht[mt]=null,Ht=ht[--mt],ht[mt]=null}var st=null,it=null,de=!1,_t=null;function gf(e,t){var n=yt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function ic(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,st=e,it=ln(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,st=e,it=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Nn!==null?{id:Ht,overflow:Bt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=yt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,st=e,it=null,!0):!1;default:return!1}}function za(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ja(e){if(de){var t=it;if(t){var n=t;if(!ic(e,t)){if(za(e))throw Error($(418));t=ln(n.nextSibling);var r=st;t&&ic(e,t)?gf(r,n):(e.flags=e.flags&-4097|2,de=!1,st=e)}}else{if(za(e))throw Error($(418));e.flags=e.flags&-4097|2,de=!1,st=e}}}function sc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;st=e}function Yo(e){if(e!==st)return!1;if(!de)return sc(e),de=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ea(e.type,e.memoizedProps)),t&&(t=it)){if(za(e))throw vf(),Error($(418));for(;t;)gf(e,t),t=ln(t.nextSibling)}if(sc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error($(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){it=ln(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}it=null}}else it=st?ln(e.stateNode.nextSibling):null;return!0}function vf(){for(var e=it;e;)e=ln(e.nextSibling)}function hr(){it=st=null,de=!1}function Dl(e){_t===null?_t=[e]:_t.push(e)}var fy=Xt.ReactCurrentBatchConfig;function Dr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,e));var o=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(s){var a=o.refs;s===null?delete a[i]:a[i]=s},t._stringRef=i,t)}if(typeof e!="string")throw Error($(284));if(!n._owner)throw Error($(290,e))}return e}function Go(e,t){throw e=Object.prototype.toString.call(t),Error($(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ac(e){var t=e._init;return t(e._payload)}function Sf(e){function t(m,f){if(e){var g=m.deletions;g===null?(m.deletions=[f],m.flags|=16):g.push(f)}}function n(m,f){if(!e)return null;for(;f!==null;)t(m,f),f=f.sibling;return null}function r(m,f){for(m=new Map;f!==null;)f.key!==null?m.set(f.key,f):m.set(f.index,f),f=f.sibling;return m}function o(m,f){return m=fn(m,f),m.index=0,m.sibling=null,m}function i(m,f,g){return m.index=g,e?(g=m.alternate,g!==null?(g=g.index,g<f?(m.flags|=2,f):g):(m.flags|=2,f)):(m.flags|=1048576,f)}function s(m){return e&&m.alternate===null&&(m.flags|=2),m}function a(m,f,g,E){return f===null||f.tag!==6?(f=Bs(g,m.mode,E),f.return=m,f):(f=o(f,g),f.return=m,f)}function l(m,f,g,E){var w=g.type;return w===Kn?c(m,f,g.props.children,E,g.key):f!==null&&(f.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Zt&&ac(w)===f.type)?(E=o(f,g.props),E.ref=Dr(m,f,g),E.return=m,E):(E=pi(g.type,g.key,g.props,null,m.mode,E),E.ref=Dr(m,f,g),E.return=m,E)}function u(m,f,g,E){return f===null||f.tag!==4||f.stateNode.containerInfo!==g.containerInfo||f.stateNode.implementation!==g.implementation?(f=Ws(g,m.mode,E),f.return=m,f):(f=o(f,g.children||[]),f.return=m,f)}function c(m,f,g,E,w){return f===null||f.tag!==7?(f=Tn(g,m.mode,E,w),f.return=m,f):(f=o(f,g),f.return=m,f)}function d(m,f,g){if(typeof f=="string"&&f!==""||typeof f=="number")return f=Bs(""+f,m.mode,g),f.return=m,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case $o:return g=pi(f.type,f.key,f.props,null,m.mode,g),g.ref=Dr(m,null,f),g.return=m,g;case Wn:return f=Ws(f,m.mode,g),f.return=m,f;case Zt:var E=f._init;return d(m,E(f._payload),g)}if(br(f)||jr(f))return f=Tn(f,m.mode,g,null),f.return=m,f;Go(m,f)}return null}function h(m,f,g,E){var w=f!==null?f.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return w!==null?null:a(m,f,""+g,E);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case $o:return g.key===w?l(m,f,g,E):null;case Wn:return g.key===w?u(m,f,g,E):null;case Zt:return w=g._init,h(m,f,w(g._payload),E)}if(br(g)||jr(g))return w!==null?null:c(m,f,g,E,null);Go(m,g)}return null}function v(m,f,g,E,w){if(typeof E=="string"&&E!==""||typeof E=="number")return m=m.get(g)||null,a(f,m,""+E,w);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case $o:return m=m.get(E.key===null?g:E.key)||null,l(f,m,E,w);case Wn:return m=m.get(E.key===null?g:E.key)||null,u(f,m,E,w);case Zt:var y=E._init;return v(m,f,g,y(E._payload),w)}if(br(E)||jr(E))return m=m.get(g)||null,c(f,m,E,w,null);Go(f,E)}return null}function S(m,f,g,E){for(var w=null,y=null,C=f,z=f=0,I=null;C!==null&&z<g.length;z++){C.index>z?(I=C,C=null):I=C.sibling;var _=h(m,C,g[z],E);if(_===null){C===null&&(C=I);break}e&&C&&_.alternate===null&&t(m,C),f=i(_,f,z),y===null?w=_:y.sibling=_,y=_,C=I}if(z===g.length)return n(m,C),de&&In(m,z),w;if(C===null){for(;z<g.length;z++)C=d(m,g[z],E),C!==null&&(f=i(C,f,z),y===null?w=C:y.sibling=C,y=C);return de&&In(m,z),w}for(C=r(m,C);z<g.length;z++)I=v(C,m,z,g[z],E),I!==null&&(e&&I.alternate!==null&&C.delete(I.key===null?z:I.key),f=i(I,f,z),y===null?w=I:y.sibling=I,y=I);return e&&C.forEach(function(R){return t(m,R)}),de&&In(m,z),w}function p(m,f,g,E){var w=jr(g);if(typeof w!="function")throw Error($(150));if(g=w.call(g),g==null)throw Error($(151));for(var y=w=null,C=f,z=f=0,I=null,_=g.next();C!==null&&!_.done;z++,_=g.next()){C.index>z?(I=C,C=null):I=C.sibling;var R=h(m,C,_.value,E);if(R===null){C===null&&(C=I);break}e&&C&&R.alternate===null&&t(m,C),f=i(R,f,z),y===null?w=R:y.sibling=R,y=R,C=I}if(_.done)return n(m,C),de&&In(m,z),w;if(C===null){for(;!_.done;z++,_=g.next())_=d(m,_.value,E),_!==null&&(f=i(_,f,z),y===null?w=_:y.sibling=_,y=_);return de&&In(m,z),w}for(C=r(m,C);!_.done;z++,_=g.next())_=v(C,m,z,_.value,E),_!==null&&(e&&_.alternate!==null&&C.delete(_.key===null?z:_.key),f=i(_,f,z),y===null?w=_:y.sibling=_,y=_);return e&&C.forEach(function(M){return t(m,M)}),de&&In(m,z),w}function x(m,f,g,E){if(typeof g=="object"&&g!==null&&g.type===Kn&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case $o:e:{for(var w=g.key,y=f;y!==null;){if(y.key===w){if(w=g.type,w===Kn){if(y.tag===7){n(m,y.sibling),f=o(y,g.props.children),f.return=m,m=f;break e}}else if(y.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Zt&&ac(w)===y.type){n(m,y.sibling),f=o(y,g.props),f.ref=Dr(m,y,g),f.return=m,m=f;break e}n(m,y);break}else t(m,y);y=y.sibling}g.type===Kn?(f=Tn(g.props.children,m.mode,E,g.key),f.return=m,m=f):(E=pi(g.type,g.key,g.props,null,m.mode,E),E.ref=Dr(m,f,g),E.return=m,m=E)}return s(m);case Wn:e:{for(y=g.key;f!==null;){if(f.key===y)if(f.tag===4&&f.stateNode.containerInfo===g.containerInfo&&f.stateNode.implementation===g.implementation){n(m,f.sibling),f=o(f,g.children||[]),f.return=m,m=f;break e}else{n(m,f);break}else t(m,f);f=f.sibling}f=Ws(g,m.mode,E),f.return=m,m=f}return s(m);case Zt:return y=g._init,x(m,f,y(g._payload),E)}if(br(g))return S(m,f,g,E);if(jr(g))return p(m,f,g,E);Go(m,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,f!==null&&f.tag===6?(n(m,f.sibling),f=o(f,g),f.return=m,m=f):(n(m,f),f=Bs(g,m.mode,E),f.return=m,m=f),s(m)):n(m,f)}return x}var mr=Sf(!0),wf=Sf(!1),zi=yn(null),ji=null,er=null,Ll=null;function Ol(){Ll=er=ji=null}function $l(e){var t=zi.current;le(zi),e._currentValue=t}function Ta(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ur(e,t){ji=e,Ll=er=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ze=!0),e.firstContext=null)}function wt(e){var t=e._currentValue;if(Ll!==e)if(e={context:e,memoizedValue:t,next:null},er===null){if(ji===null)throw Error($(308));er=e,ji.dependencies={lanes:0,firstContext:e}}else er=er.next=e;return t}var Mn=null;function Ul(e){Mn===null?Mn=[e]:Mn.push(e)}function xf(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,Ul(t)):(n.next=o.next,o.next=n),t.interleaved=n,Yt(e,r)}function Yt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var qt=!1;function Fl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Wt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function un(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Z&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Yt(e,n)}return o=r.interleaved,o===null?(t.next=t,Ul(r)):(t.next=o.next,o.next=t),r.interleaved=t,Yt(e,n)}function ai(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,El(e,n)}}function lc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?o=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?o=i=t:i=i.next=t}else o=i=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ti(e,t,n,r){var o=e.updateQueue;qt=!1;var i=o.firstBaseUpdate,s=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?i=u:s.next=u,s=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==s&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(i!==null){var d=o.baseState;s=0,c=u=l=null,a=i;do{var h=a.lane,v=a.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var S=e,p=a;switch(h=t,v=n,p.tag){case 1:if(S=p.payload,typeof S=="function"){d=S.call(v,d,h);break e}d=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=p.payload,h=typeof S=="function"?S.call(v,d,h):S,h==null)break e;d=me({},d,h);break e;case 2:qt=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=o.effects,h===null?o.effects=[a]:h.push(a))}else v={eventTime:v,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=v,l=d):c=c.next=v,s|=h;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;h=a,a=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(!0);if(c===null&&(l=d),o.baseState=l,o.firstBaseUpdate=u,o.lastBaseUpdate=c,t=o.shared.interleaved,t!==null){o=t;do s|=o.lane,o=o.next;while(o!==t)}else i===null&&(o.shared.lanes=0);Dn|=s,e.lanes=s,e.memoizedState=d}}function uc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error($(191,o));o.call(r)}}}var To={},$t=yn(To),mo=yn(To),yo=yn(To);function zn(e){if(e===To)throw Error($(174));return e}function bl(e,t){switch(se(yo,t),se(mo,e),se($t,To),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:da(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=da(t,e)}le($t),se($t,t)}function yr(){le($t),le(mo),le(yo)}function If(e){zn(yo.current);var t=zn($t.current),n=da(t,e.type);t!==n&&(se(mo,e),se($t,n))}function Vl(e){mo.current===e&&(le($t),le(mo))}var pe=yn(0);function Pi(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var $s=[];function Hl(){for(var e=0;e<$s.length;e++)$s[e]._workInProgressVersionPrimary=null;$s.length=0}var li=Xt.ReactCurrentDispatcher,Us=Xt.ReactCurrentBatchConfig,Rn=0,he=null,Ce=null,Ae=null,Ni=!1,qr=!1,go=0,py=0;function Le(){throw Error($(321))}function Bl(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Tt(e[n],t[n]))return!1;return!0}function Wl(e,t,n,r,o,i){if(Rn=i,he=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,li.current=e===null||e.memoizedState===null?gy:vy,e=n(r,o),qr){i=0;do{if(qr=!1,go=0,25<=i)throw Error($(301));i+=1,Ae=Ce=null,t.updateQueue=null,li.current=Sy,e=n(r,o)}while(qr)}if(li.current=Ri,t=Ce!==null&&Ce.next!==null,Rn=0,Ae=Ce=he=null,Ni=!1,t)throw Error($(300));return e}function Kl(){var e=go!==0;return go=0,e}function Dt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ae===null?he.memoizedState=Ae=e:Ae=Ae.next=e,Ae}function xt(){if(Ce===null){var e=he.alternate;e=e!==null?e.memoizedState:null}else e=Ce.next;var t=Ae===null?he.memoizedState:Ae.next;if(t!==null)Ae=t,Ce=e;else{if(e===null)throw Error($(310));Ce=e,e={memoizedState:Ce.memoizedState,baseState:Ce.baseState,baseQueue:Ce.baseQueue,queue:Ce.queue,next:null},Ae===null?he.memoizedState=Ae=e:Ae=Ae.next=e}return Ae}function vo(e,t){return typeof t=="function"?t(e):t}function Fs(e){var t=xt(),n=t.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var r=Ce,o=r.baseQueue,i=n.pending;if(i!==null){if(o!==null){var s=o.next;o.next=i.next,i.next=s}r.baseQueue=o=i,n.pending=null}if(o!==null){i=o.next,r=r.baseState;var a=s=null,l=null,u=i;do{var c=u.lane;if((Rn&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,s=r):l=l.next=d,he.lanes|=c,Dn|=c}u=u.next}while(u!==null&&u!==i);l===null?s=r:l.next=a,Tt(r,t.memoizedState)||(Ze=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do i=o.lane,he.lanes|=i,Dn|=i,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function bs(e){var t=xt(),n=t.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(o!==null){n.pending=null;var s=o=o.next;do i=e(i,s.action),s=s.next;while(s!==o);Tt(i,t.memoizedState)||(Ze=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Cf(){}function Ef(e,t){var n=he,r=xt(),o=t(),i=!Tt(r.memoizedState,o);if(i&&(r.memoizedState=o,Ze=!0),r=r.queue,Ql(Mf.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Ae!==null&&Ae.memoizedState.tag&1){if(n.flags|=2048,So(9,_f.bind(null,n,r,o,t),void 0,null),_e===null)throw Error($(349));Rn&30||Af(n,t,o)}return o}function Af(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=he.updateQueue,t===null?(t={lastEffect:null,stores:null},he.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function _f(e,t,n,r){t.value=n,t.getSnapshot=r,zf(t)&&jf(e)}function Mf(e,t,n){return n(function(){zf(t)&&jf(e)})}function zf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Tt(e,n)}catch{return!0}}function jf(e){var t=Yt(e,1);t!==null&&jt(t,e,1,-1)}function cc(e){var t=Dt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vo,lastRenderedState:e},t.queue=e,e=e.dispatch=yy.bind(null,he,e),[t.memoizedState,e]}function So(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=he.updateQueue,t===null?(t={lastEffect:null,stores:null},he.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Tf(){return xt().memoizedState}function ui(e,t,n,r){var o=Dt();he.flags|=e,o.memoizedState=So(1|t,n,void 0,r===void 0?null:r)}function es(e,t,n,r){var o=xt();r=r===void 0?null:r;var i=void 0;if(Ce!==null){var s=Ce.memoizedState;if(i=s.destroy,r!==null&&Bl(r,s.deps)){o.memoizedState=So(t,n,i,r);return}}he.flags|=e,o.memoizedState=So(1|t,n,i,r)}function dc(e,t){return ui(8390656,8,e,t)}function Ql(e,t){return es(2048,8,e,t)}function Pf(e,t){return es(4,2,e,t)}function Nf(e,t){return es(4,4,e,t)}function Rf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Df(e,t,n){return n=n!=null?n.concat([e]):null,es(4,4,Rf.bind(null,t,e),n)}function Yl(){}function Lf(e,t){var n=xt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Bl(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Of(e,t){var n=xt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Bl(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $f(e,t,n){return Rn&21?(Tt(n,t)||(n=Vd(),he.lanes|=n,Dn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ze=!0),e.memoizedState=n)}function hy(e,t){var n=re;re=n!==0&&4>n?n:4,e(!0);var r=Us.transition;Us.transition={};try{e(!1),t()}finally{re=n,Us.transition=r}}function Uf(){return xt().memoizedState}function my(e,t,n){var r=dn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ff(e))bf(t,n);else if(n=xf(e,t,n,r),n!==null){var o=He();jt(n,e,r,o),Vf(n,t,r)}}function yy(e,t,n){var r=dn(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ff(e))bf(t,o);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var s=t.lastRenderedState,a=i(s,n);if(o.hasEagerState=!0,o.eagerState=a,Tt(a,s)){var l=t.interleaved;l===null?(o.next=o,Ul(t)):(o.next=l.next,l.next=o),t.interleaved=o;return}}catch{}finally{}n=xf(e,t,o,r),n!==null&&(o=He(),jt(n,e,r,o),Vf(n,t,r))}}function Ff(e){var t=e.alternate;return e===he||t!==null&&t===he}function bf(e,t){qr=Ni=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Vf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,El(e,n)}}var Ri={readContext:wt,useCallback:Le,useContext:Le,useEffect:Le,useImperativeHandle:Le,useInsertionEffect:Le,useLayoutEffect:Le,useMemo:Le,useReducer:Le,useRef:Le,useState:Le,useDebugValue:Le,useDeferredValue:Le,useTransition:Le,useMutableSource:Le,useSyncExternalStore:Le,useId:Le,unstable_isNewReconciler:!1},gy={readContext:wt,useCallback:function(e,t){return Dt().memoizedState=[e,t===void 0?null:t],e},useContext:wt,useEffect:dc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ui(4194308,4,Rf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ui(4194308,4,e,t)},useInsertionEffect:function(e,t){return ui(4,2,e,t)},useMemo:function(e,t){var n=Dt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Dt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=my.bind(null,he,e),[r.memoizedState,e]},useRef:function(e){var t=Dt();return e={current:e},t.memoizedState=e},useState:cc,useDebugValue:Yl,useDeferredValue:function(e){return Dt().memoizedState=e},useTransition:function(){var e=cc(!1),t=e[0];return e=hy.bind(null,e[1]),Dt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=he,o=Dt();if(de){if(n===void 0)throw Error($(407));n=n()}else{if(n=t(),_e===null)throw Error($(349));Rn&30||Af(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,dc(Mf.bind(null,r,i,e),[e]),r.flags|=2048,So(9,_f.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Dt(),t=_e.identifierPrefix;if(de){var n=Bt,r=Ht;n=(r&~(1<<32-zt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=go++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=py++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},vy={readContext:wt,useCallback:Lf,useContext:wt,useEffect:Ql,useImperativeHandle:Df,useInsertionEffect:Pf,useLayoutEffect:Nf,useMemo:Of,useReducer:Fs,useRef:Tf,useState:function(){return Fs(vo)},useDebugValue:Yl,useDeferredValue:function(e){var t=xt();return $f(t,Ce.memoizedState,e)},useTransition:function(){var e=Fs(vo)[0],t=xt().memoizedState;return[e,t]},useMutableSource:Cf,useSyncExternalStore:Ef,useId:Uf,unstable_isNewReconciler:!1},Sy={readContext:wt,useCallback:Lf,useContext:wt,useEffect:Ql,useImperativeHandle:Df,useInsertionEffect:Pf,useLayoutEffect:Nf,useMemo:Of,useReducer:bs,useRef:Tf,useState:function(){return bs(vo)},useDebugValue:Yl,useDeferredValue:function(e){var t=xt();return Ce===null?t.memoizedState=e:$f(t,Ce.memoizedState,e)},useTransition:function(){var e=bs(vo)[0],t=xt().memoizedState;return[e,t]},useMutableSource:Cf,useSyncExternalStore:Ef,useId:Uf,unstable_isNewReconciler:!1};function Et(e,t){if(e&&e.defaultProps){t=me({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Pa(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:me({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ts={isMounted:function(e){return(e=e._reactInternals)?Fn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=He(),o=dn(e),i=Wt(r,o);i.payload=t,n!=null&&(i.callback=n),t=un(e,i,o),t!==null&&(jt(t,e,o,r),ai(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=He(),o=dn(e),i=Wt(r,o);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=un(e,i,o),t!==null&&(jt(t,e,o,r),ai(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=He(),r=dn(e),o=Wt(n,r);o.tag=2,t!=null&&(o.callback=t),t=un(e,o,r),t!==null&&(jt(t,e,r,n),ai(t,e,r))}};function fc(e,t,n,r,o,i,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,s):t.prototype&&t.prototype.isPureReactComponent?!co(n,r)||!co(o,i):!0}function Hf(e,t,n){var r=!1,o=hn,i=t.contextType;return typeof i=="object"&&i!==null?i=wt(i):(o=tt(t)?Pn:Fe.current,r=t.contextTypes,i=(r=r!=null)?pr(e,o):hn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ts,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function pc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ts.enqueueReplaceState(t,t.state,null)}function Na(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Fl(e);var i=t.contextType;typeof i=="object"&&i!==null?o.context=wt(i):(i=tt(t)?Pn:Fe.current,o.context=pr(e,i)),o.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Pa(e,t,i,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&ts.enqueueReplaceState(o,o.state,null),Ti(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function gr(e,t){try{var n="",r=t;do n+=Qh(r),r=r.return;while(r);var o=n}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:o,digest:null}}function Vs(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ra(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var wy=typeof WeakMap=="function"?WeakMap:Map;function Bf(e,t,n){n=Wt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Li||(Li=!0,Ba=r),Ra(e,t)},n}function Wf(e,t,n){n=Wt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){Ra(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ra(e,t),typeof r!="function"&&(cn===null?cn=new Set([this]):cn.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function hc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new wy;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Ry.bind(null,e,t,n),t.then(e,e))}function mc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function yc(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Wt(-1,1),t.tag=2,un(n,t,1))),n.lanes|=1),e)}var xy=Xt.ReactCurrentOwner,Ze=!1;function be(e,t,n,r){t.child=e===null?wf(t,null,n,r):mr(t,e.child,n,r)}function gc(e,t,n,r,o){n=n.render;var i=t.ref;return ur(t,o),r=Wl(e,t,n,r,i,o),n=Kl(),e!==null&&!Ze?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Gt(e,t,o)):(de&&n&&Nl(t),t.flags|=1,be(e,t,r,o),t.child)}function vc(e,t,n,r,o){if(e===null){var i=n.type;return typeof i=="function"&&!nu(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Kf(e,t,i,r,o)):(e=pi(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&o)){var s=i.memoizedProps;if(n=n.compare,n=n!==null?n:co,n(s,r)&&e.ref===t.ref)return Gt(e,t,o)}return t.flags|=1,e=fn(i,r),e.ref=t.ref,e.return=t,t.child=e}function Kf(e,t,n,r,o){if(e!==null){var i=e.memoizedProps;if(co(i,r)&&e.ref===t.ref)if(Ze=!1,t.pendingProps=r=i,(e.lanes&o)!==0)e.flags&131072&&(Ze=!0);else return t.lanes=e.lanes,Gt(e,t,o)}return Da(e,t,n,r,o)}function Qf(e,t,n){var r=t.pendingProps,o=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},se(nr,ot),ot|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,se(nr,ot),ot|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,se(nr,ot),ot|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,se(nr,ot),ot|=r;return be(e,t,o,n),t.child}function Yf(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Da(e,t,n,r,o){var i=tt(n)?Pn:Fe.current;return i=pr(t,i),ur(t,o),n=Wl(e,t,n,r,i,o),r=Kl(),e!==null&&!Ze?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Gt(e,t,o)):(de&&r&&Nl(t),t.flags|=1,be(e,t,n,o),t.child)}function Sc(e,t,n,r,o){if(tt(n)){var i=!0;Ai(t)}else i=!1;if(ur(t,o),t.stateNode===null)ci(e,t),Hf(t,n,r),Na(t,n,r,o),r=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=wt(u):(u=tt(n)?Pn:Fe.current,u=pr(t,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==u)&&pc(t,s,r,u),qt=!1;var h=t.memoizedState;s.state=h,Ti(t,r,s,o),l=t.memoizedState,a!==r||h!==l||et.current||qt?(typeof c=="function"&&(Pa(t,n,c,r),l=t.memoizedState),(a=qt||fc(t,n,a,r,h,l,u))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,kf(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:Et(t.type,a),s.props=u,d=t.pendingProps,h=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=wt(l):(l=tt(n)?Pn:Fe.current,l=pr(t,l));var v=n.getDerivedStateFromProps;(c=typeof v=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||h!==l)&&pc(t,s,r,l),qt=!1,h=t.memoizedState,s.state=h,Ti(t,r,s,o);var S=t.memoizedState;a!==d||h!==S||et.current||qt?(typeof v=="function"&&(Pa(t,n,v,r),S=t.memoizedState),(u=qt||fc(t,n,u,r,h,S,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,S,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,S,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=S),s.props=r,s.state=S,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return La(e,t,n,r,i,o)}function La(e,t,n,r,o,i){Yf(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return o&&oc(t,n,!1),Gt(e,t,i);r=t.stateNode,xy.current=t;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=mr(t,e.child,null,i),t.child=mr(t,null,a,i)):be(e,t,a,i),t.memoizedState=r.state,o&&oc(t,n,!0),t.child}function Gf(e){var t=e.stateNode;t.pendingContext?rc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&rc(e,t.context,!1),bl(e,t.containerInfo)}function wc(e,t,n,r,o){return hr(),Dl(o),t.flags|=256,be(e,t,n,r),t.child}var Oa={dehydrated:null,treeContext:null,retryLane:0};function $a(e){return{baseLanes:e,cachePool:null,transitions:null}}function Xf(e,t,n){var r=t.pendingProps,o=pe.current,i=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(o&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),se(pe,o&1),e===null)return ja(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,i?(r=t.mode,i=t.child,s={mode:"hidden",children:s},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=os(s,r,0,null),e=Tn(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=$a(n),t.memoizedState=Oa,e):Gl(t,s));if(o=e.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return ky(e,t,s,r,a,o,n);if(i){i=r.fallback,s=t.mode,o=e.child,a=o.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=fn(o,l),r.subtreeFlags=o.subtreeFlags&14680064),a!==null?i=fn(a,i):(i=Tn(i,s,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,s=e.child.memoizedState,s=s===null?$a(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=e.childLanes&~n,t.memoizedState=Oa,r}return i=e.child,e=i.sibling,r=fn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Gl(e,t){return t=os({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Xo(e,t,n,r){return r!==null&&Dl(r),mr(t,e.child,null,n),e=Gl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ky(e,t,n,r,o,i,s){if(n)return t.flags&256?(t.flags&=-257,r=Vs(Error($(422))),Xo(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,o=t.mode,r=os({mode:"visible",children:r.children},o,0,null),i=Tn(i,o,s,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&mr(t,e.child,null,s),t.child.memoizedState=$a(s),t.memoizedState=Oa,i);if(!(t.mode&1))return Xo(e,t,s,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error($(419)),r=Vs(i,r,void 0),Xo(e,t,s,r)}if(a=(s&e.childLanes)!==0,Ze||a){if(r=_e,r!==null){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|s)?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,Yt(e,o),jt(r,e,o,-1))}return tu(),r=Vs(Error($(421))),Xo(e,t,s,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=Dy.bind(null,e),o._reactRetry=t,null):(e=i.treeContext,it=ln(o.nextSibling),st=t,de=!0,_t=null,e!==null&&(ht[mt++]=Ht,ht[mt++]=Bt,ht[mt++]=Nn,Ht=e.id,Bt=e.overflow,Nn=t),t=Gl(t,r.children),t.flags|=4096,t)}function xc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ta(e.return,t,n)}function Hs(e,t,n,r,o){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function Jf(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(be(e,t,r.children,n),r=pe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&xc(e,n,t);else if(e.tag===19)xc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(se(pe,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Pi(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Hs(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Pi(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Hs(t,!0,n,null,i);break;case"together":Hs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ci(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Dn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error($(153));if(t.child!==null){for(e=t.child,n=fn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=fn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Iy(e,t,n){switch(t.tag){case 3:Gf(t),hr();break;case 5:If(t);break;case 1:tt(t.type)&&Ai(t);break;case 4:bl(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;se(zi,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(se(pe,pe.current&1),t.flags|=128,null):n&t.child.childLanes?Xf(e,t,n):(se(pe,pe.current&1),e=Gt(e,t,n),e!==null?e.sibling:null);se(pe,pe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Jf(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),se(pe,pe.current),r)break;return null;case 22:case 23:return t.lanes=0,Qf(e,t,n)}return Gt(e,t,n)}var Zf,Ua,qf,ep;Zf=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ua=function(){};qf=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,zn($t.current);var i=null;switch(n){case"input":o=aa(e,o),r=aa(e,r),i=[];break;case"select":o=me({},o,{value:void 0}),r=me({},r,{value:void 0}),i=[];break;case"textarea":o=ca(e,o),r=ca(e,r),i=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ci)}fa(n,r);var s;n=null;for(u in o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&o[u]!=null)if(u==="style"){var a=o[u];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ro.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=o!=null?o[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ro.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ae("scroll",e),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};ep=function(e,t,n,r){n!==r&&(t.flags|=4)};function Lr(e,t){if(!de)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Oe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Cy(e,t,n){var r=t.pendingProps;switch(Rl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oe(t),null;case 1:return tt(t.type)&&Ei(),Oe(t),null;case 3:return r=t.stateNode,yr(),le(et),le(Fe),Hl(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Yo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,_t!==null&&(Qa(_t),_t=null))),Ua(e,t),Oe(t),null;case 5:Vl(t);var o=zn(yo.current);if(n=t.type,e!==null&&t.stateNode!=null)qf(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error($(166));return Oe(t),null}if(e=zn($t.current),Yo(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Lt]=t,r[ho]=i,e=(t.mode&1)!==0,n){case"dialog":ae("cancel",r),ae("close",r);break;case"iframe":case"object":case"embed":ae("load",r);break;case"video":case"audio":for(o=0;o<Hr.length;o++)ae(Hr[o],r);break;case"source":ae("error",r);break;case"img":case"image":case"link":ae("error",r),ae("load",r);break;case"details":ae("toggle",r);break;case"input":ju(r,i),ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ae("invalid",r);break;case"textarea":Pu(r,i),ae("invalid",r)}fa(n,i),o=null;for(var s in i)if(i.hasOwnProperty(s)){var a=i[s];s==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Qo(r.textContent,a,e),o=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Qo(r.textContent,a,e),o=["children",""+a]):ro.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&ae("scroll",r)}switch(n){case"input":Uo(r),Tu(r,i,!0);break;case"textarea":Uo(r),Nu(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ci)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=_d(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[Lt]=t,e[ho]=r,Zf(e,t,!1,!1),t.stateNode=e;e:{switch(s=pa(n,r),n){case"dialog":ae("cancel",e),ae("close",e),o=r;break;case"iframe":case"object":case"embed":ae("load",e),o=r;break;case"video":case"audio":for(o=0;o<Hr.length;o++)ae(Hr[o],e);o=r;break;case"source":ae("error",e),o=r;break;case"img":case"image":case"link":ae("error",e),ae("load",e),o=r;break;case"details":ae("toggle",e),o=r;break;case"input":ju(e,r),o=aa(e,r),ae("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=me({},r,{value:void 0}),ae("invalid",e);break;case"textarea":Pu(e,r),o=ca(e,r),ae("invalid",e);break;default:o=r}fa(n,o),a=o;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?jd(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Md(e,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&oo(e,l):typeof l=="number"&&oo(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ro.hasOwnProperty(i)?l!=null&&i==="onScroll"&&ae("scroll",e):l!=null&&Sl(e,i,l,s))}switch(n){case"input":Uo(e),Tu(e,r,!1);break;case"textarea":Uo(e),Nu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+pn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?ir(e,!!r.multiple,i,!1):r.defaultValue!=null&&ir(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Ci)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Oe(t),null;case 6:if(e&&t.stateNode!=null)ep(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error($(166));if(n=zn(yo.current),zn($t.current),Yo(t)){if(r=t.stateNode,n=t.memoizedProps,r[Lt]=t,(i=r.nodeValue!==n)&&(e=st,e!==null))switch(e.tag){case 3:Qo(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Qo(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Lt]=t,t.stateNode=r}return Oe(t),null;case 13:if(le(pe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(de&&it!==null&&t.mode&1&&!(t.flags&128))vf(),hr(),t.flags|=98560,i=!1;else if(i=Yo(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error($(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[Lt]=t}else hr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Oe(t),i=!1}else _t!==null&&(Qa(_t),_t=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||pe.current&1?Ee===0&&(Ee=3):tu())),t.updateQueue!==null&&(t.flags|=4),Oe(t),null);case 4:return yr(),Ua(e,t),e===null&&fo(t.stateNode.containerInfo),Oe(t),null;case 10:return $l(t.type._context),Oe(t),null;case 17:return tt(t.type)&&Ei(),Oe(t),null;case 19:if(le(pe),i=t.memoizedState,i===null)return Oe(t),null;if(r=(t.flags&128)!==0,s=i.rendering,s===null)if(r)Lr(i,!1);else{if(Ee!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Pi(e),s!==null){for(t.flags|=128,Lr(i,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return se(pe,pe.current&1|2),t.child}e=e.sibling}i.tail!==null&&we()>vr&&(t.flags|=128,r=!0,Lr(i,!1),t.lanes=4194304)}else{if(!r)if(e=Pi(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Lr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!de)return Oe(t),null}else 2*we()-i.renderingStartTime>vr&&n!==1073741824&&(t.flags|=128,r=!0,Lr(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(n=i.last,n!==null?n.sibling=s:t.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=we(),t.sibling=null,n=pe.current,se(pe,r?n&1|2:n&1),t):(Oe(t),null);case 22:case 23:return eu(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ot&1073741824&&(Oe(t),t.subtreeFlags&6&&(t.flags|=8192)):Oe(t),null;case 24:return null;case 25:return null}throw Error($(156,t.tag))}function Ey(e,t){switch(Rl(t),t.tag){case 1:return tt(t.type)&&Ei(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return yr(),le(et),le(Fe),Hl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Vl(t),null;case 13:if(le(pe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error($(340));hr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return le(pe),null;case 4:return yr(),null;case 10:return $l(t.type._context),null;case 22:case 23:return eu(),null;case 24:return null;default:return null}}var Jo=!1,$e=!1,Ay=typeof WeakSet=="function"?WeakSet:Set,V=null;function tr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ge(e,t,r)}else n.current=null}function Fa(e,t,n){try{n()}catch(r){ge(e,t,r)}}var kc=!1;function _y(e,t){if(Ia=xi,e=of(),Pl(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,u=0,c=0,d=e,h=null;t:for(;;){for(var v;d!==n||o!==0&&d.nodeType!==3||(a=s+o),d!==i||r!==0&&d.nodeType!==3||(l=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(v=d.firstChild)!==null;)h=d,d=v;for(;;){if(d===e)break t;if(h===n&&++u===o&&(a=s),h===i&&++c===r&&(l=s),(v=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=v}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ca={focusedElem:e,selectionRange:n},xi=!1,V=t;V!==null;)if(t=V,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,V=e;else for(;V!==null;){t=V;try{var S=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var p=S.memoizedProps,x=S.memoizedState,m=t.stateNode,f=m.getSnapshotBeforeUpdate(t.elementType===t.type?p:Et(t.type,p),x);m.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(E){ge(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,V=e;break}V=t.return}return S=kc,kc=!1,S}function eo(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,i!==void 0&&Fa(t,n,i)}o=o.next}while(o!==r)}}function ns(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ba(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function tp(e){var t=e.alternate;t!==null&&(e.alternate=null,tp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Lt],delete t[ho],delete t[_a],delete t[uy],delete t[cy])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function np(e){return e.tag===5||e.tag===3||e.tag===4}function Ic(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||np(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Va(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ci));else if(r!==4&&(e=e.child,e!==null))for(Va(e,t,n),e=e.sibling;e!==null;)Va(e,t,n),e=e.sibling}function Ha(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Ha(e,t,n),e=e.sibling;e!==null;)Ha(e,t,n),e=e.sibling}var je=null,At=!1;function Jt(e,t,n){for(n=n.child;n!==null;)rp(e,t,n),n=n.sibling}function rp(e,t,n){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(Yi,n)}catch{}switch(n.tag){case 5:$e||tr(n,t);case 6:var r=je,o=At;je=null,Jt(e,t,n),je=r,At=o,je!==null&&(At?(e=je,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):je.removeChild(n.stateNode));break;case 18:je!==null&&(At?(e=je,n=n.stateNode,e.nodeType===8?Ls(e.parentNode,n):e.nodeType===1&&Ls(e,n),lo(e)):Ls(je,n.stateNode));break;case 4:r=je,o=At,je=n.stateNode.containerInfo,At=!0,Jt(e,t,n),je=r,At=o;break;case 0:case 11:case 14:case 15:if(!$e&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var i=o,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&Fa(n,t,s),o=o.next}while(o!==r)}Jt(e,t,n);break;case 1:if(!$e&&(tr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ge(n,t,a)}Jt(e,t,n);break;case 21:Jt(e,t,n);break;case 22:n.mode&1?($e=(r=$e)||n.memoizedState!==null,Jt(e,t,n),$e=r):Jt(e,t,n);break;default:Jt(e,t,n)}}function Cc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Ay),t.forEach(function(r){var o=Ly.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Ct(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var i=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 5:je=a.stateNode,At=!1;break e;case 3:je=a.stateNode.containerInfo,At=!0;break e;case 4:je=a.stateNode.containerInfo,At=!0;break e}a=a.return}if(je===null)throw Error($(160));rp(i,s,o),je=null,At=!1;var l=o.alternate;l!==null&&(l.return=null),o.return=null}catch(u){ge(o,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)op(t,e),t=t.sibling}function op(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ct(t,e),Rt(e),r&4){try{eo(3,e,e.return),ns(3,e)}catch(p){ge(e,e.return,p)}try{eo(5,e,e.return)}catch(p){ge(e,e.return,p)}}break;case 1:Ct(t,e),Rt(e),r&512&&n!==null&&tr(n,n.return);break;case 5:if(Ct(t,e),Rt(e),r&512&&n!==null&&tr(n,n.return),e.flags&32){var o=e.stateNode;try{oo(o,"")}catch(p){ge(e,e.return,p)}}if(r&4&&(o=e.stateNode,o!=null)){var i=e.memoizedProps,s=n!==null?n.memoizedProps:i,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Ed(o,i),pa(a,s);var u=pa(a,i);for(s=0;s<l.length;s+=2){var c=l[s],d=l[s+1];c==="style"?jd(o,d):c==="dangerouslySetInnerHTML"?Md(o,d):c==="children"?oo(o,d):Sl(o,c,d,u)}switch(a){case"input":la(o,i);break;case"textarea":Ad(o,i);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?ir(o,!!i.multiple,v,!1):h!==!!i.multiple&&(i.defaultValue!=null?ir(o,!!i.multiple,i.defaultValue,!0):ir(o,!!i.multiple,i.multiple?[]:"",!1))}o[ho]=i}catch(p){ge(e,e.return,p)}}break;case 6:if(Ct(t,e),Rt(e),r&4){if(e.stateNode===null)throw Error($(162));o=e.stateNode,i=e.memoizedProps;try{o.nodeValue=i}catch(p){ge(e,e.return,p)}}break;case 3:if(Ct(t,e),Rt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{lo(t.containerInfo)}catch(p){ge(e,e.return,p)}break;case 4:Ct(t,e),Rt(e);break;case 13:Ct(t,e),Rt(e),o=e.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(Zl=we())),r&4&&Cc(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?($e=(u=$e)||c,Ct(t,e),$e=u):Ct(t,e),Rt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(V=e,c=e.child;c!==null;){for(d=V=c;V!==null;){switch(h=V,v=h.child,h.tag){case 0:case 11:case 14:case 15:eo(4,h,h.return);break;case 1:tr(h,h.return);var S=h.stateNode;if(typeof S.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,S.props=t.memoizedProps,S.state=t.memoizedState,S.componentWillUnmount()}catch(p){ge(r,n,p)}}break;case 5:tr(h,h.return);break;case 22:if(h.memoizedState!==null){Ac(d);continue}}v!==null?(v.return=h,V=v):Ac(d)}c=c.sibling}e:for(c=null,d=e;;){if(d.tag===5){if(c===null){c=d;try{o=d.stateNode,u?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=zd("display",s))}catch(p){ge(e,e.return,p)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(p){ge(e,e.return,p)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ct(t,e),Rt(e),r&4&&Cc(e);break;case 21:break;default:Ct(t,e),Rt(e)}}function Rt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(np(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(oo(o,""),r.flags&=-33);var i=Ic(e);Ha(e,i,o);break;case 3:case 4:var s=r.stateNode.containerInfo,a=Ic(e);Va(e,a,s);break;default:throw Error($(161))}}catch(l){ge(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function My(e,t,n){V=e,ip(e)}function ip(e,t,n){for(var r=(e.mode&1)!==0;V!==null;){var o=V,i=o.child;if(o.tag===22&&r){var s=o.memoizedState!==null||Jo;if(!s){var a=o.alternate,l=a!==null&&a.memoizedState!==null||$e;a=Jo;var u=$e;if(Jo=s,($e=l)&&!u)for(V=o;V!==null;)s=V,l=s.child,s.tag===22&&s.memoizedState!==null?_c(o):l!==null?(l.return=s,V=l):_c(o);for(;i!==null;)V=i,ip(i),i=i.sibling;V=o,Jo=a,$e=u}Ec(e)}else o.subtreeFlags&8772&&i!==null?(i.return=o,V=i):Ec(e)}}function Ec(e){for(;V!==null;){var t=V;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:$e||ns(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!$e)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:Et(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&uc(t,i,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}uc(t,s,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&lo(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}$e||t.flags&512&&ba(t)}catch(h){ge(t,t.return,h)}}if(t===e){V=null;break}if(n=t.sibling,n!==null){n.return=t.return,V=n;break}V=t.return}}function Ac(e){for(;V!==null;){var t=V;if(t===e){V=null;break}var n=t.sibling;if(n!==null){n.return=t.return,V=n;break}V=t.return}}function _c(e){for(;V!==null;){var t=V;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ns(4,t)}catch(l){ge(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(l){ge(t,o,l)}}var i=t.return;try{ba(t)}catch(l){ge(t,i,l)}break;case 5:var s=t.return;try{ba(t)}catch(l){ge(t,s,l)}}}catch(l){ge(t,t.return,l)}if(t===e){V=null;break}var a=t.sibling;if(a!==null){a.return=t.return,V=a;break}V=t.return}}var zy=Math.ceil,Di=Xt.ReactCurrentDispatcher,Xl=Xt.ReactCurrentOwner,vt=Xt.ReactCurrentBatchConfig,Z=0,_e=null,ke=null,Te=0,ot=0,nr=yn(0),Ee=0,wo=null,Dn=0,rs=0,Jl=0,to=null,Xe=null,Zl=0,vr=1/0,bt=null,Li=!1,Ba=null,cn=null,Zo=!1,rn=null,Oi=0,no=0,Wa=null,di=-1,fi=0;function He(){return Z&6?we():di!==-1?di:di=we()}function dn(e){return e.mode&1?Z&2&&Te!==0?Te&-Te:fy.transition!==null?(fi===0&&(fi=Vd()),fi):(e=re,e!==0||(e=window.event,e=e===void 0?16:Gd(e.type)),e):1}function jt(e,t,n,r){if(50<no)throw no=0,Wa=null,Error($(185));Mo(e,n,r),(!(Z&2)||e!==_e)&&(e===_e&&(!(Z&2)&&(rs|=n),Ee===4&&tn(e,Te)),nt(e,r),n===1&&Z===0&&!(t.mode&1)&&(vr=we()+500,qi&&gn()))}function nt(e,t){var n=e.callbackNode;fm(e,t);var r=wi(e,e===_e?Te:0);if(r===0)n!==null&&Lu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Lu(n),t===1)e.tag===0?dy(Mc.bind(null,e)):mf(Mc.bind(null,e)),ay(function(){!(Z&6)&&gn()}),n=null;else{switch(Hd(r)){case 1:n=Cl;break;case 4:n=Fd;break;case 16:n=Si;break;case 536870912:n=bd;break;default:n=Si}n=pp(n,sp.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sp(e,t){if(di=-1,fi=0,Z&6)throw Error($(327));var n=e.callbackNode;if(cr()&&e.callbackNode!==n)return null;var r=wi(e,e===_e?Te:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=$i(e,r);else{t=r;var o=Z;Z|=2;var i=lp();(_e!==e||Te!==t)&&(bt=null,vr=we()+500,jn(e,t));do try{Py();break}catch(a){ap(e,a)}while(!0);Ol(),Di.current=i,Z=o,ke!==null?t=0:(_e=null,Te=0,t=Ee)}if(t!==0){if(t===2&&(o=va(e),o!==0&&(r=o,t=Ka(e,o))),t===1)throw n=wo,jn(e,0),tn(e,r),nt(e,we()),n;if(t===6)tn(e,r);else{if(o=e.current.alternate,!(r&30)&&!jy(o)&&(t=$i(e,r),t===2&&(i=va(e),i!==0&&(r=i,t=Ka(e,i))),t===1))throw n=wo,jn(e,0),tn(e,r),nt(e,we()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error($(345));case 2:Cn(e,Xe,bt);break;case 3:if(tn(e,r),(r&130023424)===r&&(t=Zl+500-we(),10<t)){if(wi(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){He(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Aa(Cn.bind(null,e,Xe,bt),t);break}Cn(e,Xe,bt);break;case 4:if(tn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var s=31-zt(r);i=1<<s,s=t[s],s>o&&(o=s),r&=~i}if(r=o,r=we()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*zy(r/1960))-r,10<r){e.timeoutHandle=Aa(Cn.bind(null,e,Xe,bt),r);break}Cn(e,Xe,bt);break;case 5:Cn(e,Xe,bt);break;default:throw Error($(329))}}}return nt(e,we()),e.callbackNode===n?sp.bind(null,e):null}function Ka(e,t){var n=to;return e.current.memoizedState.isDehydrated&&(jn(e,t).flags|=256),e=$i(e,t),e!==2&&(t=Xe,Xe=n,t!==null&&Qa(t)),e}function Qa(e){Xe===null?Xe=e:Xe.push.apply(Xe,e)}function jy(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!Tt(i(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function tn(e,t){for(t&=~Jl,t&=~rs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-zt(t),r=1<<n;e[n]=-1,t&=~r}}function Mc(e){if(Z&6)throw Error($(327));cr();var t=wi(e,0);if(!(t&1))return nt(e,we()),null;var n=$i(e,t);if(e.tag!==0&&n===2){var r=va(e);r!==0&&(t=r,n=Ka(e,r))}if(n===1)throw n=wo,jn(e,0),tn(e,t),nt(e,we()),n;if(n===6)throw Error($(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Cn(e,Xe,bt),nt(e,we()),null}function ql(e,t){var n=Z;Z|=1;try{return e(t)}finally{Z=n,Z===0&&(vr=we()+500,qi&&gn())}}function Ln(e){rn!==null&&rn.tag===0&&!(Z&6)&&cr();var t=Z;Z|=1;var n=vt.transition,r=re;try{if(vt.transition=null,re=1,e)return e()}finally{re=r,vt.transition=n,Z=t,!(Z&6)&&gn()}}function eu(){ot=nr.current,le(nr)}function jn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,sy(n)),ke!==null)for(n=ke.return;n!==null;){var r=n;switch(Rl(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ei();break;case 3:yr(),le(et),le(Fe),Hl();break;case 5:Vl(r);break;case 4:yr();break;case 13:le(pe);break;case 19:le(pe);break;case 10:$l(r.type._context);break;case 22:case 23:eu()}n=n.return}if(_e=e,ke=e=fn(e.current,null),Te=ot=t,Ee=0,wo=null,Jl=rs=Dn=0,Xe=to=null,Mn!==null){for(t=0;t<Mn.length;t++)if(n=Mn[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,i=n.pending;if(i!==null){var s=i.next;i.next=o,r.next=s}n.pending=r}Mn=null}return e}function ap(e,t){do{var n=ke;try{if(Ol(),li.current=Ri,Ni){for(var r=he.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Ni=!1}if(Rn=0,Ae=Ce=he=null,qr=!1,go=0,Xl.current=null,n===null||n.return===null){Ee=1,wo=t,ke=null;break}e:{var i=e,s=n.return,a=n,l=t;if(t=Te,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var v=mc(s);if(v!==null){v.flags&=-257,yc(v,s,a,i,t),v.mode&1&&hc(i,u,t),t=v,l=u;var S=t.updateQueue;if(S===null){var p=new Set;p.add(l),t.updateQueue=p}else S.add(l);break e}else{if(!(t&1)){hc(i,u,t),tu();break e}l=Error($(426))}}else if(de&&a.mode&1){var x=mc(s);if(x!==null){!(x.flags&65536)&&(x.flags|=256),yc(x,s,a,i,t),Dl(gr(l,a));break e}}i=l=gr(l,a),Ee!==4&&(Ee=2),to===null?to=[i]:to.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var m=Bf(i,l,t);lc(i,m);break e;case 1:a=l;var f=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof f.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(cn===null||!cn.has(g)))){i.flags|=65536,t&=-t,i.lanes|=t;var E=Wf(i,a,t);lc(i,E);break e}}i=i.return}while(i!==null)}cp(n)}catch(w){t=w,ke===n&&n!==null&&(ke=n=n.return);continue}break}while(!0)}function lp(){var e=Di.current;return Di.current=Ri,e===null?Ri:e}function tu(){(Ee===0||Ee===3||Ee===2)&&(Ee=4),_e===null||!(Dn&268435455)&&!(rs&268435455)||tn(_e,Te)}function $i(e,t){var n=Z;Z|=2;var r=lp();(_e!==e||Te!==t)&&(bt=null,jn(e,t));do try{Ty();break}catch(o){ap(e,o)}while(!0);if(Ol(),Z=n,Di.current=r,ke!==null)throw Error($(261));return _e=null,Te=0,Ee}function Ty(){for(;ke!==null;)up(ke)}function Py(){for(;ke!==null&&!rm();)up(ke)}function up(e){var t=fp(e.alternate,e,ot);e.memoizedProps=e.pendingProps,t===null?cp(e):ke=t,Xl.current=null}function cp(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Ey(n,t),n!==null){n.flags&=32767,ke=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ee=6,ke=null;return}}else if(n=Cy(n,t,ot),n!==null){ke=n;return}if(t=t.sibling,t!==null){ke=t;return}ke=t=e}while(t!==null);Ee===0&&(Ee=5)}function Cn(e,t,n){var r=re,o=vt.transition;try{vt.transition=null,re=1,Ny(e,t,n,r)}finally{vt.transition=o,re=r}return null}function Ny(e,t,n,r){do cr();while(rn!==null);if(Z&6)throw Error($(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error($(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(pm(e,i),e===_e&&(ke=_e=null,Te=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Zo||(Zo=!0,pp(Si,function(){return cr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=vt.transition,vt.transition=null;var s=re;re=1;var a=Z;Z|=4,Xl.current=null,_y(e,n),op(n,e),qm(Ca),xi=!!Ia,Ca=Ia=null,e.current=n,My(n),om(),Z=a,re=s,vt.transition=i}else e.current=n;if(Zo&&(Zo=!1,rn=e,Oi=o),i=e.pendingLanes,i===0&&(cn=null),am(n.stateNode),nt(e,we()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Li)throw Li=!1,e=Ba,Ba=null,e;return Oi&1&&e.tag!==0&&cr(),i=e.pendingLanes,i&1?e===Wa?no++:(no=0,Wa=e):no=0,gn(),null}function cr(){if(rn!==null){var e=Hd(Oi),t=vt.transition,n=re;try{if(vt.transition=null,re=16>e?16:e,rn===null)var r=!1;else{if(e=rn,rn=null,Oi=0,Z&6)throw Error($(331));var o=Z;for(Z|=4,V=e.current;V!==null;){var i=V,s=i.child;if(V.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(V=u;V!==null;){var c=V;switch(c.tag){case 0:case 11:case 15:eo(8,c,i)}var d=c.child;if(d!==null)d.return=c,V=d;else for(;V!==null;){c=V;var h=c.sibling,v=c.return;if(tp(c),c===u){V=null;break}if(h!==null){h.return=v,V=h;break}V=v}}}var S=i.alternate;if(S!==null){var p=S.child;if(p!==null){S.child=null;do{var x=p.sibling;p.sibling=null,p=x}while(p!==null)}}V=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,V=s;else e:for(;V!==null;){if(i=V,i.flags&2048)switch(i.tag){case 0:case 11:case 15:eo(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,V=m;break e}V=i.return}}var f=e.current;for(V=f;V!==null;){s=V;var g=s.child;if(s.subtreeFlags&2064&&g!==null)g.return=s,V=g;else e:for(s=f;V!==null;){if(a=V,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ns(9,a)}}catch(w){ge(a,a.return,w)}if(a===s){V=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,V=E;break e}V=a.return}}if(Z=o,gn(),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(Yi,e)}catch{}r=!0}return r}finally{re=n,vt.transition=t}}return!1}function zc(e,t,n){t=gr(n,t),t=Bf(e,t,1),e=un(e,t,1),t=He(),e!==null&&(Mo(e,1,t),nt(e,t))}function ge(e,t,n){if(e.tag===3)zc(e,e,n);else for(;t!==null;){if(t.tag===3){zc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(cn===null||!cn.has(r))){e=gr(n,e),e=Wf(t,e,1),t=un(t,e,1),e=He(),t!==null&&(Mo(t,1,e),nt(t,e));break}}t=t.return}}function Ry(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=He(),e.pingedLanes|=e.suspendedLanes&n,_e===e&&(Te&n)===n&&(Ee===4||Ee===3&&(Te&130023424)===Te&&500>we()-Zl?jn(e,0):Jl|=n),nt(e,t)}function dp(e,t){t===0&&(e.mode&1?(t=Vo,Vo<<=1,!(Vo&130023424)&&(Vo=4194304)):t=1);var n=He();e=Yt(e,t),e!==null&&(Mo(e,t,n),nt(e,n))}function Dy(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),dp(e,n)}function Ly(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(t),dp(e,n)}var fp;fp=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||et.current)Ze=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ze=!1,Iy(e,t,n);Ze=!!(e.flags&131072)}else Ze=!1,de&&t.flags&1048576&&yf(t,Mi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ci(e,t),e=t.pendingProps;var o=pr(t,Fe.current);ur(t,n),o=Wl(null,t,r,e,o,n);var i=Kl();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,tt(r)?(i=!0,Ai(t)):i=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Fl(t),o.updater=ts,t.stateNode=o,o._reactInternals=t,Na(t,r,e,n),t=La(null,t,r,!0,i,n)):(t.tag=0,de&&i&&Nl(t),be(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ci(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=$y(r),e=Et(r,e),o){case 0:t=Da(null,t,r,e,n);break e;case 1:t=Sc(null,t,r,e,n);break e;case 11:t=gc(null,t,r,e,n);break e;case 14:t=vc(null,t,r,Et(r.type,e),n);break e}throw Error($(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Et(r,o),Da(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Et(r,o),Sc(e,t,r,o,n);case 3:e:{if(Gf(t),e===null)throw Error($(387));r=t.pendingProps,i=t.memoizedState,o=i.element,kf(e,t),Ti(t,r,null,n);var s=t.memoizedState;if(r=s.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){o=gr(Error($(423)),t),t=wc(e,t,r,n,o);break e}else if(r!==o){o=gr(Error($(424)),t),t=wc(e,t,r,n,o);break e}else for(it=ln(t.stateNode.containerInfo.firstChild),st=t,de=!0,_t=null,n=wf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(hr(),r===o){t=Gt(e,t,n);break e}be(e,t,r,n)}t=t.child}return t;case 5:return If(t),e===null&&ja(t),r=t.type,o=t.pendingProps,i=e!==null?e.memoizedProps:null,s=o.children,Ea(r,o)?s=null:i!==null&&Ea(r,i)&&(t.flags|=32),Yf(e,t),be(e,t,s,n),t.child;case 6:return e===null&&ja(t),null;case 13:return Xf(e,t,n);case 4:return bl(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=mr(t,null,r,n):be(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Et(r,o),gc(e,t,r,o,n);case 7:return be(e,t,t.pendingProps,n),t.child;case 8:return be(e,t,t.pendingProps.children,n),t.child;case 12:return be(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,i=t.memoizedProps,s=o.value,se(zi,r._currentValue),r._currentValue=s,i!==null)if(Tt(i.value,s)){if(i.children===o.children&&!et.current){t=Gt(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){s=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Wt(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Ta(i.return,n,t),a.lanes|=n;break}l=l.next}}else if(i.tag===10)s=i.type===t.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error($(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Ta(s,n,t),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===t){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}be(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,ur(t,n),o=wt(o),r=r(o),t.flags|=1,be(e,t,r,n),t.child;case 14:return r=t.type,o=Et(r,t.pendingProps),o=Et(r.type,o),vc(e,t,r,o,n);case 15:return Kf(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Et(r,o),ci(e,t),t.tag=1,tt(r)?(e=!0,Ai(t)):e=!1,ur(t,n),Hf(t,r,o),Na(t,r,o,n),La(null,t,r,!0,e,n);case 19:return Jf(e,t,n);case 22:return Qf(e,t,n)}throw Error($(156,t.tag))};function pp(e,t){return Ud(e,t)}function Oy(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yt(e,t,n,r){return new Oy(e,t,n,r)}function nu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $y(e){if(typeof e=="function")return nu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===xl)return 11;if(e===kl)return 14}return 2}function fn(e,t){var n=e.alternate;return n===null?(n=yt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function pi(e,t,n,r,o,i){var s=2;if(r=e,typeof e=="function")nu(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Kn:return Tn(n.children,o,i,t);case wl:s=8,o|=8;break;case ra:return e=yt(12,n,t,o|2),e.elementType=ra,e.lanes=i,e;case oa:return e=yt(13,n,t,o),e.elementType=oa,e.lanes=i,e;case ia:return e=yt(19,n,t,o),e.elementType=ia,e.lanes=i,e;case kd:return os(n,o,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case wd:s=10;break e;case xd:s=9;break e;case xl:s=11;break e;case kl:s=14;break e;case Zt:s=16,r=null;break e}throw Error($(130,e==null?e:typeof e,""))}return t=yt(s,n,t,o),t.elementType=e,t.type=r,t.lanes=i,t}function Tn(e,t,n,r){return e=yt(7,e,r,t),e.lanes=n,e}function os(e,t,n,r){return e=yt(22,e,r,t),e.elementType=kd,e.lanes=n,e.stateNode={isHidden:!1},e}function Bs(e,t,n){return e=yt(6,e,null,t),e.lanes=n,e}function Ws(e,t,n){return t=yt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uy(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Es(0),this.expirationTimes=Es(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Es(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function ru(e,t,n,r,o,i,s,a,l){return e=new Uy(e,t,n,a,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=yt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fl(i),e}function Fy(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function hp(e){if(!e)return hn;e=e._reactInternals;e:{if(Fn(e)!==e||e.tag!==1)throw Error($(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(tt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error($(171))}if(e.tag===1){var n=e.type;if(tt(n))return hf(e,n,t)}return t}function mp(e,t,n,r,o,i,s,a,l){return e=ru(n,r,!0,e,o,i,s,a,l),e.context=hp(null),n=e.current,r=He(),o=dn(n),i=Wt(r,o),i.callback=t??null,un(n,i,o),e.current.lanes=o,Mo(e,o,r),nt(e,r),e}function is(e,t,n,r){var o=t.current,i=He(),s=dn(o);return n=hp(n),t.context===null?t.context=n:t.pendingContext=n,t=Wt(i,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=un(o,t,s),e!==null&&(jt(e,o,s,i),ai(e,o,s)),s}function Ui(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function jc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ou(e,t){jc(e,t),(e=e.alternate)&&jc(e,t)}function by(){return null}var yp=typeof reportError=="function"?reportError:function(e){console.error(e)};function iu(e){this._internalRoot=e}ss.prototype.render=iu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error($(409));is(e,t,null,null)};ss.prototype.unmount=iu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ln(function(){is(null,e,null,null)}),t[Qt]=null}};function ss(e){this._internalRoot=e}ss.prototype.unstable_scheduleHydration=function(e){if(e){var t=Kd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<en.length&&t!==0&&t<en[n].priority;n++);en.splice(n,0,e),n===0&&Yd(e)}};function su(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function as(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Tc(){}function Vy(e,t,n,r,o){if(o){if(typeof r=="function"){var i=r;r=function(){var u=Ui(s);i.call(u)}}var s=mp(t,r,e,0,null,!1,!1,"",Tc);return e._reactRootContainer=s,e[Qt]=s.current,fo(e.nodeType===8?e.parentNode:e),Ln(),s}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var a=r;r=function(){var u=Ui(l);a.call(u)}}var l=ru(e,0,!1,null,null,!1,!1,"",Tc);return e._reactRootContainer=l,e[Qt]=l.current,fo(e.nodeType===8?e.parentNode:e),Ln(function(){is(t,l,n,r)}),l}function ls(e,t,n,r,o){var i=n._reactRootContainer;if(i){var s=i;if(typeof o=="function"){var a=o;o=function(){var l=Ui(s);a.call(l)}}is(t,s,e,o)}else s=Vy(n,t,e,o,r);return Ui(s)}Bd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Vr(t.pendingLanes);n!==0&&(El(t,n|1),nt(t,we()),!(Z&6)&&(vr=we()+500,gn()))}break;case 13:Ln(function(){var r=Yt(e,1);if(r!==null){var o=He();jt(r,e,1,o)}}),ou(e,1)}};Al=function(e){if(e.tag===13){var t=Yt(e,134217728);if(t!==null){var n=He();jt(t,e,134217728,n)}ou(e,134217728)}};Wd=function(e){if(e.tag===13){var t=dn(e),n=Yt(e,t);if(n!==null){var r=He();jt(n,e,t,r)}ou(e,t)}};Kd=function(){return re};Qd=function(e,t){var n=re;try{return re=e,t()}finally{re=n}};ma=function(e,t,n){switch(t){case"input":if(la(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=Zi(r);if(!o)throw Error($(90));Cd(r),la(r,o)}}}break;case"textarea":Ad(e,n);break;case"select":t=n.value,t!=null&&ir(e,!!n.multiple,t,!1)}};Nd=ql;Rd=Ln;var Hy={usingClientEntryPoint:!1,Events:[jo,Xn,Zi,Td,Pd,ql]},Or={findFiberByHostInstance:_n,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},By={bundleType:Or.bundleType,version:Or.version,rendererPackageName:Or.rendererPackageName,rendererConfig:Or.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Od(e),e===null?null:e.stateNode},findFiberByHostInstance:Or.findFiberByHostInstance||by,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qo.isDisabled&&qo.supportsFiber)try{Yi=qo.inject(By),Ot=qo}catch{}}dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hy;dt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!su(t))throw Error($(200));return Fy(e,t,null,n)};dt.createRoot=function(e,t){if(!su(e))throw Error($(299));var n=!1,r="",o=yp;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=ru(e,1,!1,null,null,n,!1,r,o),e[Qt]=t.current,fo(e.nodeType===8?e.parentNode:e),new iu(t)};dt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error($(188)):(e=Object.keys(e).join(","),Error($(268,e)));return e=Od(t),e=e===null?null:e.stateNode,e};dt.flushSync=function(e){return Ln(e)};dt.hydrate=function(e,t,n){if(!as(t))throw Error($(200));return ls(null,e,t,!0,n)};dt.hydrateRoot=function(e,t,n){if(!su(e))throw Error($(405));var r=n!=null&&n.hydratedSources||null,o=!1,i="",s=yp;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=mp(t,null,e,1,n??null,o,!1,i,s),e[Qt]=t.current,fo(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new ss(t)};dt.render=function(e,t,n){if(!as(t))throw Error($(200));return ls(null,e,t,!1,n)};dt.unmountComponentAtNode=function(e){if(!as(e))throw Error($(40));return e._reactRootContainer?(Ln(function(){ls(null,null,e,!1,function(){e._reactRootContainer=null,e[Qt]=null})}),!0):!1};dt.unstable_batchedUpdates=ql;dt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!as(n))throw Error($(200));if(e==null||e._reactInternals===void 0)throw Error($(38));return ls(e,t,n,!1,r)};dt.version="18.3.1-next-f1338f8080-20240426";function gp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gp)}catch(e){console.error(e)}}gp(),yd.exports=dt;var Sr=yd.exports,vp,Pc=Sr;vp=Pc.createRoot,Pc.hydrateRoot;var Sp=(e=>(e[e.CRITICAL=1e3]="CRITICAL",e[e.HIGH=800]="HIGH",e[e.NORMAL=500]="NORMAL",e[e.LOW=200]="LOW",e[e.BACKGROUND=100]="BACKGROUND",e))(Sp||{});const oe={LEAD:"LEAD",FOLLOW:"FOLLOW",SELF:"SELF"};class Wy{constructor(t={}){this.plugins=new Map,this.validators=new Map,this.actionHandlers=new Map,this.menuActionsByType=new Map,this.options={...t},t.defaultValidators&&(this.validators=new Map(Object.entries(t.defaultValidators)))}registerPlugin(t){this.plugins.set(t.id,t),t.onRegister&&t.onRegister()}unregisterPlugin(t){const n=this.plugins.get(t);n!=null&&n.onUnregister&&n.onUnregister(),this.plugins.delete(t)}registerValidator(t,n){const r=this.validators.get(t)||[];this.validators.set(t,[...r,n])}unregisterValidators(t){this.validators.delete(t)}registerActionHandler(t,n,r){if(this.actionHandlers.set(t,{handler:n,metadata:r}),r!=null&&r.menuType){const o=this.menuActionsByType.get(r.menuType)||new Set;o.add(t),this.menuActionsByType.set(r.menuType,o)}}unregisterActionHandler(t){var r;const n=this.actionHandlers.get(t);if((r=n==null?void 0:n.metadata)!=null&&r.menuType){const o=this.menuActionsByType.get(n.metadata.menuType);o&&(o.delete(t),o.size===0&&this.menuActionsByType.delete(n.metadata.menuType))}this.actionHandlers.delete(t)}validateAction(t){const n=this.validators.get(t.type)||[];for(const r of n){const o=r(t);if(!o.valid)return o}return{valid:!0}}handleAction(t){const n=this.validateAction(t);if(!n.valid){console.warn(`Invalid action: ${n.message}`);return}const r=Array.from(this.plugins.values()).sort((o,i)=>i.priority-o.priority);for(const o of r)if(o.actionTypes===null||o.actionTypes.includes(t.type))try{o.handler(t)}catch(i){console.error(`Error in plugin ${o.id}:`,i)}}executeAction(t,n){const r=this.actionHandlers.get(t);return r!=null&&r.handler?(r.handler(n),!0):!1}getMenuActions(t){const n=this.menuActionsByType.get(t)||new Set;return Array.from(n).map(r=>{const o=this.actionHandlers.get(r);return o?{id:r,...o}:null}).filter(r=>r!==null&&r.metadata!==void 0).sort((r,o)=>(r.order||0)-(o.order||0))}}const Q=new Wy,Ky={initialize:e=>{e.areas.types.forEach(t=>{}),e.actions.plugins.forEach(t=>{Q.registerPlugin(t)}),e.actions.validators.forEach(({actionType:t,validator:n})=>{Q.registerValidator(t,n)}),e.contextMenu.actions.forEach(t=>{})},cleanup:()=>{}},Nc=e=>{let t;const n=new Set,r=(u,c)=>{const d=typeof u=="function"?u(t):u;if(!Object.is(d,t)){const h=t;t=c??(typeof d!="object"||d===null)?d:Object.assign({},t,d),n.forEach(v=>v(t,h))}},o=()=>t,a={setState:r,getState:o,getInitialState:()=>l,subscribe:u=>(n.add(u),()=>n.delete(u))},l=t=e(r,o,a);return a},Qy=e=>e?Nc(e):Nc,Yy=e=>e;function Gy(e,t=Yy){const n=at.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return at.useDebugValue(n),n}const Xy=e=>{const t=Qy(e),n=r=>Gy(t,r);return Object.assign(n,t),n},au=e=>Xy;var wp=Symbol.for("immer-nothing"),Rc=Symbol.for("immer-draftable"),ut=Symbol.for("immer-state");function Mt(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var wr=Object.getPrototypeOf;function xr(e){return!!e&&!!e[ut]}function On(e){var t;return e?xp(e)||Array.isArray(e)||!!e[Rc]||!!((t=e.constructor)!=null&&t[Rc])||cs(e)||ds(e):!1}var Jy=Object.prototype.constructor.toString();function xp(e){if(!e||typeof e!="object")return!1;const t=wr(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Jy}function Fi(e,t){us(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function us(e){const t=e[ut];return t?t.type_:Array.isArray(e)?1:cs(e)?2:ds(e)?3:0}function Ya(e,t){return us(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function kp(e,t,n){const r=us(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Zy(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function cs(e){return e instanceof Map}function ds(e){return e instanceof Set}function En(e){return e.copy_||e.base_}function Ga(e,t){if(cs(e))return new Map(e);if(ds(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=xp(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[ut];let o=Reflect.ownKeys(r);for(let i=0;i<o.length;i++){const s=o[i],a=r[s];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[s]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[s]})}return Object.create(wr(e),r)}else{const r=wr(e);if(r!==null&&n)return{...e};const o=Object.create(r);return Object.assign(o,e)}}function lu(e,t=!1){return fs(e)||xr(e)||!On(e)||(us(e)>1&&(e.set=e.add=e.clear=e.delete=qy),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>lu(r,!0))),e}function qy(){Mt(2)}function fs(e){return Object.isFrozen(e)}var eg={};function $n(e){const t=eg[e];return t||Mt(0,e),t}var xo;function Ip(){return xo}function tg(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Dc(e,t){t&&($n("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Xa(e){Ja(e),e.drafts_.forEach(ng),e.drafts_=null}function Ja(e){e===xo&&(xo=e.parent_)}function Lc(e){return xo=tg(xo,e)}function ng(e){const t=e[ut];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Oc(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[ut].modified_&&(Xa(t),Mt(4)),On(e)&&(e=bi(t,e),t.parent_||Vi(t,e)),t.patches_&&$n("Patches").generateReplacementPatches_(n[ut].base_,e,t.patches_,t.inversePatches_)):e=bi(t,n,[]),Xa(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==wp?e:void 0}function bi(e,t,n){if(fs(t))return t;const r=t[ut];if(!r)return Fi(t,(o,i)=>$c(e,r,t,o,i,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Vi(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const o=r.copy_;let i=o,s=!1;r.type_===3&&(i=new Set(o),o.clear(),s=!0),Fi(i,(a,l)=>$c(e,r,o,a,l,n,s)),Vi(e,o,!1),n&&e.patches_&&$n("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function $c(e,t,n,r,o,i,s){if(xr(o)){const a=i&&t&&t.type_!==3&&!Ya(t.assigned_,r)?i.concat(r):void 0,l=bi(e,o,a);if(kp(n,r,l),xr(l))e.canAutoFreeze_=!1;else return}else s&&n.add(o);if(On(o)&&!fs(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;bi(e,o),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Vi(e,o)}}function Vi(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&lu(t,n)}function rg(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Ip(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=r,i=uu;n&&(o=[r],i=ko);const{revoke:s,proxy:a}=Proxy.revocable(o,i);return r.draft_=a,r.revoke_=s,a}var uu={get(e,t){if(t===ut)return e;const n=En(e);if(!Ya(n,t))return og(e,n,t);const r=n[t];return e.finalized_||!On(r)?r:r===Ks(e.base_,t)?(Qs(e),e.copy_[t]=qa(r,e)):r},has(e,t){return t in En(e)},ownKeys(e){return Reflect.ownKeys(En(e))},set(e,t,n){const r=Cp(En(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const o=Ks(En(e),t),i=o==null?void 0:o[ut];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Zy(n,o)&&(n!==void 0||Ya(e.base_,t)))return!0;Qs(e),Za(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Ks(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Qs(e),Za(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=En(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Mt(11)},getPrototypeOf(e){return wr(e.base_)},setPrototypeOf(){Mt(12)}},ko={};Fi(uu,(e,t)=>{ko[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});ko.deleteProperty=function(e,t){return ko.set.call(this,e,t,void 0)};ko.set=function(e,t,n){return uu.set.call(this,e[0],t,n,e[0])};function Ks(e,t){const n=e[ut];return(n?En(n):e)[t]}function og(e,t,n){var o;const r=Cp(t,n);return r?"value"in r?r.value:(o=r.get)==null?void 0:o.call(e.draft_):void 0}function Cp(e,t){if(!(t in e))return;let n=wr(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=wr(n)}}function Za(e){e.modified_||(e.modified_=!0,e.parent_&&Za(e.parent_))}function Qs(e){e.copy_||(e.copy_=Ga(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var ig=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const i=n;n=t;const s=this;return function(l=i,...u){return s.produce(l,c=>n.call(this,c,...u))}}typeof n!="function"&&Mt(6),r!==void 0&&typeof r!="function"&&Mt(7);let o;if(On(t)){const i=Lc(this),s=qa(t,void 0);let a=!0;try{o=n(s),a=!1}finally{a?Xa(i):Ja(i)}return Dc(i,r),Oc(o,i)}else if(!t||typeof t!="object"){if(o=n(t),o===void 0&&(o=t),o===wp&&(o=void 0),this.autoFreeze_&&lu(o,!0),r){const i=[],s=[];$n("Patches").generateReplacementPatches_(t,o,i,s),r(i,s)}return o}else Mt(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(s,...a)=>this.produceWithPatches(s,l=>t(l,...a));let r,o;return[this.produce(t,n,(s,a)=>{r=s,o=a}),r,o]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){On(e)||Mt(8),xr(e)&&(e=sg(e));const t=Lc(this),n=qa(e,void 0);return n[ut].isManual_=!0,Ja(t),n}finishDraft(e,t){const n=e&&e[ut];(!n||!n.isManual_)&&Mt(9);const{scope_:r}=n;return Dc(r,t),Oc(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const o=t[n];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}n>-1&&(t=t.slice(n+1));const r=$n("Patches").applyPatches_;return xr(e)?r(e,t):this.produce(e,o=>r(o,t))}};function qa(e,t){const n=cs(e)?$n("MapSet").proxyMap_(e,t):ds(e)?$n("MapSet").proxySet_(e,t):rg(e,t);return(t?t.scope_:Ip()).drafts_.push(n),n}function sg(e){return xr(e)||Mt(10,e),Ep(e)}function Ep(e){if(!On(e)||fs(e))return e;const t=e[ut];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Ga(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Ga(e,!0);return Fi(n,(r,o)=>{kp(n,r,Ep(o))}),t&&(t.finalized_=!1),n}var ct=new ig,ag=ct.produce;ct.produceWithPatches.bind(ct);ct.setAutoFreeze.bind(ct);ct.setUseStrictShallowCopy.bind(ct);ct.applyPatches.bind(ct);ct.createDraft.bind(ct);ct.finishDraft.bind(ct);const lg=e=>(t,n,r)=>(r.setState=(o,i,...s)=>{const a=typeof o=="function"?ag(o):o;return t(a,i,...s)},e(r.setState,n,r)),cu=lg,ei=5,gt=30,Hi=32,ug=.25;let Hn=null,Ys=0,Gs=0,Bn=0;const cg=500,Io=()=>{var i,s;const e={top:0,left:0,height:Math.floor(((i=window.document.querySelector(".area-root"))==null?void 0:i.getBoundingClientRect().height)||0),width:Math.floor(((s=window.document.querySelector(".area-root"))==null?void 0:s.getBoundingClientRect().width)||0)},t=Date.now();if(window.__AREA_RESIZING__){if(Bn||(Bn=t,Hn||(Hn={...e},Ys=e.width,Gs=e.height)),Hn)return Hn}else Bn&&t-Bn>cg&&(Bn=0);const n=Math.abs(e.width-Ys),r=Math.abs(e.height-Gs),o=n>5||r>5;return!window.__AREA_RESIZING__&&o&&!Bn&&(Hn={...e},Ys=e.width,Gs=e.height),Hn||e},el=(e,t,n)=>e*(1-n)+t*n,Ap=(e,t,n)=>Math.min(t,Math.max(e,n)),rt=e=>e instanceof ve?e:typeof e.left=="number"?new ve(e.left,e.top):new ve(e.x,e.y),ne=class ne{static new(t,n){return typeof t=="number"?new ne(t,n):typeof t.left=="number"?new ne(t.left,t.top):new ne(t.x,t.y)}static fromEvent(t){return new ne(t.clientX,t.clientY)}static dot(t,n){const r=rt(t),o=rt(n);return r.x*o.x+r.y*o.y}constructor(t,n){typeof t=="number"?(this._x=t,this._y=n):(this._x=t.x,this._y=t.y),this.atOrigin=this.x===0&&this.y===0,this.apply=this.apply.bind(this)}set x(t){this._x=t,this.atOrigin=this.x===0&&this.y===0}get x(){return this._x}set y(t){this._y=t,this.atOrigin=this.x===0&&this.y===0}get y(){return this._y}add(t){const n=rt(t);return n.atOrigin?this:new ne(this.x+n.x,this.y+n.y)}addX(t){return new ne(this.x+t,this.y)}addY(t){return new ne(this.x,this.y+t)}sub(t){const n=rt(t);return n.atOrigin?this:new ne(this.x-n.x,this.y-n.y)}subX(t){return new ne(this.x-t,this.y)}subY(t){return new ne(this.x,this.y-t)}subXY(t,n){return new ne(this.x-t,this.y-n)}scale(t,n=ne.new(0,0)){if(t===1)return this;const r=rt(n);return new ne(r.x+(this.x-r.x)*t,r.y+(this.y-r.y)*t)}scaleX(t,n=ne.new(0,0)){if(t===1)return this;const r=rt(n);return new ne(r.x+(this.x-r.x)*t,this.y)}scaleY(t,n=ne.new(0,0)){if(t===1)return this;const r=rt(n);return new ne(this.x,r.y+(this.y-r.y)*t)}scaleXY(t,n,r=ne.new(0,0)){if(t===1&&n===1)return this;const o=rt(r);return new ne(o.x+(this.x-o.x)*t,o.y+(this.y-o.y)*n)}rotate(t,n=ne.new(0,0)){if(t===0)return this;const r=rt(n),o=this.x-r.x,i=this.y-r.y,s=Math.cos(t),a=Math.sin(t),l=o*s-i*a,u=o*a+i*s;return new ne(l+r.x,u+r.y)}multiplyMat2(t,n=ne.new(0,0)){const r=rt(n);return t.multiplyVec2(this.sub(r)).add(r)}copy(){return new ne(this.x,this.y)}lerp(t,n){const r=rt(t);return new ne(el(this.x,r.x,n),el(this.y,r.y,n))}round(){return ne.new(Math.round(this.x),Math.round(this.y))}apply(t){return rt(t(this))}length(){return Math.hypot(this.x,this.y)}eq(t){const n=rt(t);return n.x===this.x&&n.y===this.y}toJSON(){return{x:this.x,y:this.y,__objectType:"vec2"}}};ne.ORIGIN=ne.new(0,0);let ve=ne;const dg=at.createContext(""),fg=(e,t)=>{const n={};if(t[e].type==="area")return{};function o(i){const s=t[i];if(s.type==="area")return{width:1,height:1};const a={height:0,width:0},l=s.areas.map(u=>o(u.id));return s.orientation==="horizontal"?(a.width=l.reduce((u,c)=>u+c.width,0),a.height=Math.max(...l.map(u=>u.height))):(a.height=l.reduce((u,c)=>u+c.height,0),a.width=Math.max(...l.map(u=>u.width))),n[i]=a,a}return n[e]=o(e),n};function An(e,t){const n={};if(!e)return console.error("computeAreaToParentRow received null or undefined layout."),{};const r=Object.keys(e);for(let o=0;o<r.length;o+=1){const i=e[r[o]];if(!i||i.type!=="area_row")continue;const s=i;if(s.areas&&Array.isArray(s.areas))for(let a=0;a<s.areas.length;a+=1)s.areas[a]&&s.areas[a].id&&(n[s.areas[a].id]=s.id)}return n}const rr={lastCalculation:0,totalCalculations:0,failedIds:new Set,reportedProblems:new Set,reset(){this.failedIds.clear(),this.reportedProblems.clear()}};setInterval(()=>{Date.now()-rr.lastCalculation>6e4&&rr.reset()},6e4);let $r={width:0,height:0};const kr=(e,t,n)=>{if(Math.random().toString(36).substring(2,7),!t)return{};const r=JSON.parse(JSON.stringify(e));if(rr.lastCalculation=Date.now(),rr.totalCalculations++,!n||n.width<=0||n.height<=0)if(console.error("Invalid viewport dimensions",n),$r.width>0&&$r.height>0)console.warn("Using last valid viewport dimensions"),n={...n,width:$r.width,height:$r.height};else return{};else $r={width:n.width,height:n.height};if(!e||Object.keys(e).length===0)return console.error("Empty layout provided to computeAreaToViewport"),{};if(!t||!r[t])return console.error(`Invalid rootId: ${t} - not found in layout`,e),{};const o={},i=new Set,s=rr.reportedProblems;Object.entries(r).forEach(([d,h])=>{h?h.type==="area_row"&&(!h.areas||!Array.isArray(h.areas))&&console.error(`Area row ${d} has invalid areas property`,h):console.error(`Invalid area definition for id ${d}`,h)});function a(d,h){if(!d||!h){console.error("Invalid area or contentArea in computeArea",{area:d,contentArea:h});return}if(!i.has(d.id)){if(d.type||(console.warn(`Area ${d.id} has no type, defaulting to 'area'`),d.type="area"),h.width<=0||h.height<=0){console.warn(`Area ${d.id} has invalid content area size: ${h.width}x${h.height}`);return}i.add(d.id),o[d.id]={...h}}}function l(d,h){if(!d||!h||i.has(d.id)){if(d&&i.has(d.id))return;if(!d){console.error("computeRow: Invalid row");return}if(!h){console.error("computeRow: Invalid contentArea for row",d.id);return}}if(i.add(d.id),(!d.areas||!Array.isArray(d.areas))&&(console.error("Row without proper areas array in computeRow",{rowId:d.id,areas:d.areas}),d.areas=[]),(h.width<=0||h.height<=0)&&(console.error("ContentArea with invalid dimensions in computeRow",{rowId:d.id,contentArea:h}),h={...h,width:Math.max(h.width,10),height:Math.max(h.height,10)},console.warn("Corrected contentArea to minimum size for row",d.id,h)),d.areas.length===0){console.warn("Row with empty areas array in computeRow, skipping children but assigning viewport",{rowId:d.id}),o[d.id]={...h};return}o[d.id]={...h};const v=d.areas.map(y=>y.id).filter(y=>!r[y]);v.length>0&&v.forEach(y=>{s.has(`auto_creating_${y}`)||(console.warn(`Auto-creating area ${y} referenced in row ${d.id}`),s.add(`auto_creating_${y}`)),r[y]={type:"area",id:y}});const S=.05;let p=0;d.areas.forEach((y,C)=>{y.size>1&&(y.size=y.size/100),typeof y.size!="number"||isNaN(y.size)||y.size<=0?(y.size===0&&p++,s.has(`${d.id}_${C}_size`)||(console.warn(`Invalid size for area ${y.id}: ${y.size}, defaulting to 1/${d.areas.length}`),s.add(`${d.id}_${C}_size`)),y.size=1/d.areas.length):y.size<S&&(s.has(`${d.id}_${C}_min_size`)||(console.warn(`Area ${y.id} has very small size: ${y.size}, setting to minimum ${S}`),s.add(`${d.id}_${C}_min_size`)),y.size=S)});const x=d.areas.reduce((y,C)=>y+(C.size||0),0);if(x===0||p===d.areas.length){console.warn(`All areas in row ${d.id} have zero size, setting equal distribution`);const y=1/d.areas.length;d.areas.forEach(C=>{C.size=y})}else if(Math.abs(x-1)>.001){const y=1/x;d.areas.forEach(C=>{C.size=C.size*y})}const m=d.areas.reduce((y,C)=>y+(C.size||0),0);if(Math.abs(m-1)>.001){console.error(`Failed to normalize sizes in row ${d.id}: final total=${m}`);const y=1/d.areas.length;d.areas.forEach(C=>{C.size=y})}let f=h.left,g=h.top,E=0,w=0;for(let y=0;y<d.areas.length;y++){const C=d.areas[y];if(!C||!C.id)continue;const z=C.id,I=r[z],_=y===d.areas.length-1;if(!I)continue;let R,M;d.orientation==="horizontal"?(M=h.height,_?R=Math.max(0,h.width-E):(R=Math.max(0,Math.floor(C.size*h.width)),E+=R)):(R=h.width,_?M=Math.max(0,h.height-w):(M=Math.max(0,Math.floor(C.size*h.height)),w+=M));const T={left:f,top:g,width:R,height:M};try{I.type==="area"?a(I,T):I.type==="area_row"&&l(I,T)}catch(N){console.error(`[computeRow RECURSE_ERROR ${y}] Error computing viewport for area ${z}:`,N)}d.orientation==="horizontal"?f+=R:g+=M}}const u=r[t];u.type==="area"?a(u,n):u.type==="area_row"&&l(u,n);const c=Object.keys(r).filter(d=>!o[d]);return c.length>0&&c.forEach(d=>{o[d]||(rr.failedIds.add(d),o[d]={left:0,top:0,width:100,height:100})}),o},_p=(e,t,n,r)=>{const o=r?ve.new(e.x+r.x/15,e.y+r.y/15):e;let i,s,a=1/0,l;return Object.entries(n).forEach(([u,c])=>{const d=t.layout[u];if(!d||d.type!=="area"&&!(d.type==="area_row"&&d.orientation==="stack"))return;if(o.x>=c.left&&o.x<=c.left+c.width&&o.y>=c.top&&o.y<=c.top+c.height){d.type==="area_row"&&d.orientation==="stack"?i=u:d.type==="area"&&(s=u);return}const v=Math.abs(o.x-c.left),S=Math.abs(o.x-(c.left+c.width)),p=Math.abs(o.y-c.top),x=Math.abs(o.y-(c.top+c.height)),m=Math.min(v,S,p,x);m<a&&(a=m,l=u)}),i||s||l};function Mp(e,t){const n=t.x-e.left,r=t.y-e.top,o=n,i=e.width-n,s=r,a=e.height-r,l=e.width/2,u=e.height/2,c=Math.abs(n-l),d=Math.abs(r-u),h=e.width*.3,v=e.height*.3;if(c<h&&d<v)return"stack";const S=Math.min(o,i,s,a);let p;return S===o?p="left":S===i?p="right":S===s?p="top":p="bottom",p}const pg=(e,t,n)=>{const r=t,o=r+n;if(r<0||r>=e.areas.length||o<0||o>=e.areas.length)throw new Error(`Invalid indices: source=${r}, target=${o}, length=${e.areas.length}, direction=${n===-1?"west":"east"}`);const i=e.areas[r],s=e.areas[o];if(!i||!s)throw new Error(`Missing areas: source=${i}, target=${s}`);const a=i.size||1,l=s.size||1,u=a+l;if(e.areas.length===2)return{area:{type:"area",id:i.id},removedAreaId:s.id};const c=[...e.areas];return c[o]={id:i.id,size:u},c.splice(r,1),{area:{...e,areas:c},removedAreaId:s.id}},hg=e=>{const t=[];return e.id||t.push("Missing ID"),e.type||t.push("Missing type"),e.state||t.push("Missing state"),{isValid:t.length===0,errors:t}},Xs=e=>{const t=[];return typeof e.x!="number"&&t.push("Position X must be a number"),typeof e.y!="number"&&t.push("Position Y must be a number"),isNaN(e.x)&&t.push("Position X is NaN"),isNaN(e.y)&&t.push("Position Y is NaN"),{isValid:t.length===0,errors:t}},Uc=e=>{const t=[];return e.id||t.push("Missing ID"),e.label||t.push("Missing label"),e.actionId||t.push("Missing actionId"),{isValid:t.length===0,errors:t}},Fc={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Co=new Map,ti=e=>{const t=Co.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([n,r])=>[n,r.getState()])):{}},mg=(e,t,n)=>{if(e===void 0)return{type:"untracked",connection:t.connect(n)};const r=Co.get(n.name);if(r)return{type:"tracked",store:e,...r};const o={connection:t.connect(n),stores:{}};return Co.set(n.name,o),{type:"tracked",store:e,...o}},yg=(e,t)=>{if(t===void 0)return;const n=Co.get(e);n&&(delete n.stores[t],Object.keys(n.stores).length===0&&Co.delete(e))},gg=e=>{var t,n;if(!e)return;const r=e.split(`
`),o=r.findIndex(s=>s.includes("api.setState"));if(o<0)return;const i=((t=r[o+1])==null?void 0:t.trim())||"";return(n=/.+ (.+) .+/.exec(i))==null?void 0:n[1]},vg=(e,t={})=>(n,r,o)=>{const{enabled:i,anonymousActionType:s,store:a,...l}=t;let u;try{u=(i??(Fc?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return e(n,r,o);const{connection:c,...d}=mg(a,u,l);let h=!0;o.setState=(p,x,m)=>{const f=n(p,x);if(!h)return f;const g=gg(new Error().stack),E=m===void 0?{type:s||g||"anonymous"}:typeof m=="string"?{type:m}:m;return a===void 0?(c==null||c.send(E,r()),f):(c==null||c.send({...E,type:`${a}/${E.type}`},{...ti(l.name),[a]:o.getState()}),f)},o.devtools={cleanup:()=>{c&&typeof c.unsubscribe=="function"&&c.unsubscribe(),yg(l.name,a)}};const v=(...p)=>{const x=h;h=!1,n(...p),h=x},S=e(o.setState,r,o);if(d.type==="untracked"?c==null||c.init(S):(d.stores[d.store]=o,c==null||c.init(Object.fromEntries(Object.entries(d.stores).map(([p,x])=>[p,p===d.store?S:x.getState()])))),o.dispatchFromDevtools&&typeof o.dispatch=="function"){let p=!1;const x=o.dispatch;o.dispatch=(...m)=>{(Fc?"production":void 0)!=="production"&&m[0].type==="__setState"&&!p&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),p=!0),x(...m)}}return c.subscribe(p=>{var x;switch(p.type){case"ACTION":if(typeof p.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return Js(p.payload,m=>{if(m.type==="__setState"){if(a===void 0){v(m.state);return}Object.keys(m.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const f=m.state[a];if(f==null)return;JSON.stringify(o.getState())!==JSON.stringify(f)&&v(f);return}o.dispatchFromDevtools&&typeof o.dispatch=="function"&&o.dispatch(m)});case"DISPATCH":switch(p.payload.type){case"RESET":return v(S),a===void 0?c==null?void 0:c.init(o.getState()):c==null?void 0:c.init(ti(l.name));case"COMMIT":if(a===void 0){c==null||c.init(o.getState());return}return c==null?void 0:c.init(ti(l.name));case"ROLLBACK":return Js(p.state,m=>{if(a===void 0){v(m),c==null||c.init(o.getState());return}v(m[a]),c==null||c.init(ti(l.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Js(p.state,m=>{if(a===void 0){v(m);return}JSON.stringify(o.getState())!==JSON.stringify(m[a])&&v(m[a])});case"IMPORT_STATE":{const{nextLiftedState:m}=p.payload,f=(x=m.computedStates.slice(-1)[0])==null?void 0:x.state;if(!f)return;v(a===void 0?f:f[a]),c==null||c.send(null,m);return}case"PAUSE_RECORDING":return h=!h}return}}),S},zp=vg,Js=(e,t)=>{let n;try{n=JSON.parse(e)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&t(n)};function jp(e,t){let n;try{n=e()}catch{return}return{getItem:o=>{var i;const s=l=>l===null?null:JSON.parse(l,void 0),a=(i=n.getItem(o))!=null?i:null;return a instanceof Promise?a.then(s):s(a)},setItem:(o,i)=>n.setItem(o,JSON.stringify(i,void 0)),removeItem:o=>n.removeItem(o)}}const tl=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return tl(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return tl(r)(n)}}}},Sg=(e,t)=>(n,r,o)=>{let i={storage:jp(()=>localStorage),partialize:p=>p,version:0,merge:(p,x)=>({...x,...p}),...t},s=!1;const a=new Set,l=new Set;let u=i.storage;if(!u)return e((...p)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...p)},r,o);const c=()=>{const p=i.partialize({...r()});return u.setItem(i.name,{state:p,version:i.version})},d=o.setState;o.setState=(p,x)=>{d(p,x),c()};const h=e((...p)=>{n(...p),c()},r,o);o.getInitialState=()=>h;let v;const S=()=>{var p,x;if(!u)return;s=!1,a.forEach(f=>{var g;return f((g=r())!=null?g:h)});const m=((x=i.onRehydrateStorage)==null?void 0:x.call(i,(p=r())!=null?p:h))||void 0;return tl(u.getItem.bind(u))(i.name).then(f=>{if(f)if(typeof f.version=="number"&&f.version!==i.version){if(i.migrate){const g=i.migrate(f.state,f.version);return g instanceof Promise?g.then(E=>[!0,E]):[!0,g]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,f.state];return[!1,void 0]}).then(f=>{var g;const[E,w]=f;if(v=i.merge(w,(g=r())!=null?g:h),n(v,!0),E)return c()}).then(()=>{m==null||m(v,void 0),v=r(),s=!0,l.forEach(f=>f(v))}).catch(f=>{m==null||m(void 0,f)})};return o.persist={setOptions:p=>{i={...i,...p},p.storage&&(u=p.storage)},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>S(),hasHydrated:()=>s,onHydrate:p=>(a.add(p),()=>{a.delete(p)}),onFinishHydration:p=>(l.add(p),()=>{l.delete(p)})},i.skipHydration||S(),v||h},Tp=Sg,xe=new Map,Y={registerComponent:(e,t)=>{const n=xe.get(e)||{};xe.set(e,{...n,component:t})},registerInitialState:(e,t)=>{const n=xe.get(e)||{};xe.set(e,{...n,initialState:t})},registerDisplayName:(e,t)=>{const n=xe.get(e)||{};xe.set(e,{...n,displayName:t})},registerIcon:(e,t)=>{const n=xe.get(e)||{};xe.set(e,{...n,icon:t})},registerDefaultSize:(e,t)=>{const n=xe.get(e)||{};xe.set(e,{...n,defaultSize:t})},registerSupportedActions:(e,t)=>{const n=xe.get(e)||{};xe.set(e,{...n,supportedActions:t})},getComponent:e=>{var t;return(t=xe.get(e))==null?void 0:t.component},getInitialState:e=>{var t;return((t=xe.get(e))==null?void 0:t.initialState)||{}},getDisplayName:e=>{var t;return((t=xe.get(e))==null?void 0:t.displayName)||e},getIcon:e=>{var t;return(t=xe.get(e))==null?void 0:t.icon},getDefaultSize:e=>{var t;return(t=xe.get(e))==null?void 0:t.defaultSize},getSupportedActions:e=>{var t;return(t=xe.get(e))==null?void 0:t.supportedActions},getRegisteredTypes:()=>new Set(Array.from(xe.keys())),unregisterAreaType:e=>{xe.delete(e)}},ze=[];for(let e=0;e<256;++e)ze.push((e+256).toString(16).slice(1));function wg(e,t=0){return(ze[e[t+0]]+ze[e[t+1]]+ze[e[t+2]]+ze[e[t+3]]+"-"+ze[e[t+4]]+ze[e[t+5]]+"-"+ze[e[t+6]]+ze[e[t+7]]+"-"+ze[e[t+8]]+ze[e[t+9]]+"-"+ze[e[t+10]]+ze[e[t+11]]+ze[e[t+12]]+ze[e[t+13]]+ze[e[t+14]]+ze[e[t+15]]).toLowerCase()}let Zs;const xg=new Uint8Array(16);function kg(){if(!Zs){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Zs=crypto.getRandomValues.bind(crypto)}return Zs(xg)}const Ig=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),bc={randomUUID:Ig};function hi(e,t,n){var o;if(bc.randomUUID&&!e)return bc.randomUUID();e=e||{};const r=e.random??((o=e.rng)==null?void 0:o.call(e))??kg();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,wg(r)}function Cg(e,t){const n=[];function r(o,i,s){if(i!==s){if(typeof i!=typeof s){n.push({path:o,oldValue:i,newValue:s});return}if(typeof i=="object"&&i!==null&&s!==null){const a=i,l=s,u=Object.keys(a),c=Object.keys(l);u.forEach(d=>{c.includes(d)||n.push({path:[...o,d],oldValue:a[d],newValue:void 0})}),c.forEach(d=>{u.includes(d)?r([...o,d],a[d],l[d]):n.push({path:[...o,d],oldValue:void 0,newValue:l[d]})})}else n.push({path:o,oldValue:i,newValue:s})}}return r([],e,t),n}function Vc(e,t){let n={...e};return t.changes.forEach(r=>{let o=n;for(let i=0;i<r.path.length-1;i++)o=o[r.path[i]];o[r.path[r.path.length-1]]=r.oldValue}),n}function Eg(e){return{...e,changes:e.changes.map(t=>({...t,oldValue:t.newValue,newValue:t.oldValue}))}}const Ag=cu((e,t)=>({spaces:{},activeSpaceId:null,openSpaceIds:[],errors:[],pilotMode:"AUTO",addSpace:n=>{var i;if(!n.name){e(s=>{s.errors=["Space name cannot be empty."]}),console.error("Validation failed for space:",t().errors);return}const r=hi(),o={id:r,name:n.name,description:n.description??"",sharedState:{color:((i=n.sharedState)==null?void 0:i.color)??"#ff0000",pastDiffs:[],futureDiffs:[],...n.sharedState||{}}};return e(s=>{s.spaces[r]=o,s.openSpaceIds.push(r),s.errors=[]}),r},removeSpace:n=>{e(r=>{delete r.spaces[n],r.activeSpaceId===n&&(r.activeSpaceId=null),r.openSpaceIds=r.openSpaceIds.filter(o=>o!==n),r.errors=[]})},setActiveSpace:n=>{e(r=>{n===null||r.spaces[n]?r.activeSpaceId=n:console.warn(`Attempted to set active space to non-existent ID: ${n}`),r.errors=[]})},setPilotMode:n=>{e(r=>{r.pilotMode=n})},openSpace:n=>{e(r=>{r.spaces[n]&&!r.openSpaceIds.includes(n)&&r.openSpaceIds.push(n)})},closeSpace:n=>{e(r=>{r.openSpaceIds=r.openSpaceIds.filter(o=>o!==n),r.activeSpaceId===n&&(r.activeSpaceId=r.openSpaceIds[r.openSpaceIds.length-1]||null)})},updateSpace:n=>{e(r=>{const o=r.spaces[n.id];if(o){if(n.name===""){r.errors=["Space name cannot be empty."],console.error("Validation failed for space update:",r.errors);return}const{id:i,...s}=n;r.spaces[i]={...o,...s},r.errors=[]}else r.errors=[`Space with ID ${n.id} not found for update.`],console.error("Update failed:",r.errors)})},updateSpaceGenericSharedState:n=>{var d;const{spaceId:r,changes:o}=n,i=t().spaces[r];if(!i){e(h=>{h.errors=[`Space with ID ${n.spaceId} not found for shared state update.`]}),console.error("Shared state update failed: Space not found");return}const s=i.sharedState,a=o.actionType||"UPDATE_SHARED_STATE",l=o.payload||{};e(h=>{const v=h.spaces[r];if(v){const{actionType:S,payload:p,...x}=o;v.sharedState={...v.sharedState,...x},h.errors=[]}});const u=(d=t().spaces[r])==null?void 0:d.sharedState;if(!u){console.error("Shared state update failed: Space disappeared after update?");return}const c=Cg(s,u);Array.isArray(c)&&c.length>0&&e(h=>{const v=h.spaces[r];v&&(v.sharedState.pastDiffs||(v.sharedState.pastDiffs=[]),v.sharedState.pastDiffs.push({timestamp:Date.now(),actionType:a,payload:l,changes:c}),v.sharedState.futureDiffs=[])})},clearErrors:()=>{e(n=>{n.errors=[]})},undoSharedState:n=>{e(r=>{var l,u;const o=r.spaces[n];if(!((u=(l=o==null?void 0:o.sharedState)==null?void 0:l.pastDiffs)!=null&&u.length))return;const i=o.sharedState.pastDiffs.pop(),s=o.sharedState,a=Vc(s,i);o.sharedState=a,o.sharedState.futureDiffs||(o.sharedState.futureDiffs=[]),o.sharedState.futureDiffs.push(i)})},redoSharedState:n=>{e(r=>{var u,c;const o=r.spaces[n];if(!((c=(u=o==null?void 0:o.sharedState)==null?void 0:u.futureDiffs)!=null&&c.length))return;const i=o.sharedState.futureDiffs.pop(),s=Eg(i),a=o.sharedState,l=Vc(a,s);o.sharedState=l,o.sharedState.pastDiffs||(o.sharedState.pastDiffs=[]),o.sharedState.pastDiffs.push(i)})},getSpaceById:n=>t().spaces[n],getAllSpaces:()=>t().spaces,getActiveSpace:()=>{const n=t();return n.activeSpaceId?n.spaces[n.activeSpaceId]:null},getActiveSpaceId:()=>t().activeSpaceId,getOpenSpaces:()=>{const n=t();return n.openSpaceIds.map(r=>n.spaces[r]).filter(r=>r!==void 0)},getSpaceErrors:()=>t().errors,getPilotMode:()=>t().pilotMode})),_g=Tp(Ag,{name:"space-storage",partialize:e=>{const t={};for(const o in e.spaces){const{sharedState:i,...s}=e.spaces[o],{pastDiffs:a,futureDiffs:l,...u}=i??{};t[o]={...s,sharedState:u}}const{activeSpaceId:n}=e;return{spaces:t,activeSpaceId:n}},merge:(e,t)=>{const n=e,r={},o=(n==null?void 0:n.spaces)??{},i=t.spaces,s=new Set([...Object.keys(o),...Object.keys(i)]);for(const l of s){const u=o[l],c=i[l];if(!u&&!c)continue;const d=(c==null?void 0:c.sharedState)??{},h=(u==null?void 0:u.sharedState)??{};r[l]={id:(u==null?void 0:u.id)??(c==null?void 0:c.id)??l,name:(u==null?void 0:u.name)??(c==null?void 0:c.name)??`Space ${l}`,description:(u==null?void 0:u.description)??(c==null?void 0:c.description)??"",sharedState:{...d,...h,pastDiffs:[],futureDiffs:[]}},r[l].sharedState.color||(r[l].sharedState.color="#000000")}return{...t,activeSpaceId:(n==null?void 0:n.activeSpaceId)??t.activeSpaceId,spaces:r,errors:[]}}}),B=au()(zp(_g,{name:"SpaceStore"})),Pp={_id:0,rootId:null,updateLayout:()=>{},errors:[],activeAreaId:null,joinPreview:null,layout:{},areas:{},viewports:{},areaToOpen:null,lastSplitResultData:null,lastLeadAreaId:null,addArea:()=>"",removeArea:()=>{},setActiveArea:()=>{},updateArea:()=>{},setAreaToOpen:()=>{},updateAreaToOpenPosition:()=>{},finalizeAreaPlacement:()=>{},cleanupTemporaryStates:()=>{},setViewports:()=>{},setRowSizes:()=>{},splitArea:()=>null,setJoinPreview:()=>{},joinOrMoveArea:()=>{},getLastSplitResult:()=>null,getActiveArea:()=>null,getAreaById:()=>{},getAllAreas:()=>({}),getAreaErrors:()=>[],getLastLeadAreaId:()=>null},or=()=>JSON.parse(JSON.stringify({areas:Pp}));function nl(e,t,n){for(const r in e){const o=e[r];if(o.type==="area_row"){const i=o,s=i.areas.findIndex(l=>l.id===t),a=i.areas.findIndex(l=>l.id===n);if(s!==-1&&a!==-1&&Math.abs(s-a)===1)return{parentRow:i,sourceIndex:s,targetIndex:a}}}return{parentRow:null,sourceIndex:-1,targetIndex:-1}}function Mg(e,t){var i;const n=new Set,r=[t],o=new Set;for(;r.length>0;){const s=r.shift();if(o.has(s))continue;o.add(s);const a=e[s];if(a){if(a.type==="area")n.add(s);else if(a.type==="area_row"){const l=a;l.areas&&Array.isArray(l.areas)&&l.areas.forEach(u=>{u&&u.id&&r.push(u.id)})}}}return((i=e[t])==null?void 0:i.type)==="area"&&n.add(t),n}function Br(e,t){var l;if(!t)return;const n=e.layout[t];if(!n||n.type!=="area_row")return;const r=n;if(r.areas.length!==1)return;const o=r.areas[0],i=o.id,a=An(e.layout,e.rootId)[t];if(a&&((l=e.layout[a])==null?void 0:l.type)==="area_row"){const u=e.layout[a],c=u.areas.findIndex(d=>d.id===t);if(c!==-1){const d=u.areas[c].size??o.size??.5;u.areas[c]={id:i,size:d}}else{console.error(`[simplifyLayoutNodeIfNeeded] Cleanup Error: Row ${t} not found in parent ${a}.`);return}}else e.rootId===t?e.rootId=i:console.warn(`[simplifyLayoutNodeIfNeeded] Row ${t} has single child ${i} but no parent and is not root. Removing row.`);delete e.layout[t]}function Np(e,t){const n=e[t];return n?n.type==="area"?t:n.type==="area_row"&&n.areas.length>0?Np(e,n.areas[0].id):null:null}const zg=(e,t)=>({...Pp,addArea:n=>{let r="";return e(o=>{var c;const i=(c=o.screens[o.activeScreenId])==null?void 0:c.areas;if(!i)return;const s=n.id||hi();let a;n.type&&(a=(Y._roleMap||{})[n.type]);const l={...n,id:s,role:a};if(a===oe.LEAD&&!l.spaceId){const d=B.getState().spaces,h=Object.keys(d);if(h.length>0){const v=B.getState().activeSpaceId;l.spaceId=v||h[0]}else{const v=B.getState().addSpace({name:`Space for ${n.type}`,sharedState:{}});v&&(l.spaceId=v)}}const u=hg(l);u.isValid?(i.areas[s]=l,i._id+=1,i.errors=[],r=s,o.lastUpdated=Date.now()):(i.errors=u.errors,console.error("Validation failed for area:",u.errors))}),r},removeArea:n=>e(r=>{var s,a;const o=(s=r.screens[r.activeScreenId])==null?void 0:s.areas;if(!o)return;if(Object.keys(o.areas).length<=1){console.warn("Cannot remove the last area of a screen");return}delete o.areas[n],delete o.layout[n];for(const l in o.layout){const u=o.layout[l];if(u.type==="area_row"){const c=u,d=c.areas.findIndex(h=>h.id===n);if(d!==-1)if(c.areas.splice(d,1),c.orientation==="stack"){if(c.activeTabId===n&&(c.activeTabId=((a=c.areas[0])==null?void 0:a.id)||void 0),c.areas.length===0)delete o.layout[l];else if(c.areas.length===1){const h=Object.keys(o.layout).find(v=>{const S=o.layout[v];return S.type==="area_row"&&S.areas.some(p=>p.id===l)});if(h){const v=o.layout[h],S=v.areas.findIndex(p=>p.id===l);S!==-1&&(v.areas[S]={...c.areas[0]}),delete o.layout[l]}else o.rootId===l&&(o.rootId=c.areas[0].id,delete o.layout[l])}}else c.areas.length===0&&delete o.layout[l]}}o.rootId===n&&(o.rootId=null),o.activeAreaId===n&&(o.activeAreaId=null),o.errors=[],r.lastUpdated=Date.now()}),setActiveArea:n=>e(r=>{var i,s;const o=(i=r.screens[r.activeScreenId])==null?void 0:i.areas;o&&(n===null||o.areas[n])&&o.activeAreaId!==n&&(o.activeAreaId=n,n&&((s=o.areas[n])==null?void 0:s.role)===oe.LEAD&&(o.lastLeadAreaId=n),o.errors=[],r.lastUpdated=Date.now())}),updateArea:n=>e(r=>{var s;const o=(s=r.screens[r.activeScreenId])==null?void 0:s.areas;if(!o)return;const i=o.areas[n.id];if(i){const a=n.type||i.type;let l=i.role;(!l||n.type&&n.type!==i.type)&&(l=(Y._roleMap||{})[a]);const u=JSON.stringify(i);Object.assign(i,n,{role:l});const c=JSON.stringify(i);u!==c&&(o.errors=[],r.lastUpdated=Date.now())}else o.errors=[`Area with ID ${n.id} not found for update.`]}),updateLayout:n=>e(r=>{var s;const o=(s=r.screens[r.activeScreenId])==null?void 0:s.areas;if(!o)return;const i=o.layout[n.id];if(i&&i.type==="area_row"){const a=JSON.stringify(i);n.activeTabId!==void 0&&(i.activeTabId=n.activeTabId),n.areas!==void 0&&(i.areas=n.areas);const l=JSON.stringify(i);a!==l&&(o.errors=[],r.lastUpdated=Date.now())}else o.errors=[`Layout with ID ${n.id} not found or not a row.`]}),setAreaToOpen:n=>e(r=>{var i;const o=(i=r.screens[r.activeScreenId])==null?void 0:i.areas;o&&o.areaToOpen!==n&&(o.areaToOpen=n,r.lastUpdated=Date.now())}),updateAreaToOpenPosition:n=>e(r=>{var i;const o=(i=r.screens[r.activeScreenId])==null?void 0:i.areas;o!=null&&o.areaToOpen&&(o.areaToOpen.position.x!==n.x||o.areaToOpen.position.y!==n.y)&&(o.areaToOpen.position=n)}),finalizeAreaPlacement:n=>e(r=>{var s,a,l,u,c,d,h,v,S;const o=(s=r.screens[r.activeScreenId])==null?void 0:s.areas;if(!o)return;const i=o.areaToOpen;if(!i){o.errors=["No area to open"];return}try{const{position:p,area:x}=i,m=(a=x.state)==null?void 0:a.sourceId,f=m||hi(),g=new ve(p.x,p.y);if(!m){if(o.areas[f]){console.error(`finalizeAreaPlacement: ID conflict for new area ${f}`),o.areaToOpen=null;return}o.areas[f]={id:f,type:x.type,state:x.state},o._id+=1}const E=Io(),w=kr(o.layout,o.rootId||"",E);let y=n==null?void 0:n.targetId,C=n==null?void 0:n.placement;if(!y){const M=new ve(300,200);y=_p(g,o,w,M)}if(!y){m||delete o.areas[f],o.areaToOpen=null;return}const z=w[y];if(!z){console.error(`[areaStore] finalizeAreaPlacement: Viewport not found for target ${y}. Bailing out.`),m||delete o.areas[f],o.areaToOpen=null;return}C||(C=Mp(z,g)),o.areaToOpen=null;let I=null,_=null;if(m){const M=An(o.layout,o.rootId),T=M[m];if(I=T,T&&((l=o.layout[T])==null?void 0:l.type)==="area_row"){const N=o.layout[T],D=N.areas.findIndex(L=>L.id===m);if(D!==-1)if(N.areas.splice(D,1),N.areas.length===0){delete o.layout[T];const L=M[T];Br(o,L)}else{const L=N.areas.reduce((O,j)=>O+(j.size||0),0);if(L>0){const O=1/L;N.areas.forEach(j=>{j.size=(j.size||0)*O})}N.areas.length===1&&(_=N.areas[0].id),Br(o,T)}}else o.layout[m]&&delete o.layout[m];m!==f&&delete o.areas[m],o.rootId===m&&(o.rootId=null)}y&&y===I&&_&&!o.layout[y]&&(y=_);let R=C==="stack"?"horizontal":C==="top"||C==="bottom"?"vertical":"horizontal";if(C==="stack"){let M=y,T=o.areas[M],N=null;if(((u=o.layout[M])==null?void 0:u.type)==="area_row"&&o.layout[M].orientation==="stack")T=o.areas[M];else if(!T&&((c=o.layout[M])==null?void 0:c.type)==="area_row"){const b=Np(o.layout,M);b&&(N=M,M=b,T=o.areas[M])}const D=o.areas[f];if(!D||!T){console.error("[finalizeAreaPlacement] Stack creation failed: Source or target area not found.");return}if(!(((d=t().options)==null?void 0:d.allowStackMixedRoles)!==!1)){const b=D.role||D.type&&((h=Y._roleMap)==null?void 0:h[D.type]),H=T.role||T.type&&((v=Y._roleMap)==null?void 0:v[T.type]);if(b&&H&&b!==H){o.errors=["Impossible de stacker des areas de rôles différents (option de configuration)"];return}}const O=`row-${o._id+1}`;o._id+=1;const j={type:"area_row",id:O,orientation:"stack",areas:[{id:M,size:.5},{id:f,size:.5}],activeTabId:M},F=An(o.layout,o.rootId)[M];if(F&&((S=o.layout[F])==null?void 0:S.type)==="area_row"){const b=o.layout[F],H=b.areas.findIndex(G=>G.id===M);if(H!==-1){const G=b.areas[H].size;b.areas[H]={id:O,size:G}}}else o.rootId===M&&(o.rootId=O);o.layout[O]=j,o.activeAreaId=M}else{const T=An(o.layout,o.rootId)[y],N=T?o.layout[T]:null,D=hi();if(o.layout[f]||(o.layout[f]={type:"area",id:f}),N&&N.type==="area_row"){const L=N.areas.findIndex(O=>O.id===y);if(L===-1){console.error(`[finalizeAreaPlacement] Target ${y} not found in parent ${T}`);return}if(N.orientation===R){const O=L+(C==="bottom"||C==="right"?1:0);let j=[];O===0?j=[N.areas[0]]:O===N.areas.length?j=[N.areas[N.areas.length-1]]:j=[N.areas[O-1],N.areas[O]];const F=j.reduce((b,H)=>b+(H.size||0),0)/(j.length+1);j.forEach(b=>b.size=F),N.areas.splice(O,0,{id:f,size:F})}else{o._id+=1;const O={type:"area_row",id:D,orientation:R,areas:C==="bottom"||C==="right"?[{id:y,size:.5},{id:f,size:.5}]:[{id:f,size:.5},{id:y,size:.5}]};o.layout[D]=O,N.areas[L]={id:D,size:N.areas[L].size}}}else{o._id+=1;const L={type:"area_row",id:D,orientation:R,areas:C==="bottom"||C==="right"?[{id:y,size:.5},{id:f,size:.5}]:[{id:f,size:.5},{id:y,size:.5}]};o.layout[D]=L,o.rootId=D,o.layout[y]||(o.layout[y]={type:"area",id:y})}}if(o.areas[f]&&(r.screens[r.activeScreenId].areas.activeAreaId=f,o.areas[f].role===oe.LEAD&&(r.screens[r.activeScreenId].areas.lastLeadAreaId=f)),o.rootId&&E&&E.width>0&&E.height>0){const M=kr(o.layout,o.rootId,E);o.viewports=M}else o.viewports={};r.lastUpdated=Date.now()}catch(p){o&&(o.areaToOpen=null),o.errors=[`Error finalizing area placement: ${p}`]}}),cleanupTemporaryStates:()=>e(n=>{var o;const r=(o=n.screens[n.activeScreenId])==null?void 0:o.areas;r&&(r.joinPreview||r.areaToOpen||r.lastSplitResultData)&&(r.joinPreview=null,r.areaToOpen=null,r.lastSplitResultData=null,n.lastUpdated=Date.now())}),setViewports:n=>e(r=>{var i;const o=(i=r.screens[r.activeScreenId])==null?void 0:i.areas;o&&(o.viewports=n)}),setRowSizes:n=>e(r=>{var s;const o=(s=r.screens[r.activeScreenId])==null?void 0:s.areas;if(!o)return;const i=o.layout[n.rowId];if(i&&i.type==="area_row"){const a=i;if(a.areas.length===n.sizes.length){let l=n.sizes.reduce((u,c)=>u+c,0);if(Math.abs(l-1)>.001&&l>0){const u=1/l;a.areas.forEach((c,d)=>{c&&(c.size=n.sizes[d]*u)})}else a.areas.forEach((u,c)=>{u&&(u.size=n.sizes[c])});r.lastUpdated=Date.now()}}}),splitArea:n=>{let r=null;return e(o=>{var g,E;const i=(g=o.screens[o.activeScreenId])==null?void 0:g.areas;if(!i)return;const{areaIdToSplit:s,parentRowId:a,horizontal:l}=n,u=i.layout[s];if(u.type==="area_row"&&u.orientation==="stack"){const w=u.areas,y=[];for(const R of w){const M=i.areas[R.id];if(!M)continue;const T=`area-${i._id+1}`;i._id+=1,i.areas[T]={id:T,type:M.type,state:{...M.state}},i.layout[T]={type:"area",id:T},y.push({id:T,size:R.size})}const C=`row-${i._id+1}`;i._id+=1;const z={id:C,type:"area_row",orientation:"stack",areas:y,activeTabId:(E=y[0])==null?void 0:E.id};i.layout[C]=z;const I=`row-${i._id+1}`;i._id+=1;const _={id:I,type:"area_row",orientation:l?"horizontal":"vertical",areas:[{id:s,size:.5},{id:C,size:.5}]};if(i.layout[I]=_,a){const R=i.layout[a];if((R==null?void 0:R.type)==="area_row"){const M=R.areas.findIndex(T=>T.id===s);if(M!==-1){const T=R.areas[M].size??.5;R.areas[M]={id:I,size:T}}}}else i.rootId=I;r={newRowId:I,separatorIndex:1};return}i._id+=1;const c=i._id,d=`area-${c}`,h=`row-${c+1}`;if(i.areas[d]||i.layout[d]){console.error(`splitArea: ID conflict for new area ${d}`);return}const v=i.areas[s];if(i.areas[d]={id:d,type:(v==null?void 0:v.type)||u.type,state:{...v==null?void 0:v.state},spaceId:v==null?void 0:v.spaceId},i.layout[d]={type:"area",id:d},i.layout[h]){console.error(`splitArea: ID conflict for new row ${h}`);return}const S={id:h,type:"area_row",orientation:l?"horizontal":"vertical",areas:[{id:s,size:.5},{id:d,size:.5}]};i.layout[h]=S;let p=.5;if(a){const w=i.layout[a];if((w==null?void 0:w.type)==="area_row"){const y=w.areas.findIndex(C=>C.id===s);if(y!==-1)if(p=w.areas[y].size??.5,w.orientation===S.orientation){const C=S.areas.map(z=>({id:z.id,size:(z.size??.5)*p}));w.areas.splice(y,1,...C),r={newRowId:a,separatorIndex:y+1}}else w.areas[y]={id:h,size:p},r={newRowId:h,separatorIndex:1};else console.error(`splitArea Error: Area ${s} not in parent ${a}.`)}else console.error(`splitArea Error: Parent ${a} not found or not row.`)}else i.rootId===s?(i.rootId=h,r={newRowId:h,separatorIndex:1}):console.error(`splitArea Error: Area ${s} has no parent and is not root.`);i._id=c+2,i.lastSplitResultData=r;function x(w){if(!w)return;let y=w;for(;y;){const C=i.layout[y];if(Br(i,y),y=An(i.layout,i.rootId)[y],!(C&&!i.layout[C.id]))break}}function m(w,y=null){if(!w)return;const C=i.layout[w];if(!C||C.type!=="area_row")return;let z=!1;for(let I=0;I<C.areas.length;){const _=C.areas[I].id,R=i.layout[_];if(R&&R.type==="area_row"&&R.orientation===C.orientation){const M=R,T=C.areas[I].size??1/C.areas.length,N=M.areas.reduce((L,O)=>L+(O.size??0),0)||1,D=M.areas.map(L=>({id:L.id,size:(L.size??1/M.areas.length)*T/N}));C.areas.splice(I,1,...D.filter(L=>!C.areas.some(O=>O.id===L.id))),delete i.layout[_],z=!0}else I++}for(const I of C.areas)m(I.id,w);z&&m(w,y)}function f(){const w=new Set;function y(C){if(!C||w.has(C))return;w.add(C);const z=i.layout[C];if(z&&z.type==="area_row")for(const I of z.areas)y(I.id)}y(i.rootId);for(const C in i.layout){const z=i.layout[C];z&&z.type==="area_row"&&!w.has(C)&&delete i.layout[C]}}x(a),m(i.rootId),f(),o.lastUpdated=Date.now()}),r},setJoinPreview:n=>e(r=>{var i;const o=(i=r.screens[r.activeScreenId])==null?void 0:i.areas;o&&o.joinPreview!==n&&(o.joinPreview=n,r.lastUpdated=Date.now())}),joinOrMoveArea:n=>e(r=>{var m,f,g;const o=(m=r.screens[r.activeScreenId])==null?void 0:m.areas;if(!o)return;const{sourceAreaId:i,targetAreaId:s,direction:a}=n,{parentRow:l,sourceIndex:u,targetIndex:c}=nl(o.layout,i,s);if(!l||l.type!=="area_row"){o.errors=[`Could not find adjacent areas ${i}/${s} in the same row.`],o.joinPreview=null;return}const d=l.id,v=An(o.layout,o.rootId)[d],S=JSON.parse(JSON.stringify(l)),p=c>u?1:-1,x=u;try{const E=pg(S,x,p),{area:w,removedAreaId:y}=E,C=Mg(o.layout,y);if(C.add(y),C.forEach(z=>{delete o.areas[z],delete o.layout[z]}),w.id===d&&w.type==="area_row"){const z=w;if(o.layout[d]=z,z.areas){const I=z.areas.reduce((_,R)=>_+(R.size||0),0);if(I>0){const _=1/I;z.areas.forEach(R=>{R.size=(R.size||0)*_})}}((f=z.areas)==null?void 0:f.length)===1&&Br(o,d)}else if(delete o.layout[d],o.layout[w.id]||w.type!=="area_row"&&(o.layout[w.id]={type:"area",id:w.id}),v&&((g=o.layout[v])==null?void 0:g.type)==="area_row"){const z=o.layout[v],I=z.areas.findIndex(_=>_.id===d);if(I!==-1){const _=z.areas[I].size??.5;z.areas[I]={id:w.id,size:_}}else console.error(`[joinOrMoveArea] Cleanup Error: Row ${d} not found in grandparent ${v}.`)}else o.rootId===d&&(o.rootId=w.id);o.activeAreaId&&C.has(o.activeAreaId)&&(w.type==="area"?o.activeAreaId=w.id:o.activeAreaId=null),o.errors=[],o.joinPreview=null}catch(E){console.error("Error during joinOrMoveArea:",E),o.errors=[E instanceof Error?E.message:String(E)],o.joinPreview=null}r.lastUpdated=Date.now()}),getLastSplitResult:()=>{var r;const n=(r=t().screens[t().activeScreenId])==null?void 0:r.areas;return n?n.lastSplitResultData:null},getActiveArea:()=>{var o;const n=t(),r=(o=n.screens[n.activeScreenId])==null?void 0:o.areas;return r&&r.activeAreaId?r.areas[r.activeAreaId]:null},getAreaById:n=>{var i;const r=t(),o=(i=r.screens[r.activeScreenId])==null?void 0:i.areas;return o?o.areas[n]:void 0},getAllAreas:()=>{var o;const n=t(),r=(o=n.screens[n.activeScreenId])==null?void 0:o.areas;return r?r.areas:{}},getAreaErrors:()=>{var o;const n=t(),r=(o=n.screens[n.activeScreenId])==null?void 0:o.areas;return r?r.errors:[]},getLastLeadAreaId:()=>{var o;const n=t(),r=(o=n.screens[n.activeScreenId])==null?void 0:o.areas;return(r==null?void 0:r.lastLeadAreaId)||null},findParentRowAndIndices:nl}),jg=(e,t)=>{const n=zg(e,t);return{screens:{1:or()},activeScreenId:"1",nextScreenId:2,options:{allowStackMixedRoles:!0},lastUpdated:Date.now(),layout_preset:[],addScreen:()=>e(r=>{const o=r.nextScreenId.toString();r.screens[o]=or();const i=`area-default-${o}-0`,s=r.screens[o].areas;s.areas[i]={id:i,type:"text-note",state:{content:"New Screen"}},s.layout={[i]:{type:"area",id:i}},s.rootId=i,s._id=1,s.activeAreaId=i,r.nextScreenId+=1,r.activeScreenId=o,r.lastUpdated=Date.now()}),switchScreen:r=>e(o=>{o.screens[r]&&o.activeScreenId!==r?(o.activeScreenId=r,o.lastUpdated=Date.now()):o.screens[r]||console.warn(`Attempted to switch to non-existent screen ID: ${r}`)}),removeScreen:r=>e(o=>{var a;if(Object.keys(o.screens).filter(l=>{var u;return!((u=o.screens[l])!=null&&u.isDetached)}).length<=1&&!((a=o.screens[r])!=null&&a.isDetached)){console.warn("Cannot remove the last classic screen");return}if(!o.screens[r]){console.warn(`Attempted to remove non-existent screen ID: ${r}`);return}if(delete o.screens[r],o.nextScreenId=Object.keys(o.screens).filter(l=>!l.startsWith("detached-")).reduce((l,u)=>Math.max(l,parseInt(u)),0)+1,o.activeScreenId===r){const l=Object.keys(o.screens).filter(u=>{var c;return!((c=o.screens[u])!=null&&c.isDetached)}).sort((u,c)=>parseInt(u)-parseInt(c));o.activeScreenId=l[0]||Object.keys(o.screens)[0]||"1"}const s=new URL(window.location.href);s.searchParams.get("screen")===r&&(s.searchParams.set("screen",o.activeScreenId),window.history.replaceState({},"",s.toString())),o.lastUpdated=Date.now()}),duplicateScreen:r=>e(o=>{if(!o.screens[r]){console.warn(`Attempted to duplicate non-existent screen ID: ${r}`);return}const i=o.nextScreenId.toString(),s=o.screens[r];o.screens[i]=JSON.parse(JSON.stringify(s)),o.nextScreenId+=1,o.activeScreenId=i,o.lastUpdated=Date.now()}),detachArea:r=>e(o=>{const i=o.getAreaById(r);if(!i){console.warn(`Area ${r} not found`);return}const s=`detached-${o.nextScreenId}`;o.nextScreenId+=1,o.screens[s]={...or(),areas:{...or().areas},isDetached:!0,detachedFromAreaId:r};const a=o.screens[s].areas;a.areas[r]={...i},a.layout={[r]:{type:"area",id:r}},a.rootId=r,a.activeAreaId=r;const l=o.screens[o.activeScreenId];if(l){delete l.areas.areas[r];for(const c in l.areas.layout){const d=l.areas.layout[c];d.type==="area_row"&&(d.areas=d.areas.filter(h=>h.id!==r))}delete l.areas.layout[r],l.areas.rootId===r&&(l.areas.rootId=null);for(const c in l.areas.layout){const d=l.areas.layout[c];d.type==="area_row"&&d.areas.length===1&&Br(l.areas,c)}}const u=["width=800","height=600","menubar=no","toolbar=no","location=no","status=no","scrollbars=yes","resizable=yes"].join(",");window.open(`?screen=${s}`,s,u),o.lastUpdated=Date.now()}),addArea:n.addArea,removeArea:n.removeArea,setActiveArea:n.setActiveArea,updateArea:n.updateArea,updateLayout:n.updateLayout,setAreaToOpen:n.setAreaToOpen,updateAreaToOpenPosition:n.updateAreaToOpenPosition,finalizeAreaPlacement:n.finalizeAreaPlacement,cleanupTemporaryStates:n.cleanupTemporaryStates,setViewports:n.setViewports,setRowSizes:n.setRowSizes,splitArea:n.splitArea,setJoinPreview:n.setJoinPreview,joinOrMoveArea:n.joinOrMoveArea,getLastSplitResult:n.getLastSplitResult,getActiveArea:n.getActiveArea,getAreaById:n.getAreaById,getAllAreas:n.getAllAreas,getAreaErrors:n.getAreaErrors,findParentRowAndIndices:nl}},Tg=Math.random().toString(36).slice(2),P=au()(cu(Tp(zp(jg,{name:"KarmycRootStore"}),{name:"karmycRootState",partialize:e=>({screens:e.screens,activeScreenId:e.activeScreenId,nextScreenId:e.nextScreenId,lastUpdated:e.lastUpdated,options:e.options,layout_preset:e.layout_preset}),storage:jp(()=>localStorage),skipHydration:!1,onRehydrateStorage:()=>e=>{e||(console.warn("[KarmycStore] État invalide après hydratation, réinitialisation..."),P.setState({screens:{1:or()},activeScreenId:"1",nextScreenId:2,lastUpdated:Date.now(),options:{allowStackMixedRoles:!0}}))}}))),Pg=(e={})=>{const t=P.getState(),n={...t.options,...e};!t.screens||Object.keys(t.screens).length===0?P.setState({screens:{1:or()},activeScreenId:"1",nextScreenId:2,lastUpdated:Date.now(),options:n}):P.setState({options:n})};if(typeof window<"u"){let e=null;const t=50;window.addEventListener("storage",n=>{var r,o,i;if(n.key==="karmycRootState"){const s=localStorage.getItem("karmycRootState");if(!s)return;const a=JSON.parse(s);if(((r=a==null?void 0:a.state)==null?void 0:r.windowId)===Tg)return;const l=P.getState(),u=((o=a==null?void 0:a.state)==null?void 0:o.screens)||{},c=((i=a==null?void 0:a.state)==null?void 0:i.lastUpdated)||0,d=l.lastUpdated||0,h=Object.keys(u).some(v=>{const S=u[v],p=l.screens[v];return!p||JSON.stringify(S)!==JSON.stringify(p)});e&&clearTimeout(e),e=setTimeout(()=>{h&&c>d&&P.setState(v=>({...v,screens:u,lastUpdated:c})),e=null},t)}})}function Ng(e={}){console.log("useKarmyc - input options:",e);const t=A.useMemo(()=>{const n={plugins:e.plugins??[],validators:e.validators??[],initialAreas:e.initialAreas??[],keyboardShortcutsEnabled:e.keyboardShortcutsEnabled??!0,builtInLayouts:e.builtInLayouts??[],initialLayout:e.initialLayout??"default",options:{resizableAreas:e.resizableAreas??!0,manageableAreas:e.manageableAreas??!0,multiScreen:e.multiScreen??!0,builtInLayouts:e.builtInLayouts??[]}};return console.log("useKarmyc - computed config:",n),n},[e.plugins,e.validators,e.initialAreas,e.keyboardShortcutsEnabled,e.builtInLayouts,e.initialLayout,e.resizableAreas,e.manageableAreas,e.multiScreen]);return A.useEffect(()=>{const n={areas:{types:[],layout:{}},actions:{plugins:t.plugins,validators:t.validators},contextMenu:{actions:[]}};return Ky.initialize(n),P.setState(r=>({...r,options:t.options})),()=>{}},[t]),t}const Rg=["area/addArea","area/removeArea","area/updateArea","area/moveArea","area/resizeArea","composition/update","composition/addElement","composition/removeElement","composition/updateElement","project/update","draw/addLine","draw/updateLine","draw/removeLine","draw/updateStrokeWidth","draw/updateColor","draw/updateZoom","draw/updatePan","draw/clearCanvas"],Dg={id:"history",priority:Sp.HIGH,actionTypes:Rg,handler:e=>{const{type:t,payload:n}=e;rl(t,n)}};function rl(e,t){switch(e){case"area/addArea":return`Ajout d'une zone ${t.type||""}`;case"area/removeArea":return"Suppression d'une zone";case"area/updateArea":return"Mise à jour d'une zone";case"area/moveArea":return"Déplacement d'une zone";case"area/resizeArea":return"Redimensionnement d'une zone";case"composition/addElement":return`Ajout d'un élément ${t.elementType||""}`;case"composition/removeElement":return"Suppression d'un élément";case"composition/updateElement":return"Mise à jour d'un élément";case"draw/addLine":return"Ajout d'une ligne";case"draw/updateLine":return"Modification d'une ligne";case"draw/removeLine":return"Suppression d'une ligne";case"draw/updateStrokeWidth":return`Modification de l'épaisseur du trait : ${t.oldValue} → ${t.newValue}`;case"draw/updateColor":return`Modification de la couleur : ${t.oldValue} → ${t.newValue}`;case"draw/clearCanvas":return"Effacement du dessin";default:return`Action ${e}`}}function Lg(){const{addArea:e,removeArea:t,setActiveArea:n,updateArea:r,getActiveArea:o,getAreaById:i,getAllAreas:s,getAreaErrors:a}=P(),l=A.useCallback((x,m,f)=>{const g={id:"",type:x,state:m,position:f};if((Y._roleMap||{})[x]===oe.LEAD){const w=B.getState().spaces,y=Object.keys(w);if(y.length>0){const C=B.getState().activeSpaceId;g.spaceId=C||y[0]}else{const C=B.getState().addSpace({name:`Space for ${x}`,sharedState:{}});C&&(g.spaceId=C)}}return e(g)},[e]),u=A.useCallback(x=>{t(x)},[t]),c=A.useCallback(x=>{n(x)},[n]),d=A.useCallback((x,m)=>{r({id:x,...m})},[r]),h=A.useCallback(()=>o(),[o]),v=A.useCallback(x=>i(x),[i]),S=A.useCallback(()=>s(),[s]),p=A.useCallback(()=>a(),[a]);return{createArea:l,removeArea:u,setActive:c,update:d,getActive:h,getById:v,getAll:S,getErrors:p}}const Og=({options:e={}})=>{const t=A.useRef(!1),{createArea:n}=Lg();return A.useEffect(()=>{var d;if(t.current)return;t.current=!0;const r=[Dg],o=e.plugins||[],i=[...r,...o],s=[];i.forEach(h=>{Q.registerPlugin(h),s.push(h.id)}),e.validators&&e.validators.forEach(({actionType:h,validator:v})=>{Q.registerValidator(h,v)});const a=P.getState(),l=a.activeScreenId,u=(d=a.screens[l])==null?void 0:d.areas;if(!((u==null?void 0:u.rootId)||Object.keys((u==null?void 0:u.areas)||{}).length>0)){const h=e.initialAreas||[],v=[];if(h.forEach((S,p)=>{let x;try{x=n(S.type,S.state)}catch(m){console.error(`[KarmycInitializer] Error calling createArea for area ${p+1}:`,m),x=void 0}x?v.push(x):console.warn(`[KarmycInitializer] Failed to create area or received empty/undefined ID for area ${p+1}.`)}),v.length>0){const S={id:"root",type:"area_row",orientation:"horizontal",areas:v.map(p=>({id:p,size:1/v.length}))};P.setState(p=>{var m;if(!((m=p.screens[p.activeScreenId])!=null&&m.areas))return console.error(`[KarmycInitializer] Active screen areas ${p.activeScreenId} not found during layout update.`),p;const x={...p.screens[p.activeScreenId].areas.layout||{},root:S,...v.reduce((f,g)=>(f[g]||(f[g]={type:"area",id:g}),f),{})};return p.screens[p.activeScreenId].areas.rootId="root",p.screens[p.activeScreenId].areas.layout=x,p},!1,"KarmycInitializer/setDefaultLayout")}else console.warn("[KarmycInitializer] No areas were successfully created (newAreaIds is empty). Skipping layout creation.")}return()=>{s.forEach(h=>{Q.unregisterPlugin(h)})}},[]),null},Ur=new Map,qs=new Map;let $g=1;const Ir={registerShortcuts:(e,t)=>{Ur.set(e,t)},getShortcuts:e=>Ur.get(e)||[],clearShortcuts:e=>{Ur.delete(e)},unregisterShortcuts:e=>{Ur.delete(e)},register:e=>{const t=`kbd-${$g++}`;return qs.set(t,e),t},remove:e=>qs.delete(e),getAllShortcuts:()=>{const e=[];for(const t of Ur.values())e.push(...t);for(const t of qs.values())e.push(t);return e}};function Ug(e,t){const n=Ir.getAllShortcuts();for(const o of n)if(o.key===e){const i=new Set(o.modifierKeys||[]);let s=!0;for(const a of i)if(!t.has(a)){s=!1;break}if(s){const a=new Set(o.optionalModifierKeys||[]);for(const l of t)if(!i.has(l)&&!a.has(l)){s=!1;break}}if(s)return!0}const r=[{key:"R",modifiers:["Control"]},{key:"S",modifiers:["Control"]},{key:"P",modifiers:["Control"]},{key:"F",modifiers:["Control"]},{key:"L",modifiers:["Control"]},{key:"U",modifiers:["Control"]},{key:"I",modifiers:["Control"]},{key:"J",modifiers:["Control"]},{key:"K",modifiers:["Control"]},{key:"N",modifiers:["Control"]},{key:"T",modifiers:["Control"]},{key:"W",modifiers:["Control"]}];for(const o of r)if(e===o.key){const i=new Set(o.modifiers);let s=!0;for(const a of i)if(!t.has(a)){s=!1;break}if(s&&t.size===i.size)return!0}return!1}const Fg=({children:e,options:t={}})=>{console.log("KarmycProvider - options:",t);const n=A.useRef(!0),r=A.useRef(!1),o=A.useRef(null),i=A.useRef(0),s=A.useRef([]);A.useEffect(()=>{Pg(t)},[t]),A.useEffect(()=>{document.addEventListener("contextmenu",u=>u.preventDefault(),!1)},[]),A.useEffect(()=>{const c=new URLSearchParams(window.location.search).get("screen");if(c)if(P.getState().screens[c])P.setState({activeScreenId:c}),o.current=c;else{console.warn(`[KarmycProvider] Screen ID '${c}' from URL not found in store.`);const v=new URL(window.location.href);v.searchParams.delete("screen"),window.history.replaceState({},"",v.toString())}const d=setTimeout(()=>{n.current=!1},0);return()=>clearTimeout(d)},[]);const a=P(u=>u.activeScreenId),l=P(u=>u.screens);return A.useEffect(()=>{if(n.current||r.current)return;const u=P.getState(),c=Object.keys(u.screens).length;if(c!==i.current){const v=Object.keys(u.screens).sort((p,x)=>parseInt(p)-parseInt(x));if(s.current.length===0){s.current=v,i.current=c;return}const S=s.current.find(p=>!v.includes(p));if(S){const p=s.current.indexOf(S),x=s.current.indexOf(a);if(x>p){const m=x-1,f=v[m];f&&(P.setState({activeScreenId:f}),o.current=f)}}s.current=v,i.current=c;return}if(!u.screens[a]){console.warn(`[KarmycProvider] Invalid active screen ID '${a}', resetting to '1'`),P.setState({activeScreenId:"1"});return}if(o.current===a)return;const d=new URL(window.location.href),h=d.searchParams.get("screen");a!==h&&(r.current=!0,a?d.searchParams.set("screen",a):d.searchParams.delete("screen"),window.history.replaceState({},"",d.toString()),r.current=!1,o.current=a)},[a,l]),A.useEffect(()=>{const u=c=>{var m,f;if(c.key==="Control"||c.key==="Alt"||c.key==="Shift"||c.key==="Meta")return;const d=new Set;c.ctrlKey&&d.add("Control"),c.altKey&&d.add("Alt"),c.shiftKey&&d.add("Shift"),c.metaKey&&d.add("Command");const h=P.getState(),v=(m=h.screens[h.activeScreenId])==null?void 0:m.areas.activeAreaId,S=v?(f=h.getAreaById(v))==null?void 0:f.type:null,p=Ir.getAllShortcuts().filter(g=>g.isGlobal);for(const g of p)if(g.key.toUpperCase()===c.key.toUpperCase()){const E=new Set(g.modifierKeys||[]);let w=!0;for(const y of E)if(!d.has(y)){w=!1;break}if(w){const y=new Set(g.optionalModifierKeys||[]);for(const C of d)if(!E.has(C)&&!y.has(C)){w=!1;break}}if(w){c.preventDefault(),c.stopPropagation();try{g.fn(v||"",{})}catch(y){console.error(`Error executing global shortcut ${g.name}:`,y)}return}}if(!v||!S)return;const x=Ir.getShortcuts(S);for(const g of x)if(!g.isGlobal&&g.key.toUpperCase()===c.key.toUpperCase()){const E=new Set(g.modifierKeys||[]);let w=!0;for(const y of E)if(!d.has(y)){w=!1;break}if(w){const y=new Set(g.optionalModifierKeys||[]);for(const C of d)if(!E.has(C)&&!y.has(C)){w=!1;break}}if(w){c.preventDefault(),c.stopPropagation();try{g.fn(v,{})}catch(y){console.error(`Error executing area shortcut ${g.name}:`,y)}return}}Ug(c.key,d)&&(c.preventDefault(),c.stopPropagation())};return window.addEventListener("keydown",u,!0),()=>window.removeEventListener("keydown",u,!0)},[]),k.jsxs(k.Fragment,{children:[k.jsx(Og,{options:t}),e]})},Hc={isVisible:!1,position:{x:0,y:0},items:[],errors:[],targetId:void 0,metadata:void 0,menuClassName:"menu",customContextMenuContent:null,menuType:void 0},Ve=au()(cu(e=>({...Hc,openContextMenu:t=>e(n=>{const{position:r,items:o,targetId:i,metadata:s}=t,a=t.menuClassName,l=Xs(r);if(!l.isValid){console.warn("Position validation failed:",l.errors),n.errors=l.errors;return}const c=o.map(d=>Uc(d)).filter(d=>!d.isValid);if(c.length>0){console.warn("Items validation failed:",c),n.errors=c.flatMap(d=>d.errors||["Unknown item validation error"]);return}n.isVisible=!0,n.position=r,n.items=o,n.targetId=i,n.metadata=s,n.menuClassName=a||n.menuClassName||"menu",n.errors=[],n.menuType="default"}),openCustomContextMenu:t=>e(n=>{const{position:r,targetId:o,metadata:i,component:s}=t,a=t.menuClassName;if(!r){console.warn("Aucune position fournie à openCustomContextMenu"),n.errors=["Aucune position fournie au menu contextuel"];return}const l=Xs(r);if(!l.isValid){console.warn("Position validation failed:",l.errors),n.errors=l.errors;return}n.isVisible=!0,n.position=r,n.targetId=o,n.metadata=i,n.errors=[],n.menuClassName=a+" menu",n.customContextMenuContent=s,n.menuType="custom"}),closeContextMenu:()=>e(t=>{Object.assign(t,Hc),t.menuType=void 0}),updateContextMenuPosition:t=>e(n=>{const r=Xs(t);if(!r.isValid){n.errors=r.errors;return}n.position=t,n.errors=[]}),updateContextMenuItems:t=>e(n=>{const o=t.map(i=>Uc(i)).filter(i=>!i.isValid);if(o.length>0){n.errors=o.flatMap(i=>i.errors||["Unknown item validation error"]);return}n.items=t,n.errors=[]}),clearErrors:()=>e(t=>{t.errors=[]})}))),du=()=>{const e=Ve(s=>s.isVisible),t=Ve(s=>s.position),n=Ve(s=>s.openContextMenu),r=Ve(s=>s.closeContextMenu),o=A.useCallback(s=>{n(s)},[n]),i=A.useCallback(()=>{r()},[r]);return{isVisible:e,position:t,open:o,close:i}};function Ue(e,t,n){A.useEffect(()=>(Q.registerActionHandler(e,t,n),()=>{Q.unregisterActionHandler(e)}),[e,t,n])}/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bg=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Vg=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),Bc=e=>{const t=Vg(e);return t.charAt(0).toUpperCase()+t.slice(1)},Rp=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),Hg=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Bg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=A.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:i,iconNode:s,...a},l)=>A.createElement("svg",{ref:l,...Bg,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Rp("lucide",o),...!i&&!Hg(a)&&{"aria-hidden":"true"},...a},[...s.map(([u,c])=>A.createElement(u,c)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=(e,t)=>{const n=A.forwardRef(({className:r,...o},i)=>A.createElement(Wg,{ref:i,iconNode:t,className:Rp(`lucide-${bg(Bc(e))}`,`lucide-${e}`,r),...o}));return n.displayName=Bc(e),n};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=[["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}],["path",{d:"M10 4v4",key:"pp8u80"}],["path",{d:"M2 8h20",key:"d11cs7"}],["path",{d:"M6 4v4",key:"1svtjw"}]],Qg=te("app-window",Kg);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yg=[["path",{d:"M15 6v6h4l-7 7-7-7h4V6h6z",key:"1thax2"}]],Gg=te("arrow-big-down",Yg);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=[["path",{d:"m16 22-1-4",key:"1ow2iv"}],["path",{d:"M19 13.99a1 1 0 0 0 1-1V12a2 2 0 0 0-2-2h-3a1 1 0 0 1-1-1V4a2 2 0 0 0-4 0v5a1 1 0 0 1-1 1H6a2 2 0 0 0-2 2v.99a1 1 0 0 0 1 1",key:"iw8jdu"}],["path",{d:"M5 14h14l1.973 6.767A1 1 0 0 1 20 22H4a1 1 0 0 1-.973-1.233z",key:"1soew8"}],["path",{d:"m8 22 1-4",key:"s3unb"}]],Jg=te("brush-cleaning",Xg);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"9",x2:"15",y1:"15",y2:"9",key:"1dfufj"}]],fu=te("circle-slash",Zg);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],ev=te("clock",qg);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Dp=te("copy",tv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Wc=te("ellipsis-vertical",nv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Kc=te("ellipsis",rv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],iv=te("external-link",ov);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],Lp=te("file-down",sv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]],Op=te("file-up",av);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=[["path",{d:"m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H18a2 2 0 0 1 2 2v2",key:"1nmvlm"}],["circle",{cx:"14",cy:"15",r:"1",key:"1gm4qj"}]],uv=te("folder-open-dot",lv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Qc=te("folder-open",cv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],fv=te("history",dv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],hv=te("keyboard",pv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],yv=te("link",mv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],vv=te("lock-open",gv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],wv=te("lock",Sv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],$p=te("palette",xv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],Iv=te("panels-top-left",kv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],pu=te("plus",Cv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=[["path",{d:"M20.34 17.52a10 10 0 1 0-2.82 2.82",key:"fydyku"}],["circle",{cx:"19",cy:"19",r:"2",key:"17f5cg"}],["path",{d:"m13.41 13.41 4.18 4.18",key:"1gqbwc"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Av=te("radius",Ev);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]],Mv=te("redo",_v);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],jv=te("rotate-ccw",zv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Pv=te("rotate-cw",Tv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Up=te("square-pen",Nv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Dv=te("trash-2",Rv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],Ov=te("trash",Lv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],Uv=te("undo",$v);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Fp=te("x",Fv),bv=()=>{const e=P(u=>u.screens),t=P(u=>u.activeScreenId),n=P(u=>u.switchScreen),r=P(u=>u.addScreen),o=P(u=>u.removeScreen),i=P(u=>u.duplicateScreen),{open:s}=du();Ue("open-new-window",u=>{u!=null&&u.screenId&&window.open(`?screen=${u.screenId}`,"_blank","noopener,noreferrer")}),Ue("open-new-tab",u=>{u!=null&&u.screenId&&window.open(`?screen=${u.screenId}`,"_blank")}),Ue("delete-screen",u=>{u!=null&&u.screenId&&(Object.keys(e).length>1?o(u.screenId):console.warn("Impossible de supprimer le dernier écran"))}),Ue("duplicate-screen",u=>{u!=null&&u.screenId&&i(u.screenId)}),Ue("add-screen",()=>{r()});const a=Object.keys(e).filter(u=>{var c;return!((c=e[u])!=null&&c.isDetached)}).sort((u,c)=>parseInt(u)-parseInt(c)),l=(u,c)=>{u.preventDefault(),s({position:{x:u.clientX,y:u.clientY},menuClassName:"screen-switcher-menu",items:[{id:"add",label:"Add",icon:pu,actionId:"add-screen",metadata:{}},{id:"duplicate",label:"Duplicate",icon:Dp,actionId:"duplicate-screen",metadata:{screenId:c}},{id:"open-new-window",label:"Open in new window",icon:Qg,actionId:"open-new-window",metadata:{screenId:c}},{id:"open-new-tab",label:"Open in new tab",icon:iv,actionId:"open-new-tab",metadata:{screenId:c}},{id:"delete",label:"Delete",icon:Ov,actionId:"delete-screen",metadata:{screenId:c},disabled:Object.keys(e).length<=1}],targetId:c})};return k.jsx("div",{style:{display:"flex",alignItems:"center",gap:"5px",padding:"0 10px"},children:a.map((u,c)=>k.jsx("button",{onClick:()=>n(u),onContextMenu:d=>l(d,u),style:{padding:"2px 8px",border:"1px solid #555",borderRadius:"3px",background:t===u?"#444":"#2a2a2a",color:t===u?"#eee":"#aaa",cursor:"pointer",minWidth:"25px",textAlign:"center"},disabled:t===u,children:c+1},u))})},kn={},ol=new Set;function Vv(){ol.forEach(e=>e())}function qe(e,t){const n=`${e}:${t}`,r=A.useCallback((i,s,a={})=>{const{order:l=0,alignment:u="left",width:c,allowedLayerTypes:d,callback:h}=a;kn[n]?kn[n]=kn[n].filter(S=>!(S.identifier.name===s.name&&S.identifier.type===s.type)):kn[n]=[];const v=Math.random().toString(36).substr(2,9);return kn[n].push({component:i,order:l,alignment:u,width:c,identifier:s,allowedLayerTypes:d,callback:h}),kn[n].sort((S,p)=>S.order-p.order),Vv(),v},[n]),o=A.useCallback(()=>kn[n]||[],[n]);return{registerComponent:r,getComponents:o}}function Hv(){const[,e]=at.useReducer(t=>t+1,0);A.useEffect(()=>(ol.add(e),()=>{ol.delete(e)}),[])}const il=({areaType:e="app",areaState:t={},children:n,viewport:r={top:0,left:0,width:"100%",height:"100%"}})=>{Hv();const{getComponents:o}=qe(e,"top-outer"),{getComponents:i}=qe(e,"bottom-outer"),{getComponents:s}=qe(e,"top-inner"),{getComponents:a}=qe(e,"bottom-inner"),l=o(),u=i(),c=s(),d=a(),h=P(E=>E.activeScreenId),v=P(E=>{var w;return(w=E.screens[h])==null?void 0:w.isDetached})||!1,S=P(E=>E.options.multiScreen)||!1,p=l.length>0,x=u.length>0,m=p?gt:0,f=x?gt:0,g=(E,w)=>{const y=E.filter(I=>I.alignment==="left"),C=E.filter(I=>I.alignment==="center"),z=E.filter(I=>I.alignment==="right");return y.length===0&&C.length===0&&z.length===0?null:w.includes("inner")||!v&&w.includes("outer")?k.jsxs("div",{className:`tools-bar tools-bar-${w}`,style:{height:gt,minHeight:gt},children:[k.jsx("div",{className:"tools-bar-section tools-bar-section--left",style:{display:y.length>0?"flex":"none"},children:y.map((I,_)=>{const R=I.component;return k.jsx(R,{areaState:t},`${I.identifier.type}-${I.identifier.name}-${_}`)})}),k.jsx("div",{className:"tools-bar-section tools-bar-section--center",style:{display:C.length>0?"flex":"none"},children:C.map((I,_)=>{const R=I.component;return k.jsx(R,{areaState:t},`${I.identifier.type}-${I.identifier.name}-${_}`)})}),k.jsxs("div",{className:"tools-bar-section tools-bar-section--right",style:{display:z.length>0?"flex":"none"},children:[z.map((I,_)=>{const R=I.component;return k.jsx(R,{areaState:t},`${I.identifier.type}-${I.identifier.name}-${_}`)}),S&&e==="app"&&w==="bottom-outer"&&k.jsx(bv,{})]})]}):null};return k.jsxs("div",{className:"tools-container",style:{top:r.top,left:r.left,width:r.width,height:v?"100%":`calc(${r.height})`},children:[g(l,"top-outer"),k.jsxs("div",{className:"tools-content",style:{height:v?"100%":`calc(${r==null?void 0:r.height}${typeof(r==null?void 0:r.height)=="string"?"":"px"} - ${m}px - ${f}px)`},children:[g(c,"top-inner"),n,g(d,"bottom-inner")]}),g(u,"bottom-outer")]})},Yc=e=>Symbol.iterator in e,Gc=e=>"entries"in e,Xc=(e,t)=>{const n=e instanceof Map?e:new Map(e.entries()),r=t instanceof Map?t:new Map(t.entries());if(n.size!==r.size)return!1;for(const[o,i]of n)if(!Object.is(i,r.get(o)))return!1;return!0},Bv=(e,t)=>{const n=e[Symbol.iterator](),r=t[Symbol.iterator]();let o=n.next(),i=r.next();for(;!o.done&&!i.done;){if(!Object.is(o.value,i.value))return!1;o=n.next(),i=r.next()}return!!o.done&&!!i.done};function Wr(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null||Object.getPrototypeOf(e)!==Object.getPrototypeOf(t)?!1:Yc(e)&&Yc(t)?Gc(e)&&Gc(t)?Xc(e,t):Bv(e,t):Xc({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)})}var bp={exports:{}},Vp={},Hp={exports:{}},Bp={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cr=A;function Wv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Kv=typeof Object.is=="function"?Object.is:Wv,Qv=Cr.useState,Yv=Cr.useEffect,Gv=Cr.useLayoutEffect,Xv=Cr.useDebugValue;function Jv(e,t){var n=t(),r=Qv({inst:{value:n,getSnapshot:t}}),o=r[0].inst,i=r[1];return Gv(function(){o.value=n,o.getSnapshot=t,ea(o)&&i({inst:o})},[e,n,t]),Yv(function(){return ea(o)&&i({inst:o}),e(function(){ea(o)&&i({inst:o})})},[e]),Xv(n),n}function ea(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Kv(e,n)}catch{return!0}}function Zv(e,t){return t()}var qv=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Zv:Jv;Bp.useSyncExternalStore=Cr.useSyncExternalStore!==void 0?Cr.useSyncExternalStore:qv;Hp.exports=Bp;var e0=Hp.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ps=A,t0=e0;function n0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var r0=typeof Object.is=="function"?Object.is:n0,o0=t0.useSyncExternalStore,i0=ps.useRef,s0=ps.useEffect,a0=ps.useMemo,l0=ps.useDebugValue;Vp.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var i=i0(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=a0(function(){function l(v){if(!u){if(u=!0,c=v,v=r(v),o!==void 0&&s.hasValue){var S=s.value;if(o(S,v))return d=S}return d=v}if(S=d,r0(c,v))return S;var p=r(v);return o!==void 0&&o(S,p)?(c=v,S):(c=v,d=p)}var u=!1,c,d,h=n===void 0?null:n;return[function(){return l(t())},h===null?void 0:function(){return l(h())}]},[t,n,r,o]);var a=o0(e,i[0],i[1]);return s0(function(){s.hasValue=!0,s.value=a},[a]),l0(a),a};bp.exports=Vp;var u0=bp.exports;const c0=od(u0),{useSyncExternalStoreWithSelector:d0}=c0,f0=e=>e;function Kr(e,t=f0,n){const r=d0(e.subscribe,e.getState,e.getInitialState,t,n);return at.useDebugValue(r),r}function bn(){const e=Kr(B,y=>y.spaces,Wr),t=Kr(B,y=>y.activeSpaceId,Wr),n=Kr(B,y=>y.openSpaceIds,Wr),r=Kr(B,y=>y.pilotMode,Wr),o=B(y=>y.addSpace),i=B(y=>y.removeSpace),s=B(y=>y.setActiveSpace),a=B(y=>y.openSpace),l=B(y=>y.closeSpace),u=B(y=>y.updateSpace),c=B(y=>y.updateSpaceGenericSharedState),d=A.useMemo(()=>Object.entries(e).map(([y,C])=>({id:y,name:C.name})),[e]),h=A.useMemo(()=>n.map(y=>e[y]).filter(y=>y!==void 0),[e,n]),v=A.useCallback((y,C={})=>o({name:y,sharedState:C}),[o]),S=A.useCallback(y=>{i(y)},[i]),p=A.useCallback(y=>{s(y)},[s]),x=A.useCallback(y=>{a(y)},[a]),m=A.useCallback(y=>{l(y)},[l]),f=A.useCallback((y,C)=>{c({spaceId:y,changes:C})},[c]),g=A.useCallback((y,C)=>{u({id:y,...C})},[u]),E=A.useCallback(y=>B.getState().spaces[y],[]),w=A.useCallback(y=>{B.getState().setPilotMode(y)},[]);return{spaceList:d,activeSpaceId:t,openSpaces:h,openSpaceIds:n,pilotMode:r,createSpace:v,deleteSpace:S,setActive:p,setPilotMode:w,openSpace:x,closeSpace:m,updateSharedState:f,updateSpaceProperties:g,getSpaceById:E}}const p0=()=>{const{open:e}=du(),[t,n]=A.useState(!1),{spaceList:r,activeSpaceId:o,openSpaces:i,createSpace:s,setActive:a,openSpace:l,closeSpace:u,updateSpaceProperties:c}=bn(),d=A.useCallback(()=>{const p=r.find(E=>E.id===o);if(!p)return;const x=JSON.stringify(p,null,2),m="data:application/json;charset=utf-8,"+encodeURIComponent(x),f=`${p.name}.json`,g=document.createElement("a");g.setAttribute("href",m),g.setAttribute("download",f),g.click()},[r,o]),h=A.useCallback(()=>{const p=document.createElement("input");p.type="file",p.accept=".json",p.onchange=x=>{var g;const m=(g=x.target.files)==null?void 0:g[0];if(!m)return;const f=new FileReader;f.onload=E=>{var w;try{const y=JSON.parse((w=E.target)==null?void 0:w.result),C=s(y.name,y.sharedState);C&&a(C)}catch(y){console.error("Error importing space:",y)}},f.readAsText(m)},p.click()},[s,a]),v=A.useCallback(()=>{const p=r.find(m=>m.id===o);if(!p||!o)return;const x=prompt("Nouveau nom du space:",p.name);x&&x!==p.name&&c(o,{name:x})},[r,o,c]);A.useEffect(()=>(Q.registerActionHandler("space.new",()=>{const p=s("Nouveau Space");p&&a(p)}),Q.registerActionHandler("space.import",h),Q.registerActionHandler("space.export",d),Q.registerActionHandler("space.rename",v),Q.registerActionHandler("space.close",p=>{const x=p.spaceId||o;x&&u(x)}),Q.registerActionHandler("space.open",p=>{p.spaceId&&(l(p.spaceId),a(p.spaceId))}),()=>{Q.unregisterActionHandler("space.new"),Q.unregisterActionHandler("space.import"),Q.unregisterActionHandler("space.export"),Q.unregisterActionHandler("space.rename"),Q.unregisterActionHandler("space.close"),Q.unregisterActionHandler("space.open")}),[s,h,d,v,u,l,a,o]);const S=A.useCallback(p=>{p.preventDefault();const x=r.slice(-10).reverse(),m=!!o,f=[{id:"new",label:"Nouveau Space",actionId:"space.new",icon:pu},{id:"import",label:"Importer Space",actionId:"space.import",icon:Op},{id:"export",label:"Exporter Space",actionId:"space.export",icon:Lp,disabled:!m},{id:"rename",label:"Renommer Space",actionId:"space.rename",icon:Up,disabled:!m},{id:"close",label:"Fermer Space Actif",actionId:"space.close",icon:Fp,disabled:!m}];i.length>0&&f.push({id:"separator1",label:"---",actionId:"area.separator"},{id:"open",label:"Espaces Ouverts",actionId:"space.open",icon:Qc,children:i.map(g=>({id:`open-${g.id}`,label:g.name,actionId:"space.open",metadata:{spaceId:g.id}}))}),x.length>0&&f.push({id:"separator2",label:"---",actionId:"area.separator"},{id:"recent",label:"Spaces Récents",actionId:"space.recent",icon:fv,children:x.map(g=>({id:`recent-${g.id}`,label:g.name,actionId:"space.open",metadata:{spaceId:g.id}}))}),e({position:{x:p.clientX,y:p.clientY},items:f,menuClassName:"space-context-menu"})},[e,r,o,i]);return k.jsxs(k.Fragment,{children:[k.jsx("style",{children:`
                    .space-context-menu {
                        z-index: 9999 !important;
                    }
                `}),k.jsx("div",{onContextMenu:S,onClick:S,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),style:{cursor:"pointer",padding:"8px",color:"white",display:"flex",alignItems:"center",gap:"8px",userSelect:"none",backgroundColor:t?"rgba(255, 255, 255, 0.1)":"transparent",transition:"background-color 0.2s ease"},children:k.jsx(Qc,{size:26})})]})},Wp=e=>!!e&&e[0]==="o",sl=Sr.unstable_batchedUpdates,Eo=(e,t)=>e===!0||!!(e&&e[t]),St=(e,t)=>typeof e=="function"?e(t):e,hs=(e,t)=>(t&&Object.keys(t).forEach(n=>{const r=e[n],o=t[n];typeof o=="function"&&r?e[n]=(...i)=>{o(...i),r(...i)}:e[n]=o}),e),h0=e=>{if(typeof e!="string")return{top:0,right:0,bottom:0,left:0};const t=e.trim().split(/\s+/,4).map(parseFloat),n=isNaN(t[0])?0:t[0],r=isNaN(t[1])?n:t[1];return{top:n,right:r,bottom:isNaN(t[2])?n:t[2],left:isNaN(t[3])?r:t[3]}},ta=e=>{for(;e;){if(e=e.parentNode,!e||e===document.body||!e.parentNode)return;const{overflow:t,overflowX:n,overflowY:r}=getComputedStyle(e);if(/auto|scroll|overlay|hidden/.test(t+r+n))return e}};function hu(e,t){return{"aria-disabled":e||void 0,tabIndex:t?0:-1}}function Jc(e,t){for(let n=0;n<e.length;n++)if(e[n]===t)return n;return-1}const Er=({block:e,element:t,modifiers:n,className:r})=>A.useMemo(()=>{const o=t?`${e}__${t}`:e;let i=o;n&&Object.keys(n).forEach(a=>{const l=n[a];l&&(i+=` ${o}--${l===!0?a:`${a}-${l}`}`)});let s=typeof r=="function"?r(n):r;return typeof s=="string"&&(s=s.trim(),s&&(i+=` ${s}`)),i},[e,t,n,r]),m0="szh-menu-container",dr="szh-menu",y0="arrow",Kp="item",g0="submenu",Qp=A.createContext(),mu=A.createContext({}),al=A.createContext({}),Yp=A.createContext({}),v0=A.createContext({}),ms=A.createContext({}),Je=Object.freeze({ENTER:"Enter",ESC:"Escape",SPACE:" ",HOME:"Home",END:"End",LEFT:"ArrowLeft",RIGHT:"ArrowRight",UP:"ArrowUp",DOWN:"ArrowDown"}),Se=Object.freeze({RESET:0,SET:1,UNSET:2,INCREASE:3,DECREASE:4,FIRST:5,LAST:6,SET_INDEX:7}),Ao=Object.freeze({CLICK:"click",CANCEL:"cancel",BLUR:"blur",SCROLL:"scroll"}),ll=Object.freeze({FIRST:"first",LAST:"last"}),S0=Object.freeze({entering:"opening",entered:"open",exiting:"closing",exited:"closed"}),Zc="absolute",Gp="none",Xp="menuitem",ul={preventScroll:!0},w0=({className:e,containerRef:t,containerProps:n,children:r,isOpen:o,theming:i,transition:s,onClose:a})=>{const l=Eo(s,"item"),u=({key:d})=>{switch(d){case Je.ESC:St(a,{key:d,reason:Ao.CANCEL});break}},c=d=>{o&&!d.currentTarget.contains(d.relatedTarget)&&St(a,{reason:Ao.BLUR})};return k.jsx("div",{...hs({onKeyDown:u,onBlur:c},n),className:Er({block:m0,modifiers:A.useMemo(()=>({theme:i,itemTransition:l}),[i,l]),className:e}),style:{position:"absolute",...n==null?void 0:n.style},ref:t,children:r})},x0=()=>{let e,t=0;return{toggle:n=>{n?t++:t--,t=Math.max(t,0)},on:(n,r,o)=>{t?e||(e=setTimeout(()=>{e=0,r()},n)):o==null||o()},off:()=>{e&&(clearTimeout(e),e=0)}}},k0=e=>{const[t,n]=A.useState(),o=A.useRef({items:[],hoverIndex:-1,sorted:!1}).current,i=A.useCallback((a,l)=>{const{items:u}=o;if(!a)o.items=[];else if(l)u.push(a);else{const c=u.indexOf(a);c>-1&&(u.splice(c,1),a.contains(document.activeElement)&&(e.current.focus(ul),n()))}o.hoverIndex=-1,o.sorted=!1},[o,e]),s=A.useCallback((a,l,u)=>{const{items:c,hoverIndex:d}=o,h=()=>{if(o.sorted)return;const p=e.current.querySelectorAll(".szh-menu__item");c.sort((x,m)=>Jc(p,x)-Jc(p,m)),o.sorted=!0};let v=-1,S;switch(a){case Se.RESET:break;case Se.SET:S=l;break;case Se.UNSET:S=p=>p===l?void 0:p;break;case Se.FIRST:h(),v=0,S=c[v];break;case Se.LAST:h(),v=c.length-1,S=c[v];break;case Se.SET_INDEX:h(),v=u,S=c[v];break;case Se.INCREASE:h(),v=d,v<0&&(v=c.indexOf(l)),v++,v>=c.length&&(v=0),S=c[v];break;case Se.DECREASE:h(),v=d,v<0&&(v=c.indexOf(l)),v--,v<0&&(v=c.length-1),S=c[v];break}S||(v=-1),n(S),o.hoverIndex=v},[e,o]);return{hoverItem:t,dispatch:s,updateItems:i}},qc=(e,t)=>Math.round(e)===t?e:t,I0=e=>{const t=e.getBoundingClientRect();return t.width=qc(t.width,e.offsetWidth),t.height=qc(t.height,e.offsetHeight),t},C0=(e,t,n,r)=>{const o=I0(t),i=e.getBoundingClientRect(),s=n===window?{left:0,top:0,right:document.documentElement.clientWidth,bottom:window.innerHeight}:n.getBoundingClientRect(),a=h0(r),l=S=>S+i.left-s.left-a.left,u=S=>S+i.left+o.width-s.right+a.right,c=S=>S+i.top-s.top-a.top,d=S=>S+i.top+o.height-s.bottom+a.bottom;return{menuRect:o,containerRect:i,getLeftOverflow:l,getRightOverflow:u,getTopOverflow:c,getBottomOverflow:d,confineHorizontally:S=>{let p=l(S);if(p<0)S-=p;else{const x=u(S);x>0&&(S-=x,p=l(S),p<0&&(S-=p))}return S},confineVertically:S=>{let p=c(S);if(p<0)S-=p;else{const x=d(S);x>0&&(S-=x,p=c(S),p<0&&(S-=p))}return S}}},E0=({arrowRef:e,menuY:t,anchorRect:n,containerRect:r,menuRect:o})=>{let i=n.top-r.top-t+n.height/2;const s=e.current.offsetHeight*1.25;return i=Math.max(s,i),i=Math.min(i,o.height-s),i},A0=({anchorRect:e,containerRect:t,menuRect:n,placeLeftorRightY:r,placeLeftX:o,placeRightX:i,getLeftOverflow:s,getRightOverflow:a,confineHorizontally:l,confineVertically:u,arrowRef:c,arrow:d,direction:h,position:v})=>{let S=h,p=r;v!=="initial"&&(p=u(p),v==="anchor"&&(p=Math.min(p,e.bottom-t.top),p=Math.max(p,e.top-t.top-n.height)));let x,m,f;return S==="left"?(x=o,v!=="initial"&&(m=s(x),m<0&&(f=a(i),(f<=0||-m>f)&&(x=i,S="right")))):(x=i,v!=="initial"&&(f=a(x),f>0&&(m=s(o),(m>=0||-m<f)&&(x=o,S="left")))),v==="auto"&&(x=l(x)),{arrowY:d?E0({menuY:p,arrowRef:c,anchorRect:e,containerRect:t,menuRect:n}):void 0,x,y:p,computedDirection:S}},_0=({arrowRef:e,menuX:t,anchorRect:n,containerRect:r,menuRect:o})=>{let i=n.left-r.left-t+n.width/2;const s=e.current.offsetWidth*1.25;return i=Math.max(s,i),i=Math.min(i,o.width-s),i},M0=({anchorRect:e,containerRect:t,menuRect:n,placeToporBottomX:r,placeTopY:o,placeBottomY:i,getTopOverflow:s,getBottomOverflow:a,confineHorizontally:l,confineVertically:u,arrowRef:c,arrow:d,direction:h,position:v})=>{let S=h==="top"?"top":"bottom",p=r;v!=="initial"&&(p=l(p),v==="anchor"&&(p=Math.min(p,e.right-t.left),p=Math.max(p,e.left-t.left-n.width)));let x,m,f;return S==="top"?(x=o,v!=="initial"&&(m=s(x),m<0&&(f=a(i),(f<=0||-m>f)&&(x=i,S="bottom")))):(x=i,v!=="initial"&&(f=a(x),f>0&&(m=s(o),(m>=0||-m<f)&&(x=o,S="top")))),v==="auto"&&(x=u(x)),{arrowX:d?_0({menuX:p,arrowRef:c,anchorRect:e,containerRect:t,menuRect:n}):void 0,x:p,y:x,computedDirection:S}},z0=({arrow:e,align:t,direction:n,gap:r,shift:o,position:i,anchorRect:s,arrowRef:a,positionHelpers:l})=>{const{menuRect:u,containerRect:c}=l,d=n==="left"||n==="right";let h=d?r:o,v=d?o:r;if(e){const w=a.current;d?h+=w.offsetWidth:v+=w.offsetHeight}const S=s.left-c.left-u.width-h,p=s.right-c.left+h,x=s.top-c.top-u.height-v,m=s.bottom-c.top+v;let f,g;t==="end"?(f=s.right-c.left-u.width,g=s.bottom-c.top-u.height):t==="center"?(f=s.left-c.left-(u.width-s.width)/2,g=s.top-c.top-(u.height-s.height)/2):(f=s.left-c.left,g=s.top-c.top),f+=h,g+=v;const E={...l,anchorRect:s,placeLeftX:S,placeRightX:p,placeLeftorRightY:g,placeTopY:x,placeBottomY:m,placeToporBottomX:f,arrowRef:a,arrow:e,direction:n,position:i};switch(n){case"left":case"right":return A0(E);case"top":case"bottom":default:return M0(E)}},mi=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?A.useLayoutEffect:A.useEffect;function ed(e,t){typeof e=="function"?e(t):e.current=t}const yu=(e,t)=>A.useMemo(()=>e?t?n=>{ed(e,n),ed(t,n)}:e:t,[e,t]),td=-9999,Jp=({ariaLabel:e,menuClassName:t,menuStyle:n,arrow:r,arrowProps:o={},anchorPoint:i,anchorRef:s,containerRef:a,containerProps:l,externalRef:u,parentScrollingRef:c,align:d="start",direction:h="bottom",position:v="auto",overflow:S="visible",setDownOverflow:p,repositionFlag:x,captureFocus:m=!0,state:f,endTransition:g,isDisabled:E,menuItemFocus:w,gap:y=0,shift:C=0,children:z,onClose:I,focusProps:_,...R})=>{const[M,T]=A.useState({x:td,y:td}),[N,D]=A.useState({}),[L,O]=A.useState(),[j,U]=A.useState(h),[F]=A.useState(x0),[b,H]=A.useReducer(J=>J+1,1),{transition:G,boundingBoxRef:q,boundingBoxPadding:K,rootMenuRef:ee,rootAnchorRef:X,scrollNodesRef:ye,reposition:Me,viewScroll:ue,submenuCloseDelay:ie}=A.useContext(ms),{submenuCtx:fe,reposSubmenu:Ne=x}=A.useContext(al),Ke=A.useRef(),Sn=A.useRef(),ce=A.useRef(!1),{hoverItem:pt,dispatch:Qe,updateItems:Ut}=k0(Ke),Re=Wp(f),Po=Eo(G,"open"),wn=Eo(G,"close"),Ye=ye.current,Su=J=>{switch(J.key){case Je.HOME:Qe(Se.FIRST);break;case Je.END:Qe(Se.LAST);break;case Je.UP:Qe(Se.DECREASE,pt);break;case Je.DOWN:Qe(Se.INCREASE,pt);break;case Je.SPACE:J.target&&J.target.className.indexOf(dr)!==-1&&J.preventDefault();return;default:return}J.preventDefault(),J.stopPropagation()},kt=()=>{f==="closing"&&O(),St(g)},Pt=J=>{J.stopPropagation(),F.on(ie,()=>{Qe(Se.RESET),Ke.current.focus(ul)})},xn=J=>{J.target===J.currentTarget&&F.off()},Ge=A.useCallback(J=>{var Iu;const De=Ke.current,It=a.current;if(!De||!It)return;const Nt=s?(Iu=s.current)==null?void 0:Iu.getBoundingClientRect():i?{left:i.x,right:i.x,top:i.y,bottom:i.y,width:0,height:0}:null;if(!Nt)return;Ye.menu||(Ye.menu=(q?q.current:ta(ee.current))||window);const Ie=C0(It,De,Ye.menu,K);let{arrowX:Ro,arrowY:hh,x:mh,y:Do,computedDirection:yh}=z0({arrow:r,align:d,direction:h,gap:y,shift:C,position:v,anchorRect:Nt,arrowRef:Sn,positionHelpers:Ie});const{menuRect:gh}=Ie,ku=gh.height;if(!J&&S!=="visible"){const{getTopOverflow:vh,getBottomOverflow:Sh}=Ie;let zr,vs;const Ss=Sh(Do);if(Ss>0)zr=ku-Ss,vs=Ss;else{const Lo=vh(Do);Lo<0&&(zr=ku+Lo,vs=0-Lo,zr>=0&&(Do-=Lo))}zr>=0&&O({height:zr,overflowAmt:vs})}r&&D({x:Ro,y:hh}),T({x:mh,y:Do}),U(yh)},[r,d,K,h,y,C,v,S,i,s,a,q,ee,Ye]);mi(()=>{Re&&(Ge(),ce.current&&H()),ce.current=Re},[Re,Ge,Ne]),mi(()=>{L&&!p&&(Ke.current.scrollTop=0)},[L,p]),mi(()=>Ut,[Ut]),A.useEffect(()=>{let{menu:J}=Ye;if(!Re||!J)return;if(J=J.addEventListener?J:window,!Ye.anchors){Ye.anchors=[];let Ie=ta(X&&X.current);for(;Ie&&Ie!==J;)Ye.anchors.push(Ie),Ie=ta(Ie)}let De=ue;if(Ye.anchors.length&&De==="initial"&&(De="auto"),De==="initial")return;const It=()=>{De==="auto"?sl(()=>Ge(!0)):St(I,{reason:Ao.SCROLL})},Nt=Ye.anchors.concat(ue!=="initial"?J:[]);return Nt.forEach(Ie=>Ie.addEventListener("scroll",It)),()=>Nt.forEach(Ie=>Ie.removeEventListener("scroll",It))},[X,Ye,Re,I,ue,Ge]);const No=!!L&&L.overflowAmt>0;A.useEffect(()=>{if(No||!Re||!c)return;const J=()=>sl(Ge),De=c.current;return De.addEventListener("scroll",J),()=>De.removeEventListener("scroll",J)},[Re,No,c,Ge]),A.useEffect(()=>{if(!Re||typeof ResizeObserver!="function"||Me==="initial")return;const J=[],De=new ResizeObserver(Ie=>Ie.forEach(({target:Ro})=>{J.indexOf(Ro)<0?J.push(Ro):Sr.flushSync(()=>{Ge(),H()})})),It={box:"border-box"};De.observe(Ke.current,It);const Nt=s==null?void 0:s.current;return Nt&&De.observe(Nt,It),()=>De.disconnect()},[Re,Me,s,Ge]),A.useEffect(()=>{if(!Re){Qe(Se.RESET),wn||O();return}const{position:J,alwaysUpdate:De}=w||{},It=()=>{J===ll.FIRST?Qe(Se.FIRST):J===ll.LAST?Qe(Se.LAST):J>=-1&&Qe(Se.SET_INDEX,void 0,J)};if(De)It();else if(m){const Nt=setTimeout(()=>{const Ie=Ke.current;Ie&&!Ie.contains(document.activeElement)&&(Ie.focus(ul),It())},Po?170:100);return()=>clearTimeout(Nt)}},[Re,Po,wn,m,w,Qe]);const uh=A.useMemo(()=>({isParentOpen:Re,submenuCtx:F,dispatch:Qe,updateItems:Ut}),[Re,F,Qe,Ut]);let ys,gs;L&&(p?gs=L.overflowAmt:ys=L.height);const ch=A.useMemo(()=>({reposSubmenu:b,submenuCtx:F,overflow:S,overflowAmt:gs,parentMenuRef:Ke,parentDir:j}),[b,F,S,gs,j]),dh=ys>=0?{maxHeight:ys,overflow:S}:void 0,wu=A.useMemo(()=>({state:f,align:d,dir:j}),[f,d,j]),fh=A.useMemo(()=>({dir:j}),[j]),ph=Er({block:dr,element:y0,modifiers:fh,className:o.className}),xu=k.jsxs("ul",{role:"menu","aria-label":e,...hu(E),...hs({onPointerEnter:fe==null?void 0:fe.off,onPointerMove:Pt,onPointerLeave:xn,onKeyDown:Su,onAnimationEnd:kt},R),ref:yu(u,Ke),className:Er({block:dr,modifiers:wu,className:t}),style:{...n,...dh,margin:0,display:f==="closed"?"none":void 0,position:Zc,left:M.x,top:M.y},children:[r&&k.jsx("li",{"aria-hidden":!0,...o,className:ph,style:{display:"block",position:Zc,left:N.x,top:N.y,...o.style},ref:Sn}),k.jsx(al.Provider,{value:ch,children:k.jsx(mu.Provider,{value:uh,children:k.jsx(Qp.Provider,{value:pt,children:St(z,wu)})})})]});return l?k.jsx(w0,{...l,isOpen:Re,children:xu}):xu},gu=A.forwardRef(function({"aria-label":t,className:n,containerProps:r,initialMounted:o,unmountOnClose:i,transition:s,transitionTimeout:a,boundingBoxRef:l,boundingBoxPadding:u,reposition:c="auto",submenuOpenDelay:d=300,submenuCloseDelay:h=150,viewScroll:v="initial",portal:S,theming:p,onItemClick:x,...m},f){const g=A.useRef(null),E=A.useRef({}),{anchorRef:w,state:y,onClose:C}=m,z=A.useMemo(()=>({initialMounted:o,unmountOnClose:i,transition:s,transitionTimeout:a,boundingBoxRef:l,boundingBoxPadding:u,rootMenuRef:g,rootAnchorRef:w,scrollNodesRef:E,reposition:c,viewScroll:v,submenuOpenDelay:d,submenuCloseDelay:h}),[o,i,s,a,w,l,u,c,v,d,h]),I=A.useMemo(()=>({handleClick(R,M){R.stopPropagation||St(x,R);let T=R.keepOpen;T===void 0&&(T=M&&R.key===Je.SPACE),T||St(C,{value:R.value,key:R.key,reason:Ao.CLICK})},handleClose(R){St(C,{key:R,reason:Ao.CLICK})}}),[x,C]);if(!y)return null;const _=k.jsx(ms.Provider,{value:z,children:k.jsx(Yp.Provider,{value:I,children:k.jsx(Jp,{...m,ariaLabel:t||"Menu",externalRef:f,containerRef:g,containerProps:{className:n,containerRef:g,containerProps:r,theming:p,transition:s,onClose:C}})})});return S===!0&&typeof document<"u"?Sr.createPortal(_,document.body):S?S.target?Sr.createPortal(_,S.target):S.stablePosition?null:_:_}),cl=0,dl=1,Bi=2,Wi=3,Ki=4,j0=5,Zp=6,T0=["preEnter","entering","entered","preExit","exiting","exited","unmounted"],qp=e=>({_s:e,status:T0[e],isEnter:e<Wi,isMounted:e!==Zp,isResolved:e===Bi||e>Ki}),fl=e=>e?Zp:j0,P0=(e,t)=>{switch(e){case dl:case cl:return Bi;case Ki:case Wi:return fl(t)}},N0=e=>typeof e=="object"?[e.enter,e.exit]:[e,e],R0=(e,t)=>setTimeout(()=>{isNaN(document.body.offsetTop)||e(t+1)},0),nd=(e,t,n,r,o)=>{clearTimeout(r.current);const i=qp(e);t(i),n.current=i,o&&o({current:i})},D0=({enter:e=!0,exit:t=!0,preEnter:n,preExit:r,timeout:o,initialEntered:i,mountOnEnter:s,unmountOnExit:a,onStateChange:l}={})=>{const[u,c]=A.useState(()=>qp(i?Bi:fl(s))),d=A.useRef(u),h=A.useRef(),[v,S]=N0(o),p=A.useCallback(()=>{const m=P0(d.current._s,a);m&&nd(m,c,d,h,l)},[l,a]),x=A.useCallback(m=>{const f=E=>{switch(nd(E,c,d,h,l),E){case dl:v>=0&&(h.current=setTimeout(p,v));break;case Ki:S>=0&&(h.current=setTimeout(p,S));break;case cl:case Wi:h.current=R0(f,E);break}},g=d.current.isEnter;typeof m!="boolean"&&(m=!g),m?!g&&f(e?n?cl:dl:Bi):g&&f(t?r?Wi:Ki:fl(a))},[p,l,e,t,n,r,v,S,a]);return[u,x,p]},L0=({initialOpen:e,initialMounted:t,unmountOnClose:n,transition:r,transitionTimeout:o=500,onMenuChange:i}={})=>{const s=Eo(r,"open"),a=Eo(r,"close"),[{status:l},u,c]=D0({initialEntered:e,mountOnEnter:!t,unmountOnExit:n,timeout:o,enter:s,exit:a,onStateChange:A.useCallback(({current:{isEnter:d,isResolved:h}})=>{!i||d&&s&&h||!d&&a&&h||i({open:d})},[i,s,a])});return[{state:S0[l],endTransition:c},u]},O0=e=>{const[t,n]=L0(e),[r,o]=A.useState(),i=(s,a)=>{o({position:s,alwaysUpdate:a}),n(!0)};return[{menuItemFocus:r,...t},n,i]},eh=(e,t)=>{const n=A.memo(t),r=A.forwardRef((o,i)=>{const s=A.useRef(null);return k.jsx(n,{...o,itemRef:s,externalRef:i,isHovering:A.useContext(Qp)===s.current})});return r.displayName=`WithHovering(${e})`,r},th=e=>{const[t,n]=A.useState(!1);return A.useEffect(()=>{!e&&n(!1)},[e]),[t,()=>!t&&n(!0),()=>n(!1)]},nh=(e,t,n)=>{mi(()=>{if(e)return;const r=t.current;return n(r,!0),()=>{n(r)}},[e,t,n])},$0=eh("SubMenu",function({"aria-label":t,className:n,disabled:r,direction:o,label:i,openTrigger:s,onMenuChange:a,isHovering:l,instanceRef:u,itemRef:c,captureFocus:d,repositionFlag:h,itemProps:v={},...S}){const p=A.useContext(ms),{rootMenuRef:x,submenuOpenDelay:m,submenuCloseDelay:f}=p,{parentMenuRef:g,parentDir:E,overflow:w}=A.useContext(al),{isParentOpen:y,submenuCtx:C,dispatch:z,updateItems:I}=A.useContext(mu),_=w!=="visible",[R,M,T]=O0({...p,onMenuChange:a}),[N,D,L]=th(l),{state:O}=R,j=!!r,U=Wp(O),F=A.useRef(null),[b]=A.useState({v:0}),H=()=>{C.off(),b.v&&(clearTimeout(b.v),b.v=0)},G=(...ce)=>{H(),q(),!j&&T(...ce)},q=()=>!l&&!j&&z(Se.SET,c.current),K=ce=>{q(),s||(b.v=setTimeout(()=>sl(G),Math.max(ce,0)))},ee=ce=>{j||(ce.stopPropagation(),D(),!(b.v||U)&&C.on(f,()=>K(m-f),()=>K(m)))},X=()=>{L(),H(),U||z(Se.UNSET,c.current)},ye=ce=>{if(l)switch(ce.key){case Je.ENTER:ce.preventDefault();case Je.SPACE:case Je.RIGHT:s!=="none"&&G(ll.FIRST)}},Me=ce=>{let pt=!1;switch(ce.key){case Je.LEFT:U&&(c.current.focus(),M(!1),pt=!0);break;case Je.RIGHT:U||(pt=!0);break}pt&&(ce.preventDefault(),ce.stopPropagation())};nh(j,c,I),A.useEffect(()=>C.toggle(U),[C,U]),A.useEffect(()=>()=>{clearTimeout(b.v),C.toggle(!1)},[b,C]),A.useEffect(()=>{l&&y?c.current.focus():M(!1)},[l,y,M,c]),A.useImperativeHandle(u,()=>({openMenu:(...ce)=>{y&&G(...ce)},closeMenu:()=>{U&&(c.current.focus(),M(!1))}}));const ue=A.useMemo(()=>({open:U,hover:N||l,disabled:j,submenu:!0}),[U,l,j,N]),{ref:ie,className:fe,...Ne}=v,Ke=hs({onPointerEnter:C.off,onPointerMove:ee,onPointerLeave:X,onKeyDown:ye,onClick:()=>s!=="none"&&G()},Ne),Sn=()=>{const ce=k.jsx(Jp,{...S,...R,ariaLabel:t||(typeof i=="string"?i:"Submenu"),anchorRef:c,containerRef:_?x:F,direction:o||(E==="right"||E==="left"?E:"right"),parentScrollingRef:_&&g,isDisabled:j}),pt=x.current;return _&&pt?Sr.createPortal(ce,pt):ce};return k.jsxs("li",{className:Er({block:dr,element:g0,className:n}),style:{position:"relative"},role:Gp,ref:F,onKeyDown:Me,children:[k.jsx("div",{role:Xp,"aria-haspopup":!0,"aria-expanded":U,...hu(j,l),...Ke,ref:yu(ie,c),className:Er({block:dr,element:Kp,modifiers:ue,className:fe}),children:A.useMemo(()=>St(i,ue),[i,ue])}),O&&Sn()]})}),U0=(e,t,n,r)=>{const[o,i,s]=th(n),{submenuCloseDelay:a}=A.useContext(ms),{isParentOpen:l,submenuCtx:u,dispatch:c,updateItems:d}=A.useContext(mu),h=()=>{!n&&!r&&c(Se.SET,e.current)},v=()=>{!r&&c(Se.UNSET,e.current)},S=m=>{n&&!m.currentTarget.contains(m.relatedTarget)&&v()},p=m=>{r||(m.stopPropagation(),i(),u.on(a,h,h))},x=(m,f)=>{s(),u.off(),!f&&v()};return nh(r,e,d),A.useEffect(()=>{n&&l&&t.current&&t.current.focus()},[t,n,l]),{mouseOver:o,setHover:h,onBlur:S,onPointerMove:p,onPointerLeave:x}},Qr=eh("MenuItem",function({className:t,value:n,href:r,type:o,checked:i,disabled:s,children:a,onClick:l,isHovering:u,itemRef:c,externalRef:d,...h}){const v=!!s,{mouseOver:S,setHover:p,...x}=U0(c,c,u,v),m=A.useContext(Yp),f=A.useContext(v0),g=o==="radio",E=o==="checkbox",w=!!r&&!v&&!g&&!E,y=g?f.value===n:E?!!i:!1,C=M=>{if(v){M.stopPropagation(),M.preventDefault();return}const T={value:n,syntheticEvent:M};M.key!==void 0&&(T.key=M.key),E&&(T.checked=!y),g&&(T.name=f.name),St(l,T),g&&St(f.onRadioChange,T),m.handleClick(T,E||g)},z=M=>{if(u)switch(M.key){case Je.ENTER:M.preventDefault();case Je.SPACE:w?c.current.click():C(M)}},I=A.useMemo(()=>({type:o,disabled:v,hover:S||u,checked:y,anchor:w}),[o,v,S,u,y,w]),_=hs({...x,onPointerDown:p,onKeyDown:z,onClick:C},h),R={role:g?"menuitemradio":E?"menuitemcheckbox":Xp,"aria-checked":g||E?y:void 0,...hu(v,u),..._,ref:yu(d,c),className:Er({block:dr,element:Kp,modifiers:I,className:t}),children:A.useMemo(()=>St(a,I),[a,I])};return w?k.jsx("li",{role:Gp,children:k.jsx("a",{href:r,...R})}):k.jsx("li",{...R})}),rd="karmyc_custom_layouts",F0=()=>{var E;du();const[e,t]=A.useState(!1),[n,r]=A.useState("closed"),[o,i]=A.useState({x:0,y:0}),s=P(),a=((E=s.options)==null?void 0:E.builtInLayouts)||[],[l,u]=A.useState(()=>{const w=localStorage.getItem(rd);return w?JSON.parse(w):[]});A.useEffect(()=>{localStorage.setItem(rd,JSON.stringify(l))},[l]);const c=A.useMemo(()=>(console.log("Computing all presets:",{builtInLayouts:a,userPresets:l}),[...a,...l]),[a,l]),d=A.useCallback(w=>{u(w),P.setState(y=>({...y,layout_preset:w}))},[]),h=A.useCallback(w=>{const y=JSON.stringify(w,null,2),C="data:application/json;charset=utf-8,"+encodeURIComponent(y),z=`${w.name}.json`,I=document.createElement("a");I.setAttribute("href",C),I.setAttribute("download",z),I.click()},[]),v=A.useCallback(()=>{const w=document.createElement("input");w.type="file",w.accept=".json",w.onchange=y=>{var I;const C=(I=y.target.files)==null?void 0:I[0];if(!C)return;const z=new FileReader;z.onload=_=>{var R;try{const T={...JSON.parse((R=_.target)==null?void 0:R.result),id:Date.now().toString(),isBuiltIn:!1};d([...l,T])}catch(M){console.error("Erreur lors de l'import du preset:",M)}},z.readAsText(C)},w.click()},[l,d]),S=A.useCallback(w=>{const y=prompt("Nouveau nom du preset:",w.name);y&&y!==w.name&&d(l.map(C=>C.id===w.id?{...C,name:y}:C))},[l,d]),p=A.useCallback(w=>{confirm(`Voulez-vous vraiment supprimer le preset "${w.name}" ?`)&&d(l.filter(y=>y.id!==w.id))},[l,d]),x=A.useCallback(()=>{const w=s.activeScreenId,y=s.screens[w];if(!y)return;const C=prompt("Nom du nouveau preset:");if(!C)return;const z={id:Date.now().toString(),name:C,config:{_id:y.areas._id,rootId:y.areas.rootId,errors:[],activeAreaId:y.areas.activeAreaId,joinPreview:null,layout:y.areas.layout,areas:y.areas.areas,viewports:y.areas.viewports,areaToOpen:null,lastSplitResultData:null,lastLeadAreaId:y.areas.lastLeadAreaId},isBuiltIn:!1};d([...l,z])},[s,l,d]),m=A.useCallback(w=>{const y=c.find(z=>z.id===w);if(!y)return;const C=s.activeScreenId;C&&P.setState(z=>{const I=z.screens[C];I&&(I.areas={_id:y.config._id,rootId:y.config.rootId,errors:[],activeAreaId:y.config.activeAreaId,joinPreview:null,layout:{...y.config.layout},areas:{...y.config.areas},viewports:{...y.config.viewports},areaToOpen:null,lastSplitResultData:null,lastLeadAreaId:y.config.lastLeadAreaId},z.lastUpdated=Date.now())})},[s,c]);A.useEffect(()=>(Q.registerActionHandler("layout.import",v),Q.registerActionHandler("layout.export",h),Q.registerActionHandler("layout.rename",S),Q.registerActionHandler("layout.delete",p),Q.registerActionHandler("layout.save",x),Q.registerActionHandler("layout.apply",m),()=>{Q.unregisterActionHandler("layout.import"),Q.unregisterActionHandler("layout.export"),Q.unregisterActionHandler("layout.rename"),Q.unregisterActionHandler("layout.delete"),Q.unregisterActionHandler("layout.save"),Q.unregisterActionHandler("layout.apply")}),[v,h,S,p,x,m]);const f=A.useCallback(w=>{w.preventDefault(),i({x:w.clientX,y:w.clientY}),r("open")},[]),g=A.useCallback(()=>{r("closed")},[]);return k.jsxs(k.Fragment,{children:[k.jsx("style",{children:`
                    .layout-context-menu {
                        z-index: 9999 !important;
                    }
                    .preset-item {
                        display: flex;
                        align-items: center;
                        justify-content: space-between;
                        width: 100%;
                        padding: 4px 8px;
                    }
                    .preset-actions {
                        display: flex;
                        gap: 4px;
                    }
                    .preset-actions button {
                        background: none;
                        border: none;
                        padding: 4px;
                        cursor: pointer;
                        color: inherit;
                    }
                    .preset-actions button:hover {
                        background: rgba(255, 255, 255, 0.1);
                        border-radius: 4px;
                    }
                `}),k.jsx("div",{onContextMenu:f,onClick:f,onMouseEnter:()=>t(!0),onMouseLeave:()=>t(!1),style:{cursor:"pointer",padding:"8px",color:"white",display:"flex",alignItems:"center",gap:"8px",userSelect:"none",backgroundColor:e?"rgba(255, 255, 255, 0.1)":"transparent",transition:"background-color 0.2s ease"},children:k.jsx(Iv,{size:26})}),k.jsxs(gu,{anchorPoint:o,state:n,onClose:g,menuClassName:"layout-context-menu",children:[a.map(w=>k.jsx(Qr,{onClick:()=>m(w.id),children:w.name},w.id)),l.map(w=>k.jsx(Qr,{onClick:()=>m(w.id),children:k.jsxs("div",{className:"preset-item",children:[k.jsx("span",{children:w.name}),k.jsxs("div",{className:"preset-actions",children:[k.jsx("button",{onClick:y=>{y.stopPropagation(),S(w)},children:k.jsx(Up,{size:16})}),k.jsx("button",{onClick:y=>{y.stopPropagation(),p(w)},children:k.jsx(Dv,{size:16})}),k.jsx("button",{onClick:y=>{y.stopPropagation(),h(w)},children:k.jsx(Lp,{size:16})})]})]})},w.id)),k.jsx("hr",{}),k.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"4px"},children:[k.jsxs(Qr,{onClick:x,children:[k.jsx(pu,{size:16,style:{marginRight:"8px"}}),"Nouveau"]}),k.jsxs(Qr,{onClick:v,children:[k.jsx(Op,{size:16,style:{marginRight:"8px"}}),"Importer"]})]})]})]})};function rh(e,t){A.useEffect(()=>{const n=t.map(r=>({...r,areaType:r.isGlobal?void 0:e}));return Ir.registerShortcuts(e,n),()=>{Ir.unregisterShortcuts(e)}},[e,t])}const b0=()=>k.jsx("div",{className:"empty-area-message",children:k.jsx("span",{className:"empty-area-message__text",children:"No area initialized"})});function vn(e,t,n,r){A.useEffect(()=>{if(Y.registerComponent(e,t),Y.registerInitialState(e,n),r){if(r.displayName&&Y.registerDisplayName(e,r.displayName),r.icon&&Y.registerIcon(e,r.icon),r.defaultSize&&Y.registerDefaultSize(e,r.defaultSize),r.supportedActions)Y.registerSupportedActions(e,r.supportedActions);else{const o={"text-note":["edit","delete","move","resize"],"color-picker":["pick","delete","move","resize"],"image-viewer":["view","delete","move","resize"],"images-gallery":["view","delete","move","resize","add"]};o[e]&&Y.registerSupportedActions(e,o[e])}r.role&&(Y._roleMap=Y._roleMap||{},Y._roleMap[e]=r.role)}return()=>{Y.unregisterAreaType(e)}},[e,t,n,r,r==null?void 0:r.displayName,r==null?void 0:r.defaultSize,r==null?void 0:r.supportedActions,r==null?void 0:r.icon,r==null?void 0:r.role])}const V0=()=>{const{updateArea:e}=P.getState(),{registerComponent:t}=qe("demo-area","top-inner"),n=r=>{const o=r.areaId;o&&e({id:o,type:"demo-area",state:Y.getInitialState("demo-area")})};return A.useMemo(()=>{t(()=>k.jsx("div",{children:"Top Demo Area center slot"}),{name:"topOuterSlot",type:"menu"},{order:990,width:"auto",alignment:"center"})},[t]),rh("demo-area",[{key:"S",modifierKeys:["Control"],name:"Save Demo Area",fn:r=>{console.log(`Saving demo area ${r}`)},history:!0,isGlobal:!0},{key:"R",name:"Reset Demo Area",fn:r=>{console.log(`Resetting demo area ${r}`),e({id:r,type:"demo-area",state:Y.getInitialState("demo-area")})}}]),vn("demo-area",b0,{},{displayName:"Demo area",defaultSize:{width:300,height:200},role:oe.LEAD,icon:fu}),Ue("area.create-demo-area",n),null},H0=""+new URL("karmyc_logo-DE65axty.svg",import.meta.url).href,B0=()=>{const{updateArea:e}=P.getState(),t=n=>{const r=n.areaId;r&&e({id:r,type:"logo-karmyc-area",state:Y.getInitialState("logo-karmyc-area")})};return rh("logo-karmyc-area",[{key:"L",modifierKeys:["Control"],name:"Toggle Logo Size",fn:n=>{console.log(`Toggling logo size for area ${n} in Karmyc Core DEMO!!`)}},{key:"H",name:"Hide/Show Logo",fn:n=>{console.log(`Toggling logo visibility for area ${n}  in Karmyc Core DEMO 2!!`)}}]),vn("logo-karmyc-area",()=>k.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"8px",width:"100%",height:"100%"},children:[k.jsx("img",{src:H0,style:{width:"75%"}}),k.jsx("strong",{children:"Karmyc core Demo"})]}),{},{displayName:"Logo Karmyc",defaultSize:{width:300,height:200},role:oe.SELF,icon:yv}),Ue("area.create-logo-karmyc-area",t),null},W0=()=>{const e=Ir.getAllShortcuts(),t=e.filter(o=>o.isGlobal),r=e.filter(o=>!o.isGlobal).reduce((o,i)=>{const s=i.areaType||"Unknown";return o[s]||(o[s]=[]),o[s].push(i),o},{});return k.jsxs("div",{style:{padding:"15px",color:"white",height:"100%",overflow:"auto"},children:[k.jsxs("div",{style:{marginBottom:"30px"},children:[k.jsx("h3",{style:{borderBottom:"1px solid rgba(255,255,255,0.2)",paddingBottom:"10px",marginBottom:"15px"},children:"Raccourcis Globaux"}),k.jsx("div",{style:{display:"grid",gap:"5px"},children:t.map((o,i)=>{var s;return k.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"4px"},children:[k.jsx("span",{children:o.name}),k.jsxs("span",{style:{backgroundColor:"rgba(255,255,255,0.2)",padding:"2px 8px",borderRadius:"4px",fontFamily:"monospace"},children:[(s=o.modifierKeys)==null?void 0:s.map(a=>a).join(" + ")," + ",o.key]})]},i)})})]}),Object.entries(r).map(([o,i])=>k.jsxs("div",{style:{marginBottom:"30px"},children:[k.jsx("h3",{style:{borderBottom:"1px solid rgba(255,255,255,0.2)",paddingBottom:"10px",marginBottom:"15px"},children:o}),k.jsx("div",{style:{display:"grid",gap:"10px"},children:i.map((s,a)=>{var l;return k.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"4px"},children:[k.jsx("span",{children:s.name}),k.jsxs("span",{style:{backgroundColor:"rgba(255,255,255,0.2)",padding:"2px 8px",borderRadius:"4px",fontFamily:"monospace"},children:[(l=s.modifierKeys)==null?void 0:l.map(u=>u).join(" + ")," + ",s.key]})]},a)})})]},o))]})},K0=()=>{const{updateArea:e}=P.getState(),{registerComponent:t}=qe("demo-area","top-inner"),n=r=>{const o=r.areaId;o&&e({id:o,type:"keyboard-shortcuts-area",state:Y.getInitialState("keyboard-shortcuts-area")})};return A.useMemo(()=>{t(()=>k.jsx("div",{children:"Top Demo Area center slot"}),{name:"topOuterSlot",type:"menu"},{order:990,width:"auto",alignment:"center"})},[t]),vn("keyboard-shortcuts-area",W0,{},{displayName:"Raccourcis Clavier",defaultSize:{width:400,height:600},role:oe.SELF,icon:hv}),Ue("area.create-keyboard-shortcuts-area",n),null};function oh(e,t={}){var h,v,S,p,x,m;const{enabled:n=!0,maxHistorySize:r=50}=t,o=B(f=>f.undoSharedState),i=B(f=>f.redoSharedState),s=B(f=>e?f.spaces[e]:null),a=!!((v=(h=s==null?void 0:s.sharedState)==null?void 0:h.pastDiffs)!=null&&v.length),l=!!((p=(S=s==null?void 0:s.sharedState)==null?void 0:S.futureDiffs)!=null&&p.length),u=A.useCallback(()=>{!n||!e||!a||o(e)},[n,e,a,o]),c=A.useCallback(()=>{!n||!e||!l||i(e)},[n,e,l,i]),d=A.useCallback(()=>{!n||!e||B.setState(f=>{const g=f.spaces[e];g&&(g.sharedState.pastDiffs=[],g.sharedState.futureDiffs=[])})},[n,e]);return{canUndo:a,canRedo:l,undo:u,redo:c,clearHistory:d,pastDiffs:((x=s==null?void 0:s.sharedState)==null?void 0:x.pastDiffs)??[],futureDiffs:((m=s==null?void 0:s.sharedState)==null?void 0:m.futureDiffs)??[]}}const Q0=({id:e,viewport:t})=>{const{activeSpaceId:n}=bn(),{pastDiffs:r,futureDiffs:o,canUndo:i,canRedo:s,undo:a,redo:l}=oh(n),u=A.useCallback(c=>new Date(c).toLocaleTimeString(),[]);return k.jsxs("div",{style:{width:t.width,height:t.height,display:"flex",flexDirection:"column",background:"#1a1a1a",color:"white",padding:"16px",gap:"16px"},children:[k.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #333",paddingBottom:"8px"},children:[k.jsxs("h3",{style:{margin:0,display:"flex",alignItems:"center",gap:"8px"},children:[k.jsx(ev,{size:20}),"Historique"]}),k.jsxs("div",{style:{display:"flex",gap:"8px"},children:[k.jsxs("button",{onClick:a,disabled:!i,style:{padding:"4px 8px",background:i?"#333":"#222",border:"none",borderRadius:"4px",color:"white",cursor:i?"pointer":"not-allowed",display:"flex",alignItems:"center",gap:"4px"},children:[k.jsx(jv,{size:16}),"Annuler"]}),k.jsxs("button",{onClick:l,disabled:!s,style:{padding:"4px 8px",background:s?"#333":"#222",border:"none",borderRadius:"4px",color:"white",cursor:s?"pointer":"not-allowed",display:"flex",alignItems:"center",gap:"4px"},children:[k.jsx(Pv,{size:16}),"Rétablir"]})]})]}),k.jsxs("div",{style:{flex:1,overflowY:"auto",display:"flex",flexDirection:"column",gap:"8px"},children:[o.length>0&&k.jsxs("div",{style:{marginBottom:"16px"},children:[k.jsx("h4",{style:{color:"#666",margin:"0 0 8px 0"},children:"Actions futures"}),o.map((c,d)=>k.jsxs("div",{style:{padding:"8px",background:"#222",borderRadius:"4px",fontSize:"14px"},children:[k.jsx("div",{style:{color:"#888"},children:u(c.timestamp)}),k.jsx("div",{style:{marginTop:"4px"},children:rl(c.actionType,c.payload)})]},`future-${c.timestamp}`))]}),r.length>0?r.map((c,d)=>k.jsxs("div",{style:{padding:"8px",background:"#222",borderRadius:"4px",fontSize:"14px",cursor:"pointer"},onMouseEnter:h=>{h.currentTarget.style.background="#2a2a2a"},onMouseLeave:h=>{h.currentTarget.style.background="#222"},onClick:()=>{},children:[k.jsx("div",{style:{color:"#888"},children:u(c.timestamp)}),k.jsx("div",{style:{marginTop:"4px"},children:rl(c.actionType,c.payload)})]},`past-${c.timestamp}`)):k.jsx("div",{style:{color:"#666",textAlign:"center",padding:"32px",background:"#222",borderRadius:"4px"},children:"Aucune action dans l'historique"})]})]})},Y0=()=>{const{updateArea:e}=P.getState(),t=n=>{const r=n.areaId;r&&e({id:r,type:"history-area",state:Y.getInitialState("history-area")})};return vn("history-area",Q0,{},{displayName:"History",defaultSize:{width:300,height:200},role:oe.FOLLOW,icon:fu}),Ue("area.create-history-area",t),null},ih=e=>{const t=P(I=>I.setAreaToOpen),n=P(I=>I.updateAreaToOpenPosition),r=P(I=>I.finalizeAreaPlacement),o=P(I=>I.cleanupTemporaryStates),i=P(I=>I.updateLayout),s=P(I=>{var _;return(_=I.screens[I.activeScreenId])==null?void 0:_.areas.layout}),a=P(I=>{var _;return(_=I.screens[I.activeScreenId])==null?void 0:_.areas.rootId}),l=P(I=>{var _;return(_=I.screens[I.activeScreenId])==null?void 0:_.areas.areas}),u=P(I=>{var _;return(_=I.screens[I.activeScreenId])==null?void 0:_.areas.areaToOpen}),c=P(I=>{var _;return(_=I.screens[I.activeScreenId])==null?void 0:_.areas.viewports}),d=A.useRef(null),h=A.useRef(performance.now()),v=A.useRef(void 0),S=A.useRef(!1),p=A.useMemo(()=>ve.new(300,200),[]),x=A.useMemo(()=>{if(!u||!a||!c||Object.keys(c).length===0)return null;const I=ve.new(u.position.x,u.position.y);return _p(I,{layout:s},c,p)},[u==null?void 0:u.position.x,u==null?void 0:u.position.y,s,a,l,c,p]),m=A.useMemo(()=>x?c[x]:null,[x,c]),f=A.useMemo(()=>{if(!u||!m)return"stack";const I=ve.new(u.position.x,u.position.y);return Mp(m,I)},[m,u==null?void 0:u.position.x,u==null?void 0:u.position.y,u]),g=A.useCallback((I,_)=>{S.current||(S.current=!0,v.current=requestAnimationFrame(()=>{n({x:I,y:_}),S.current=!1}))},[n]),E=A.useCallback(I=>{I.preventDefault(),g(I.clientX,I.clientY)},[g]),w=A.useCallback(I=>{if(!(e!=null&&e.type)||!(e!=null&&e.id)||!(e!=null&&e.state)){console.warn("useAreaDragAndDrop - Missing required params for handleDragStart");return}const{type:_,id:R,state:M}=e;document.body.style.userSelect="none";const T=I.currentTarget.getBoundingClientRect();d.current={startX:I.clientX-T.left,startY:I.clientY-T.top,sourceId:R},h.current=performance.now();const N=document.createElement("div");N.style.width="1px",N.style.height="1px",N.style.position="fixed",N.style.top="-1px",N.style.left="-1px",N.style.opacity="0.01",N.style.pointerEvents="none",document.body.appendChild(N),I.dataTransfer.effectAllowed="move",I.dataTransfer.setData("text/plain",JSON.stringify({type:"menubar",areaType:_,areaId:R})),I.dataTransfer.setDragImage(N,0,0),requestAnimationFrame(()=>{document.body.contains(N)&&document.body.removeChild(N),t({position:{x:I.clientX,y:I.clientY},area:{type:_,state:{...M,sourceId:R}}})}),document.addEventListener("dragover",E)},[e,t,E]),y=A.useCallback(I=>{I.dataTransfer.types.includes("karmyc/tab-drag-source")||(I.preventDefault(),I.dataTransfer.dropEffect="move")},[]),C=A.useCallback(I=>{let _;try{const N=I.dataTransfer.getData("text/plain");N&&(_=JSON.parse(N))}catch(N){console.warn("[DropZone] handleDrop - Could not parse drag data",N),o();return}if(_&&_.type==="tab"){console.warn('[DropZone] handleDrop - Received "tab" type drag, assuming handled by AreaTabs. Aborting here.'),o();return}if(I.preventDefault(),I.stopPropagation(),!_){console.warn("[DropZone] handleDrop - Invalid or missing source data type after tab check"),o();return}const R=_.areaId;let M=null;const T=document.elementsFromPoint(I.clientX,I.clientY);for(const N of T){if(N.classList.contains("global-drag-overlay")||N.classList.contains("areaToOpenContainer"))continue;const D=N.closest("[data-areaid]");if(D){const L=D.dataset.areaid;if(L&&L!=="-1"&&L!==R&&!Object.values(s).some(j=>j.type==="area_row"&&j.orientation==="stack"&&j.areas.some(U=>U.id===L))){M=L;break}}}if(!M){console.warn("[DropZone] handleDrop: no targetAreaId found"),o();return}try{if(g(I.clientX,I.clientY),Object.values(s).some(D=>D.type==="area_row"&&D.orientation==="stack"&&D.id===M)&&f==="stack"){const D=Object.values(s).find(L=>L.type==="area_row"&&L.orientation==="stack"&&L.id===M);if(D){const L=Object.values(s).find(j=>j.type==="area_row"&&j.areas.some(U=>U.id===R));if(L){const j=L.areas.filter(b=>b.id!==R),U=j.reduce((b,H)=>b+H.size,0),F=j.map(b=>({...b,size:U>0?b.size/U:1/j.length}));i({...L,areas:F})}const O={...D,areas:[...D.areas,{id:R,size:1}]};i(O),P.getState().updateArea({id:R,isLocked:!0}),o()}}else f==="stack"&&(P.getState().updateArea({id:R,isLocked:!0}),P.getState().updateArea({id:M,isLocked:!0})),r({targetId:M,placement:f}),o()}catch(N){console.error("[DropZone] handleDrop - Error during finalization:",N),o()}},[o,r,g,f,s,i]),z=A.useCallback(I=>{document.body.style.userSelect="",!(!d.current||(v.current&&cancelAnimationFrame(v.current),performance.now()-h.current<100))&&(d.current=null,o(),document.removeEventListener("dragover",E))},[o,E]);return A.useEffect(()=>()=>{v.current&&cancelAnimationFrame(v.current)},[]),{handleDragStart:w,handleDragOver:y,handleDragEnd:z,handleDrop:C,areaToOpenTargetId:x,areaToOpenTargetViewport:m,calculatedPlacement:f}},Ft={spaceSharedState:{strokeWidth:3,color:"#000000"}},G0=({id:e,viewport:t})=>{const n=P(M=>{var N;const T=(N=M.screens[M.activeScreenId])==null?void 0:N.areas;return T?T.areas[e]:void 0}),r=(n==null?void 0:n.spaceId)??null,{updateSharedState:o}=bn();Ue("draw/addLine",M=>{var L,O;const{line:T,spaceId:N}=M;if(!N)return;const D=((O=(L=B.getState().spaces[N])==null?void 0:L.sharedState)==null?void 0:O.lines)??[];o(N,{lines:[...D,T],actionType:"draw/addLine",payload:{line:T}})},{history:{enabled:!0,type:"draw/addLine",getDescription:()=>"Ajout d'une ligne",getPayload:M=>({line:M.line})}}),Ue("draw/updateStrokeWidth",M=>{var L,O;const{width:T,spaceId:N}=M;if(!N)return;const D=(O=(L=B.getState().spaces[N])==null?void 0:L.sharedState)==null?void 0:O.strokeWidth;o(N,{strokeWidth:T,actionType:"draw/updateStrokeWidth",payload:{oldValue:D,newValue:T}})},{history:{enabled:!0,type:"draw/updateStrokeWidth",getDescription:M=>`Modification de l'épaisseur : ${M.oldWidth} → ${M.width}`,getPayload:M=>({oldValue:M.oldWidth,newValue:M.width})}}),Ue("draw/clearCanvas",M=>{var D,L;const{spaceId:T}=M;if(!T)return;const N=((L=(D=B.getState().spaces[T])==null?void 0:D.sharedState)==null?void 0:L.lines)??[];o(T,{lines:[],actionType:"draw/clearCanvas",payload:{oldValue:N,newValue:[]}})},{history:{enabled:!0,type:"draw/clearCanvas",getDescription:()=>"Effacement du dessin",getPayload:M=>{var T,N;return{oldValue:((N=(T=B.getState().spaces[M.spaceId])==null?void 0:T.sharedState)==null?void 0:N.lines)??[],newValue:[]}}}});const{canUndo:i,canRedo:s,undo:a,redo:l}=oh(r,{enabled:!0,maxHistorySize:50}),[u,c]=A.useState([]),[d,h]=A.useState(Ft.spaceSharedState.strokeWidth),[v,S]=A.useState(Ft.spaceSharedState.color),p=A.useRef(null),x=A.useCallback(M=>{var D,L;if(!r)return;const T=parseInt(M.target.value),N=(L=(D=B.getState().spaces[r])==null?void 0:D.sharedState)==null?void 0:L.strokeWidth;Q.executeAction("draw/updateStrokeWidth",{width:T,oldWidth:N,spaceId:r})},[r]),{registerComponent:m}=qe("draw-area","bottom-outer");A.useMemo(()=>{m(()=>{var N;const M=r?B.getState().spaces[r]:null,T=((N=M==null?void 0:M.sharedState)==null?void 0:N.strokeWidth)??Ft.spaceSharedState.strokeWidth;return k.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:"white"},children:[k.jsx(Av,{}),k.jsx("input",{ref:p,id:`stroke-width-${e}`,type:"range",min:"1",max:"20",value:T,onChange:x,style:{width:"100px",cursor:"pointer",WebkitAppearance:"none",appearance:"none",height:"4px",borderRadius:"2px",background:"#ffffff"},className:"custom-range"}),k.jsx("span",{children:T})]})},{name:"topOuterSlot",type:"menu"},{order:990,width:"auto",alignment:"right"})},[r,e,x]);const{registerComponent:f}=qe("draw-area","bottom-inner");A.useMemo(()=>{f(()=>k.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[k.jsx("button",{onClick:a,disabled:!i,children:k.jsx(Uv,{})}),k.jsx("button",{onClick:l,disabled:!s,children:k.jsx(Mv,{})}),k.jsx("button",{onClick:R,children:k.jsx(Jg,{})})]}),{name:"bottomInnerSlot",type:"menu"},{order:990,width:"auto",alignment:"center"})},[r,e,x,a,l,i,s]);const g=A.useRef(null),[E,w]=A.useState(!1),[y,C]=A.useState([]);A.useEffect(()=>{var N;if(!r){c([]),S(Ft.spaceSharedState.color),h(Ft.spaceSharedState.strokeWidth);return}const M=(N=B.getState().spaces[r])==null?void 0:N.sharedState;c((M==null?void 0:M.lines)??[]),S((M==null?void 0:M.color)??Ft.spaceSharedState.color),h((M==null?void 0:M.strokeWidth)??Ft.spaceSharedState.strokeWidth);const T=B.subscribe((D,L)=>{var U,F,b,H,G,q,K,ee,X;const O=D.spaces[r],j=L.spaces[r];((U=O==null?void 0:O.sharedState)==null?void 0:U.strokeWidth)!==((F=j==null?void 0:j.sharedState)==null?void 0:F.strokeWidth)&&h(((b=O==null?void 0:O.sharedState)==null?void 0:b.strokeWidth)??Ft.spaceSharedState.strokeWidth),((H=O==null?void 0:O.sharedState)==null?void 0:H.lines)!==((G=j==null?void 0:j.sharedState)==null?void 0:G.lines)&&c(((q=O==null?void 0:O.sharedState)==null?void 0:q.lines)??[]),((K=O==null?void 0:O.sharedState)==null?void 0:K.color)!==((ee=j==null?void 0:j.sharedState)==null?void 0:ee.color)&&S(((X=O==null?void 0:O.sharedState)==null?void 0:X.color)??Ft.spaceSharedState.color)});return()=>{T()}},[r]),A.useEffect(()=>{if(!g.current)return;const M=g.current,T=M.getContext("2d");if(!T)return;const N=Math.max(0,t.height-50);if(M.width=t.width,M.height=N,T.clearRect(0,0,M.width,M.height),!Array.isArray(u)){console.error(`[HistoryDrawingArea ${e}] Invalid drawingLines data detected (not an array):`,u);return}u.forEach((D,L)=>{if(!D||!Array.isArray(D.points)||D.points.length<1){console.warn(`[HistoryDrawingArea ${e}] Skipping invalid line data at index ${L}:`,D);return}if(!(D.points.length<2)){T.beginPath(),T.moveTo(D.points[0].x,D.points[0].y);for(let O=1;O<D.points.length;O++)D.points[O]&&T.lineTo(D.points[O].x,D.points[O].y);T.strokeStyle=D.color,T.lineWidth=D.width,T.lineCap="round",T.lineJoin="round",T.stroke()}})},[u,t.width,t.height,e]);const z=M=>{if(!g.current||!r)return;const N=g.current.getBoundingClientRect(),D=M.clientX-N.left,L=M.clientY-N.top;w(!0),C([{x:D,y:L}])},I=M=>{if(!E||!g.current||!r)return;const T=g.current,N=T.getBoundingClientRect(),D=M.clientX-N.left,L=M.clientY-N.top,O=[...y,{x:D,y:L}];C(O);const j=T.getContext("2d");if(!j||O.length<2)return;const U=O[O.length-2];j.beginPath(),j.moveTo(U.x,U.y),j.lineTo(D,L),j.strokeStyle=v,j.lineWidth=d,j.lineCap="round",j.lineJoin="round",j.stroke()},_=()=>{if(!E||y.length<2||!r){w(!1),C([]);return}w(!1);const M={id:`line-${Date.now()}`,points:y,color:v,width:d};Q.executeAction("draw/addLine",{line:M,spaceId:r}),C([])},R=A.useCallback(()=>{r&&Q.executeAction("draw/clearCanvas",{spaceId:r})},[r]);return k.jsx("div",{style:{width:t.width,height:t.height,display:"flex",flexDirection:"column",background:"#ffffff",borderRadius:"4px",overflow:"hidden"},children:k.jsx("canvas",{ref:g,onMouseDown:z,onMouseMove:I,onMouseUp:_,onMouseLeave:_,style:{display:"block"}})})},X0=()=>{const{updateArea:e}=P.getState(),t=n=>{const r=n.areaId;r&&e({id:r,type:"draw-area",state:Y.getInitialState("draw-area")})};return vn("draw-area",G0,{},{displayName:"Simple draw",defaultSize:{width:300,height:200},role:oe.LEAD,icon:fu}),Ue("area.create-draw-area",t),null},J0=({viewport:e})=>{const{activeSpaceId:t,createSpace:n,deleteSpace:r,setActive:o,updateSharedState:i,pilotMode:s,setPilotMode:a}=bn(),l=B().getAllSpaces(),u=Kr(P,f=>f.getAllAreas(),Wr),[c,d]=A.useState(""),[h,v]=A.useState("#1890ff"),S=A.useMemo(()=>{const f={};for(const g in l)f[g]=[];return Object.values(u).forEach(g=>{const E=g.spaceId;E&&f[E]&&f[E].push(g)}),f},[l,u]),p=A.useMemo(()=>{const f=[];for(const g in l)if(Object.prototype.hasOwnProperty.call(l,g)){const E=l[g],w=S[g]||[];f.push({id:g,space:E,isActive:g===t,areasCount:w.length})}return f},[l,t,S]),x=()=>{c.trim()&&(n(c.trim(),{color:h}),d(""))},m=(f,g)=>{i(f,{color:g})};return k.jsx("div",{style:{width:e.width,height:e.height,padding:"1rem",display:"flex",flexDirection:"column",gap:"1rem",overflow:"auto"},children:k.jsxs("div",{style:{padding:"0.25rem",border:"1px solid #eee",borderRadius:"4px",background:"#f9f9f9",flex:1,overflowY:"auto"},children:[k.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",padding:"0.5rem",borderBottom:"1px solid #eee"},children:k.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[k.jsx("span",{children:"Pilot mode:"}),k.jsx("button",{onClick:()=>a(s==="MANUAL"?"AUTO":"MANUAL"),style:{padding:"0.25rem 0.5rem",borderRadius:"4px",border:"1px solid #ccc",background:s==="MANUAL"?"#1890ff":"white",color:s==="MANUAL"?"white":"black",cursor:"pointer"},children:s==="MANUAL"?"Manuel":"Automatique"})]})}),p.length===0&&k.jsx("p",{style:{color:"#999",fontStyle:"italic"},children:"No space created. Create your first space below."}),p.map(({id:f,space:g,isActive:E,areasCount:w})=>k.jsxs("div",{style:{padding:"1rem",marginBottom:"0.5rem",border:`2px solid ${E?"#1890ff":"#eee"}`,borderRadius:"4px",background:E?"#e6f7ff":"white",cursor:"pointer",transition:"all 0.2s"},onClick:()=>{o(f),a("MANUAL")},children:[k.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[k.jsx("h4",{style:{margin:0},children:g.name}),k.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[k.jsx("input",{type:"color",value:g.sharedState.color||"#1890ff",onChange:y=>m(f,y.target.value),style:{height:"26px",width:"40px",padding:"0",border:"1px solid #ccc",borderRadius:"4px"},onClick:y=>y.stopPropagation()}),k.jsx("button",{onClick:y=>{y.stopPropagation(),window.confirm(`Supprimer l'espace "${g.name}" ?`)&&r(f)},style:{padding:"0.25rem 0.5rem",borderRadius:"4px",border:"none",background:"#ff4d4f",color:"white",cursor:"pointer"},children:"Delete"})]})]}),k.jsx("div",{style:{fontSize:"0.9rem",color:"#666"},children:w===0?k.jsx("span",{style:{fontStyle:"italic"},children:"No area in this space"}):k.jsxs(k.Fragment,{children:[k.jsx("b",{children:w})," area",w>1?"s":""," in this space"]})})]},f)),k.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[k.jsx("input",{type:"text",value:c,onChange:f=>d(f.target.value),placeholder:"Space name",style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #ccc",flex:1}}),k.jsx("input",{type:"color",value:h,onChange:f=>v(f.target.value),style:{height:"38px",width:"50px",padding:"0",border:"1px solid #ccc",borderRadius:"4px"}}),k.jsx("button",{onClick:x,disabled:!c.trim(),style:{padding:"0.5rem 1rem",borderRadius:"4px",border:"none",background:"#1890ff",color:"white",cursor:c.trim()?"pointer":"not-allowed",opacity:c.trim()?1:.6},children:"+"})]})]})})},Z0=()=>{const{updateArea:e}=P.getState(),{registerComponent:t}=qe("space-manager-area","bottom-outer"),n=B().getAllSpaces(),r=o=>{const i=o.areaId;i&&e({id:i,type:"space-manager-area",state:Y.getInitialState("space-manager-area")})};return A.useMemo(()=>{t(()=>k.jsxs("div",{style:{color:"white"},children:[Object.keys(n).length," available space",Object.keys(n).length>1?"s":""]}),{name:"bottomOuterSlot",type:"menu"},{order:990,width:"auto",alignment:"center"})},[t]),vn("space-manager-area",J0,{},{displayName:"Space Manager",defaultSize:{width:400,height:500},supportedActions:["delete","move","resize"],role:oe.SELF,icon:uv}),Ue("area.create-space-manager-area",r),null};function q0(e){const t=parseInt(e.substring(1,3),16),n=parseInt(e.substring(3,5),16),r=parseInt(e.substring(5,7),16);return(.299*t+.587*n+.114*r)/255>.5?"#000000":"#ffffff"}const eS=({id:e,state:t,viewport:n,targetSpace:r})=>{var f,g,E,w;const{activeSpaceId:o,updateSharedState:i}=bn(),s=P(),a=s.activeScreenId,l=((f=s.screens[a])==null?void 0:f.areas.areas)||{},u=(g=s.screens[a])==null?void 0:g.areas.lastLeadAreaId,[c,d]=A.useState(r||o||"");A.useEffect(()=>{u&&c!==u&&d(u)},[u]);const h=u?l[u]:null,v=h==null?void 0:h.spaceId,S=B(),x=(v?(w=(E=S.spaces[v])==null?void 0:E.sharedState)==null?void 0:w.color:void 0)||t.color||"#ffffff",m=y=>{var R,M;const C=P.getState().activeScreenId,z=(R=P.getState().screens[C])==null?void 0:R.areas.lastLeadAreaId,I=((M=P.getState().screens[C])==null?void 0:M.areas.areas)||{},_=z?I[z]:null;_!=null&&_.spaceId&&i(_.spaceId,{color:y})};return k.jsxs("div",{style:{width:n.width,height:n.height},children:[k.jsx("style",{children:`
                input.color-picker::-webkit-color-swatch {
                    border: 0 none;
                    }
                input.color-picker::-moz-color-swatch {
                    border: 0 none;
                    }
                `}),k.jsx("input",{className:"color-picker",type:"color",value:x,onChange:y=>m(y.target.value),style:{width:"100%",height:"100%",border:"0 none",borderColor:x,cursor:"pointer",padding:"0",backgroundColor:x,outline:"0 none"}}),k.jsx("div",{style:{fontSize:"1.25rem",color:q0(x),position:"absolute",top:"0",left:"0",height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",pointerEvents:"none"},children:k.jsx("code",{children:x})})]})},tS=()=>{const{updateArea:e}=P.getState(),t=n=>{const r=n.areaId;r&&e({id:r,type:"color-picker-area",state:Y.getInitialState("color-picker-area")})};return vn("color-picker-area",eS,{},{displayName:"Color Picker",defaultSize:{width:300,height:200},role:oe.FOLLOW,icon:$p}),Ue("area.create-color-picker-area",t),null},nS=({state:e,targetSpace:t})=>{var v,S,p,x;const{activeSpaceId:n}=bn(),r=P(),o=r.activeScreenId,i=((v=r.screens[o])==null?void 0:v.areas.areas)||{},s=(S=r.screens[o])==null?void 0:S.areas.lastLeadAreaId,[a,l]=A.useState(t||n||"");A.useEffect(()=>{s&&a!==s&&l(s)},[s]);const u=s?i[s]:null,c=u==null?void 0:u.spaceId,d=B(),h=c?(x=(p=d.spaces[c])==null?void 0:p.sharedState)==null?void 0:x.color:void 0;return k.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",padding:"1rem",background:"#fff",borderRadius:"8px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)"},children:[k.jsxs("div",{children:[k.jsx("strong",{children:"LEAD area"})," : ",u?`${u.type} (id : ${u.id})`:"Aucune"]}),k.jsxs("div",{children:[k.jsx("strong",{children:"Espace du LEAD"})," : ",c||"Aucun"]}),k.jsxs("div",{children:["Couleur du space du LEAD : ",k.jsx("span",{style:{color:h},children:h||"N/A"})]})]})},rS=()=>{const{updateArea:e}=P.getState(),t=n=>{const r=n.areaId;r&&e({id:r,type:"debug-area",state:Y.getInitialState("debug-area")})};return vn("debug-area",nS,{},{displayName:"Debug",defaultSize:{width:300,height:200},role:oe.FOLLOW,icon:$p}),Ue("area.create-debug-area",t),null},oS=""+new URL("icon-CwewC0cV.svg",import.meta.url).href,iS=({})=>{const{registerComponent:e}=qe("apptitle","top-outer"),{registerComponent:t}=qe("app","top-outer"),{registerComponent:n}=qe("app","bottom-outer");return A.useMemo(()=>{n(()=>k.jsx("div",{style:{color:"white",padding:"8px"},children:"Screen management 💪==>"}),{name:"screen-status-bar",type:"status"},{order:990,alignment:"right",width:"auto"}),t(()=>k.jsx(p0,{}),{name:"topOuterLeftSlot",type:"menu"},{order:990,width:"auto",alignment:"left"}),t(()=>k.jsx(F0,{}),{name:"topOuterLayoutSlot",type:"menu"},{order:991,width:"auto",alignment:"left"}),e(()=>{const{activeSpaceId:r,getSpaceById:o}=bn(),i=r?o(r):null;return k.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"white"},children:[k.jsx("img",{src:oS,style:{width:"28px",height:"28px"}}),k.jsx("strong",{children:"Karmyc core Demo"}),i&&k.jsx("span",{style:{marginLeft:"8px",opacity:.7},children:i.name})]})},{name:"topOuterLeftSlot",type:"menu"},{order:990,width:"auto",alignment:"left"}),e(()=>k.jsx("a",{href:"https://github.com/yannloosli/karmyc",target:"_blank",style:{display:"flex",alignItems:"center"},children:k.jsx("svg",{viewBox:"0 0 24 24",style:{width:"28px",height:"28px",fill:"white"},children:k.jsx("path",{d:"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"})})}),{name:"github_link",type:"link"},{order:990,width:"auto",alignment:"right"})},[n,t,e]),k.jsxs(k.Fragment,{children:[k.jsx(V0,{}),k.jsx(B0,{}),k.jsx(K0,{}),k.jsx(tS,{}),k.jsx(rS,{}),k.jsx(Y0,{}),k.jsx(X0,{}),k.jsx(Z0,{})]})};function sS(e,t){const n=Math.abs(t.x),r=Math.abs(t.y),o=n>r,i=r>n;if(o)switch(e){case"ne":case"se":return t.x<0;case"nw":case"sw":return t.x>0}else if(i)switch(e){case"ne":case"nw":return t.y>0;case"se":case"sw":return t.y<0}switch(e){case"ne":return t.x<0&&t.y>0;case"nw":return t.x>0&&t.y>0;case"se":return t.x<0&&t.y<0;case"sw":return t.x>0&&t.y<0;default:return console.warn("Direction de coin inconnue dans determineIfMovingInwards:",e),!1}}const aS=(e,t,n,r,o,i)=>{var z;if((z=P.getState().screens[P.getState().activeScreenId])==null?void 0:z.areas.isDetached)return;e.preventDefault();const a=ve.fromEvent(e);let l=a,u=null,c=null;const d=()=>{var _;const I=P.getState();return(_=I.screens[I.activeScreenId])==null?void 0:_.areas},h=d();if(!h){console.error("handleAreaDragFromCorner: Could not get active screen state.");return}const v=h.layout,S=h.rootId;if(!S||!v||!v[S]){console.error("handleAreaDragFromCorner: Invalid initial active screen state (rootId or layout missing/invalid)");return}const x=An(v)[n];function m(I){const _=I?r.width:r.height,R=Hi*2;if(_<R){g(),u&&u(l);return}const M=P.getState().getAreaById(n);if(!M){console.error("Source area data not found");return}const T=P.getState().splitArea({areaIdToSplit:n,parentRowId:x,horizontal:I,corner:t});if(!T||!T.newRowId||T.separatorIndex===void 0){console.error("Failed to split area or get split result info. Switching to join/move."),g(),u&&u(l);return}const{newRowId:N,separatorIndex:D}=T;setTimeout(()=>{const O=d();if(!O){console.error("Failed to get active screen state after split");return}const j=O.layout[N];if(!j||j.type!=="area_row"){console.error(`Split seemed successful but row ${N} not found or not a row in active screen state.`);return}if(!j.areas.every(H=>H.size>=.1)){console.error("Invalid sizes detected in new row layout");return}const F=j.areas[D].id;P.getState().updateArea({id:F,type:M.type,state:{...M.state}});const b=j.areas.map(()=>1/j.areas.length);P.getState().setRowSizes({rowId:N,sizes:b}),f(j,D,o),u&&u(l)},0)}function f(I,_,R){var G,q;const M=I.orientation==="horizontal",T=(G=I.areas[_-1])==null?void 0:G.id,N=(q=I.areas[_])==null?void 0:q.id;if(!T||!N){console.error("Cannot set up resize handlers: invalid separator index or missing areas.",{rowToResize:I,sepIndex:_}),u=null,c=()=>{};return}const D=I.areas.map(K=>K.size),L=D[_-1]+D[_];if(L<=0){console.error("Invalid total size for resize operation"),u=null,c=()=>{};return}let O=null;const j=75;let U=.5;const F=K=>{if(K.some(ye=>ye<.1)){console.warn("Invalid sizes detected, adjusting to minimum values");const ye=K.map(ie=>Math.max(ie,.1)),Me=ye.reduce((ie,fe)=>ie+fe,0),ue=ye.map(ie=>ie/Me);P.getState().setRowSizes({rowId:I.id,sizes:ue})}else P.getState().setRowSizes({rowId:I.id,sizes:K})},b=K=>{O!==null&&clearTimeout(O),O=setTimeout(()=>{O=null,F(K)},j)},H=()=>{O!==null&&(clearTimeout(O),O=null)};u=K=>{const ee=d();if(!ee)return;const X=ee.layout,ye=X[I.id],Me=ee.rootId;if(!ye||!Me||ye.type!=="area_row"){console.warn("Resize handler: Row or rootId not found/invalid in current active screen state.");return}const ue=kr(X,Me,Io()),ie=ue[T],fe=ue[N];if(!ie||!fe){console.warn("Resize handler: Viewports for adjacent areas not found.");return}const Ne=M?{left:ie.left,top:ie.top,width:ie.width+fe.width,height:ie.height}:{left:ie.left,top:ie.top,width:ie.width,height:ie.height+fe.height},Ke=M?Ne.width:Ne.height;if(Ke<=0){console.warn("Resize handler: Shared viewport size is zero or negative.");return}const Sn=Math.max(.1,Hi/Ke),ce=M?Ne.left:Ne.top,pt=ce+Ke,Qe=M?K.x:K.y,Ut=Ap(Sn,1-Sn,(Qe-ce)/(pt-ce));U=Ut,R({rowId:I.id,separatorIndex:_,t:Ut});const Re=Ut*L,Po=(1-Ut)*L,wn=ye.areas.map((kt,Pt)=>Pt===_-1?Re:Pt===_?Po:kt.size),Ye=.1;if(wn.some(kt=>kt<Ye)){console.warn("Invalid sizes detected in preview, adjusting to minimum values");const kt=wn.map(Ge=>Math.max(Ge,Ye)),Pt=kt.reduce((Ge,No)=>Ge+No,0),xn=kt.map(Ge=>Ge/Pt);b(xn)}else{const kt=wn.reduce((Pt,xn)=>Pt+xn,0);if(kt>0){const Pt=wn.map(xn=>xn/kt);b(Pt)}else console.warn("Resize handler: Debounce skipped, zero total size.")}},c=()=>{var ie;H();const K=U*L,ee=(1-U)*L,X=(ie=d())==null?void 0:ie.layout[I.id];if(!X||X.type!=="area_row"){console.error("Resize mouseup: Cannot find final row state."),R(null),u=null,c=null;return}const ye=X.areas.map((fe,Ne)=>Ne===_-1?K:Ne===_?ee:fe.size),Me=ye.reduce((fe,Ne)=>fe+Ne,0);let ue=ye;if(Me>0)ue=ye.map(fe=>fe/Me);else{console.error("Resize mouseup: Final total size is zero, cannot normalize. Using equal distribution as fallback.");const fe=X.areas.length;ue=Array(fe).fill(1/fe)}F(ue),setTimeout(()=>R(null),0),u=null,c=null}}function g(){const I=x?v[x]:null;if(!I||I.type!=="area_row"){console.error("Join/Move setup: Source area does not have a valid parent row. Cannot determine siblings."),u=null,c=()=>{P.getState().setJoinPreview(null)};return}const _=I.areas.findIndex(D=>D.id===n);if(_===-1){console.error(`Join/Move setup: Source area ${n} not found within its supposed parent row ${x}.`),u=null,c=()=>{P.getState().setJoinPreview(null)};return}const R=I.areas.filter((D,L)=>L!==_).map(D=>D.id),M=_>0?I.areas[_-1].id:null,T=_<I.areas.length-1?I.areas[_+1].id:null,N=[M,T].filter(D=>D!==null);u=D=>{var H;const L=d();if(!L)return;const O=L.layout,j=L.rootId;if(!j)return;const U=kr(O,j,Io());let F=null,b=null;for(const G of N){const q=U[G];if(q&&D.x>=q.left&&D.x<=q.left+q.width&&D.y>=q.top&&D.y<=q.top+q.height){F=G;const K=U[n];if(K){const ee=q,X=ee.left+ee.width/2-(K.left+K.width/2),ye=ee.top+ee.height/2-(K.top+K.height/2);I.orientation==="horizontal"?b=X>0?"e":"w":b=ye>0?"s":"n"}break}}F&&b?P.getState().setJoinPreview({areaId:F,movingInDirection:b,eligibleAreaIds:R}):((H=d())==null?void 0:H.joinPreview)!==null&&P.getState().setJoinPreview(null)},c=()=>{var O;const D=d(),L=D==null?void 0:D.joinPreview;L&&L.areaId&&L.movingInDirection&&N.includes(L.areaId)&&P.getState().joinOrMoveArea({sourceAreaId:n,targetAreaId:L.areaId,direction:L.movingInDirection}),((O=d())==null?void 0:O.joinPreview)!==null&&P.getState().setJoinPreview(null),u=null,c=null}}let E=!1;const w=I=>{const _=new ve(I.x-a.x,I.y-a.y);if(_.length()<10)return;window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",C);const M=sS(t,_),T=Math.abs(_.x),N=Math.abs(_.y),D=T>N;M?m(D):g(),E=!0,u&&u(I)},y=I=>{const _=ve.fromEvent(I);l=_,E?u&&u(_):w(_)},C=I=>{var _;document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",C),E?c?c():console.warn("Mouse up, direction determined but no final handler set."):((_=d())==null?void 0:_.joinPreview)!==null&&P.getState().setJoinPreview(null)};document.addEventListener("mousemove",y),document.addEventListener("mouseup",C)};class lS extends at.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){console.error("Area error:",t,n)}render(){var n;if(this.state.hasError)return k.jsxs("div",{style:{position:"absolute",left:this.props.viewport.left,top:this.props.viewport.top,width:this.props.viewport.width,height:this.props.viewport.height,backgroundColor:"#fff5f5",border:"1px solid #feb2b2",borderRadius:"4px",padding:"16px",color:"#c53030"},children:[k.jsx("h3",{children:"Une erreur est survenue dans la zone"}),k.jsx("p",{children:(n=this.state.error)==null?void 0:n.message})]});const t=this.props.component;return k.jsx(t,{id:this.props.areaId,state:this.props.areaState,type:this.props.type,viewport:this.props.viewport,Component:t})}}const uS=()=>Y._roleMap||{},sh=()=>{const e=Ve(d=>d.isVisible&&d.menuType==="custom"),t=Ve(d=>d.position),n=Ve(d=>d.closeContextMenu),r=Ve(d=>d.targetId)||"",o=uS(),i=Array.from(Y.getRegisteredTypes()),s=B(d=>d.spaces),a=B(d=>d.activeSpaceId),l=[{role:oe.LEAD,title:"LEAD",items:[]},{role:oe.FOLLOW,title:"FOLLOW",items:[]},{role:oe.SELF,title:"SELF",items:[]}];i.forEach(d=>{const h=o[d]||oe.SELF,v=l.find(S=>S.role===h);v&&v.items.push(d)});const u=d=>{P.getState().updateArea({id:r,type:d}),n&&n()},c=d=>{P.getState().updateArea({id:r,spaceId:d}),n&&n()};return k.jsx(gu,{anchorPoint:t,state:e?"open":"closed",onClose:n,transition:!0,direction:"right",menuClassName:"switch-area-type-context-menu",children:l.map(d=>k.jsxs("div",{style:{flex:1,margin:"0 8px",width:"250px"},children:[k.jsx("div",{style:{padding:"4px 0 16px",marginBottom:8,textAlign:"left",borderBottom:"2px ridge #444",paddingBottom:4},children:d.title}),d.items.map(h=>{const v=Y.getIcon(h);return k.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer",marginBottom:4},onClick:()=>u(h),onMouseDown:S=>S.preventDefault(),children:[k.jsx(v,{style:{width:16,height:16}}),Y.getDisplayName(h)]},h)}),d.role===oe.LEAD&&k.jsxs(k.Fragment,{children:[k.jsx("div",{style:{padding:"4px 0 16px",marginTop:16,marginBottom:8,textAlign:"left",borderBottom:"2px ridge #444",paddingBottom:4},children:"SPACES"}),Object.entries(s).map(([h,v])=>{var S;return k.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer",marginBottom:4,backgroundColor:h===a?"rgba(255, 255, 255, 0.1)":"transparent",padding:"4px 8px",borderRadius:4},onClick:()=>c(h),onMouseDown:p=>p.preventDefault(),children:[k.jsx("div",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:((S=v.sharedState)==null?void 0:S.color)||"#666"}}),v.name]},h)})]})]},d.role))})},ah=({state:e,type:t,id:n,style:r})=>{var w,y,C,z;const[o,i]=A.useState(!1),s=P(I=>I.updateArea),a=P(I=>{var _;return((_=I.getAreaById(n))==null?void 0:_.isLocked)||!1}),l=P(I=>{var _;return((_=I.options)==null?void 0:_.manageableAreas)??!0}),{handleDragStart:u,handleDragOver:c,handleDrop:d,handleDragEnd:h}=ih({type:t,id:n,state:e}),v=Ve(I=>I.openCustomContextMenu),S=A.useRef(null),p=I=>{if(l&&S.current){const _=S.current.getBoundingClientRect();v({targetId:n,position:{x:_.left,y:_.top},component:k.jsx(sh,{})})}},x=P(I=>I.getAreaById(n)),m=B(I=>I.getSpaceById((x==null?void 0:x.spaceId)||""));let f=((w=m==null?void 0:m.sharedState)==null?void 0:w.color)||"#0000ff";if((x==null?void 0:x.role)==="FOLLOW"){const I=P.getState().activeScreenId,_=(y=P.getState().screens[I])==null?void 0:y.areas.lastLeadAreaId,R=((C=P.getState().screens[I])==null?void 0:C.areas.areas)||{},M=_?R[_]:null,T=M==null?void 0:M.spaceId;if(T){const N=B.getState().spaces[T];N&&((z=N.sharedState)!=null&&z.color)&&(f=N.sharedState.color)}}const g=I=>{l&&(I.stopPropagation(),P.getState().detachArea(n))},E=I=>{l&&(I.stopPropagation(),P.getState().removeArea(n))};return k.jsxs("div",{className:"select-area-button",draggable:l&&!a,onDragStart:I=>{l&&(i(!0),u(I),requestAnimationFrame(()=>{S.current&&(S.current.style.pointerEvents="none",S.current.style.opacity="0.5")}))},onDragOver:I=>{l&&c(I)},onDrop:I=>{l&&(o||d(I))},onDragEnd:I=>{l&&(i(!1),S.current.style.pointerEvents="auto",S.current.style.opacity="1",h(I))},onContextMenu:I=>{l&&(I.preventDefault(),p())},style:{cursor:l?a?"default":o?"grabbing":"grab":"default","--space-color":f,pointerEvents:"auto",height:gt+"px",...r},ref:S,children:[k.jsxs("div",{className:"select-area-button__main",children:[A.createElement(Y.getIcon(t),{className:"select-area-button__icon",style:{color:f}}),Y.getDisplayName(t)]}),k.jsxs("div",{className:"select-area-button__action-icons",children:[l&&!a&&k.jsxs(k.Fragment,{children:[k.jsx("button",{className:"select-area-icons select-area-button__detach",onClick:g,children:k.jsx(Dp,{})}),k.jsx("button",{className:"select-area-icons select-area-button__close",onClick:E,children:k.jsx(Fp,{})})]}),l&&k.jsx("button",{className:`select-area-icons select-area-button__lock-icon ${a?"locked":""}`,onClick:I=>{I.stopPropagation(),s({id:n,isLocked:!a})},children:a?k.jsx(wv,{}):k.jsx(vv,{})})]})]})},cS=at.memo(({rowId:e,row:t,areas:n})=>{const r=P(p=>p.updateLayout),o=P(p=>p.setActiveArea);P(p=>{var x;return(x=p.screens[p.activeScreenId])==null?void 0:x.areas.activeAreaId});const[i,s]=A.useState({targetId:null,position:null}),[a,l]=A.useState(null),u=p=>{const x=n[p];x&&(r({id:e,activeTabId:p}),o(p),x.spaceId&&B.getState().setActiveSpace(x.spaceId))},c=(p,x)=>{p.stopPropagation(),l(x),p.dataTransfer.setData("text/plain",JSON.stringify({type:"tab",areaId:x,sourceRowId:e})),p.dataTransfer.setData("karmyc/tab-drag-source","true"),p.dataTransfer.effectAllowed="move"},d=(p,x)=>{if(p.dataTransfer.types.includes("karmyc/tab-drag-source")){p.preventDefault(),p.dataTransfer.dropEffect="move";const f=p.currentTarget.getBoundingClientRect(),g=f.left+f.width/2,E=p.clientX<g?"before":"after";(i.targetId!==x||i.position!==E)&&s({targetId:x,position:E})}},h=p=>{p.currentTarget.contains(p.relatedTarget)||s({targetId:null,position:null})},v=(p,x)=>{try{const m=p.dataTransfer.getData("text/plain");if(!m){s({targetId:null,position:null});return}const f=JSON.parse(m);if(f.type==="tab"&&f.sourceRowId===e){p.preventDefault(),p.stopPropagation();const g=f.areaId,{targetId:E,position:w}=i;if(g===x&&E!==x){s({targetId:null,position:null});return}if(g===x&&E===x&&w===null){s({targetId:null,position:null});return}const y=[...t.areas],C=y.findIndex(M=>M.id===g),z=t.areas.findIndex(M=>M.id===x);if(C===-1||z===-1){s({targetId:null,position:null});return}const[I]=y.splice(C,1);let _=z;C<z&&_--,g===x&&(_=C);let R=_;E===x&&w==="after"&&(R=_+1),y.splice(R,0,I),r({id:e,areas:y,activeTabId:t.activeTabId})}}catch(m){console.error("Error handling tab drop:",m)}s({targetId:null,position:null}),l(null)},S=p=>{l(null),s({targetId:null,position:null})};return k.jsx("div",{className:"area-tabs",onDragLeave:h,children:t.areas.map(({id:p})=>{const x=n[p];if(!x)return null;const m=t.activeTabId===p,g=i.targetId===p?`drop-indicator-${i.position}`:"",E=a===p;return k.jsx("div",{className:`area-tab ${m?"area-tab--active":""} ${g} ${E?"is-dragging-source":""}`,onClick:()=>u(p),draggable:x.isLocked,onDragStart:w=>x.isLocked?c(w,p):void 0,onDragOver:w=>d(w,p),onDrop:w=>v(w,p),onDragEnd:S,"data-areaid":p,children:k.jsx(ah,{id:p,state:x.state,type:x.type})},p)})})}),dS=at.memo(({id:e,layout:t,areas:n,viewport:r,setResizePreview:o})=>{var l;const i=t.activeTabId||((l=t.areas[0])==null?void 0:l.id),s=i?n[i]:null;if(!s)return null;const a=Y.getComponent(s.type);return a?k.jsxs("div",{className:"area-stack",style:{left:r.left,top:r.top,width:r.width,height:r.height},"data-areaid":e,children:[k.jsx(cS,{rowId:t.id,row:t,areas:n}),k.jsx("div",{className:"area-stack__content",children:k.jsx(vu,{isChildOfStack:!0,id:i,Component:a,state:s.state,type:s.type,viewport:{left:0,top:0,width:r.width,height:r.height},setResizePreview:o,raised:!!s.raised})})]}):null}),vu=({id:e,Component:t,state:n,type:r,viewport:o,raised:i,isChildOfStack:s=!1,setResizePreview:a})=>{o||(console.warn(`No viewport found for area ${e}, using default viewport`),o={left:0,top:0,width:100,height:100});const l=P(w=>{var y;return((y=w.screens[w.activeScreenId])==null?void 0:y.areas.activeAreaId)===e}),u=P(w=>w.setActiveArea),c=A.useRef(null),d=P(w=>w.getAreaById(e)),h=B(w=>w.setActiveSpace),v=B(w=>w.activeSpaceId),S=B(w=>w.pilotMode),p=B(w=>w.spaces),x=P(w=>{var y;return((y=w.options)==null?void 0:y.resizableAreas)??!0}),m=P(w=>{var y;return((y=w.options)==null?void 0:y.manageableAreas)??!0});A.useEffect(()=>{var w,y;if(v)if(S==="AUTO"&&(d==null?void 0:d.role)===oe.FOLLOW){const C=P.getState().activeScreenId,z=(w=P.getState().screens[C])==null?void 0:w.areas.lastLeadAreaId,I=((y=P.getState().screens[C])==null?void 0:y.areas.areas)||{},_=z?I[z]:null;_&&_.spaceId===v&&u(_.id)}else S==="MANUAL"&&(d==null?void 0:d.spaceId)!==v&&P.getState().updateArea({id:e,spaceId:v})},[v,d==null?void 0:d.role,S]);const f=()=>{if(!l&&(u(e),(d==null?void 0:d.role)===oe.LEAD&&S!=="MANUAL"))if(d.spaceId)h(d.spaceId);else{const w=Object.keys(p);if(w.length>0){const y=v||w[0];P.getState().updateArea({id:e,spaceId:y}),h(y)}else{const y=B.getState().addSpace({name:`Space for ${d.type}`,sharedState:{}});y&&(P.getState().updateArea({id:e,spaceId:y}),h(y))}}},g=P(w=>w.activeScreenId),E=P(w=>{var y;return(y=w.screens[g])==null?void 0:y.isDetached})||!1;return k.jsxs(dg.Provider,{value:e,children:[!E&&!s&&k.jsx(ah,{id:e,state:n,type:r}),k.jsx(il,{areaType:r,areaState:n,viewport:o,children:k.jsxs("div",{ref:c,"data-areaid":e,className:`area ${i?"area--raised":""}`,style:{width:"100%",height:E?"100%":`calc(${typeof o.height=="string"?o.height:o.height+"px"} - ${gt}px)`},onClick:f,children:[!E&&!s&&x&&m&&["ne","nw","se","sw"].map(w=>k.jsx("div",{className:`area__corner area__corner--${w}`,onMouseDown:y=>aS(y.nativeEvent,w,e,o,a)},w)),k.jsx("div",{className:`area-main-content-wrapper ${r}`,style:{opacity:l?1:.9,height:"100%"},children:k.jsx(lS,{component:t,areaId:e,areaState:n,type:r,viewport:{left:0,top:0,width:o.width,height:o.height-(E?0:gt)}})})]})})]})},fS=at.memo(({id:e,viewport:t,setResizePreview:n})=>{const r=P(M=>M.getAreaById(e)),o=P(M=>{var T;return(T=M.screens[M.activeScreenId])==null?void 0:T.areas.layout[e]}),i=P(M=>{var T;return(T=M.screens[M.activeScreenId])==null?void 0:T.areas.areas}),s=P(M=>M.activeScreenId),a=P(M=>{var T;return(T=M.screens[s])==null?void 0:T.isDetached})||!1,l=P(M=>{var N;const T=(N=M.screens[M.activeScreenId])==null?void 0:N.areas.layout;if(!T)return!1;for(const[,D]of Object.entries(T))if(D.type==="area_row"&&D.orientation==="stack"&&D.areas.some(L=>L.id===e))return!0;return!1}),u=(o==null?void 0:o.type)==="area_row",c=u?o:null,d=u&&c.orientation==="stack",h=u&&!d,v=r!=null&&r.type?Y.getComponent(r.type):null;let S=e,p=r,x=v;d&&(c.activeTabId?(S=c.activeTabId,p=i==null?void 0:i[S],x=p!=null&&p.type?Y.getComponent(p.type):null):(p=void 0,x=null));const{getComponents:m}=qe((p==null?void 0:p.type)||"","top-outer"),{getComponents:f}=qe((p==null?void 0:p.type)||"","bottom-outer"),g=m(),E=f(),w=g.length>0,y=E.length>0,C=w?gt:0,z=y?gt:0,I=A.useMemo(()=>a?t:{...t,top:t.top,height:t.height-(C+z)},[t,a,C,z,e]),_=A.useMemo(()=>({left:0,top:0,width:t.width||0,height:I.height||0}),[t.width,I.height]),R={position:"absolute",left:`${t.left||0}px`,top:a?"0px":`${I.top||0}px`,width:`${t.width||0}px`,height:a?"100%":`${t.height||0}px`,boxSizing:"border-box",overflow:"hidden"};return l&&!d?null:(!e.includes("row-")||d)&&e!=="root"&&k.jsxs("div",{className:"area-container "+e,style:R,"data-areaid":e,"data-areatype":d?"stack-row":h?`${c==null?void 0:c.orientation}-row`:(r==null?void 0:r.type)||"unknown-leaf",children:[d&&c&&k.jsx(dS,{id:e,areas:i,layout:c,viewport:_,setResizePreview:n}),!u&&x&&p&&k.jsx(vu,{id:p.id,Component:x,state:p.state,type:p.type,viewport:_,raised:!!p.raised,setResizePreview:n,isChildOfStack:!1})]})});function pS(e,t){document.body.style.userSelect="none";const n=o=>{e(o)},r=()=>{document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",r),document.body.style.userSelect="",t()};document.addEventListener("mousemove",n),document.addEventListener("mouseup",r)}const hS=(e,t,n,r,o)=>{var U,F;if((U=P.getState().screens[P.getState().activeScreenId])==null?void 0:U.areas.isDetached)return;if(!t||!t.areas||t.areas.length===0){console.error("Invalid row data for resize");return}if(r<1||r>=t.areas.length){console.error("Invalid areaIndex for resize:",{areaIndex:r,areasLength:t.areas.length});return}const s=P.getState(),a=s.activeScreenId,l=(F=s.screens[a])==null?void 0:F.areas;if(!l||!l.layout||!l.rootId){console.error("Invalid active screen area state for resize:",l);return}const u=l.layout,c=l.rootId,d=fg(c,u),h=Io();if(!h){console.error("Unable to get root viewport");return}const v=kr(u,c,h),S=t.areas[r-1],p=t.areas[r];if(!S||!p){console.error("Invalid area indices:",{areaIndex:r,areas:t.areas});return}let x=v[S.id],m=v[p.id];if(!x||!m){console.error("Missing initial viewports:",{a0:S.id,a1:p.id,viewports:v});return}const f=b=>{const H=u[b];if(!H||H.type==="area")return 1;const G=d[H.id];return n?(G==null?void 0:G.width)??1:(G==null?void 0:G.height)??1},g=f(S.id),E=f(p.id);let w=S.size+p.size;(isNaN(w)||w<=0)&&(w=1);const y={width:n?x.width+m.width:x.width,height:n?x.height:x.height+m.height,left:x.left,top:x.top},C=n?y.width:y.height;if(C<=0){console.error("Invalid viewport size:",C);return}const z=Hi*g/C,I=Hi*E/C;if(z+I>=.99){console.warn("Not enough space to resize:",{tMin0:z,tMin1:I});return}let _=0;const R=16;let M=null,T=null;const N=b=>{const H=performance.now();H-_<R||(_=H,P.getState().setRowSizes({rowId:t.id,sizes:b}))},D=b=>{if(!T){T=b;return}const H=n?y.left:y.top,G=n?y.left+y.width:y.top+y.height,q=n?b.x:b.y,K=Ap(z,1-I,(q-H)/(G-H));o({rowId:t.id,separatorIndex:r,t:K});const ee=[K,1-K].map(X=>el(0,w,X));if(!ee.some(X=>isNaN(X)||X<0)){const X=t.areas.map((Me,ue)=>{var fe,Ne;if(ue===r-1)return ee[0];if(ue===r)return ee[1];const ie=u[t.id];return((Ne=(fe=ie==null?void 0:ie.areas)==null?void 0:fe[ue])==null?void 0:Ne.size)||0}),ye=X.reduce((Me,ue)=>Me+ue,0);if(ye>0&&Math.abs(ye-1)>.001){const Me=X.map(ue=>ue/ye);N(Me)}else N(X)}},L=()=>{T&&D(T),M=requestAnimationFrame(L)},O=b=>{T=b,M||(M=requestAnimationFrame(L))},j=()=>{M!==null&&(cancelAnimationFrame(M),M=null),T=null};pS(b=>{const H=ve.fromEvent(b);O(H)},()=>{j(),setTimeout(()=>o(null),0)})},mS=e=>{const{row:t,setResizePreview:n,offset:r}=e;P(c=>c.setRowSizes);const o=P(c=>{var d;return((d=c.screens[c.activeScreenId])==null?void 0:d.areas.layout)??{}}),i=P(c=>{var d;return(d=c.screens[c.activeScreenId])==null?void 0:d.areas.rootId}),s=P(c=>{var d;return(d=c.screens[c.activeScreenId])==null?void 0:d.areas.viewports}),a=P(c=>{var d;return((d=c.options)==null?void 0:d.resizableAreas)??!0});if(t.orientation==="stack"||!t||!t.areas||t.areas.length<=1||!o||!i||!t.areas.every(c=>s[c.id]&&o[c.id]))return null;const u=[];for(let c=0;c<t.areas.length-1;c++){const d=t.areas[c],h=t.areas[c+1];if(!d||!h)continue;const v=s[d.id],S=s[h.id];if(!o[d.id]||!o[h.id]||!v||!S)continue;const p=t.orientation==="horizontal";let x;if(p?x={left:S.left-ei,top:S.top+gt-r,width:ei*2,height:Math.max(S.height-gt,5)}:x={left:S.left,top:S.top-ei-r,width:Math.max(S.width,5),height:ei*2},isNaN(x.left)||isNaN(x.top)||isNaN(x.width)||isNaN(x.height))continue;x.width=Math.max(0,x.width),x.height=Math.max(0,x.height);const m=f=>{f.stopPropagation(),hS(f.nativeEvent,t,p,c+1,n)};u.push(k.jsx("div",{className:`area-separator ${p?"area-separator--horizontal":""}`,style:{...x,flexDirection:p?"column":"row",zIndex:p?2001:2e3,cursor:a?void 0:"default"},onMouseDown:a?m:void 0,children:a&&(p?k.jsxs(k.Fragment,{children:[k.jsx(Wc,{size:32}),k.jsx(Wc,{size:32})]}):k.jsxs(k.Fragment,{children:[k.jsx(Kc,{size:32}),k.jsx(Kc,{size:32})]}))},`sep-${d.id}-${h.id}`))}return k.jsx(k.Fragment,{children:u})},yS=at.memo(({areaToOpen:e,dimensions:t})=>{const n=Y.getComponent(e.area.type);return n?k.jsx("div",{className:"area-preview",style:{left:e.position.x,top:e.position.y},children:k.jsx(vu,{id:"-1",Component:n,raised:!0,isChildOfStack:!1,state:e.area.state,type:e.area.type,viewport:{left:0,top:0,height:t.y,width:t.x},setResizePreview:()=>{}})}):null}),gS=at.memo(({areaToOpen:e,dimensions:t,setAreaToOpenDimensions:n})=>{const r=P(h=>h.setViewports),o=P(h=>{var v;return(v=h.screens[h.activeScreenId])==null?void 0:v.areas.viewports}),{handleDragOver:i,handleDrop:s,areaToOpenTargetId:a,areaToOpenTargetViewport:l,calculatedPlacement:u}=ih();A.useEffect(()=>{if(!a||!l)return;const h=ve.new(l.width,l.height);(h.x!==t.x||h.y!==t.y)&&n(h)},[a,l,t,n]),A.useEffect(()=>{r(o)},[o,r]);const c=A.useMemo(()=>{if(!l)return{lines:[],placementLines:{}};const h=l,v=Math.min(h.width,h.height)*ug,S=ve.new(v,v),p=h.width,x=h.height,m=ve.new(0,0),f=ve.new(p,0),g=ve.new(p,x),E=ve.new(0,x),w=m.add(S),y=f.add(S.scaleX(-1)),C=g.add(S.scale(-1)),z=E.add(S.scaleY(-1));return{lines:[[m,w],[f,y],[E,z],[g,C],[w,y],[y,C],[C,z],[z,w]],placementLines:{left:[m,w,z,E],top:[m,f,y,w],right:[y,f,g,C],bottom:[E,z,C,g],stack:[w,y,C,z]}}},[l]),d=A.useMemo(()=>!l||!c.placementLines||!c.placementLines[u]?"":c.placementLines[u].map(v=>[v.x,v.y].join(",")).map((v,S)=>[S===0?"M":"L",v].join(" ")).join(" ")+" Z",[l,c.placementLines,u]);return l?k.jsx(k.Fragment,{children:k.jsx("div",{className:"area-to-open-overlay",onDragOver:i,onDrop:s,children:l&&k.jsxs("svg",{width:l.width,height:l.height,className:"area-to-open-overlay__placement",style:{left:l.left,top:l.top},children:[c.lines.map(([h,v],S)=>k.jsx("line",{x1:h.x,y1:h.y,x2:v.x,y2:v.y},S)),k.jsx("path",{d})]})})}):null}),vS=at.memo(()=>{const e=P(o=>{var i;return(i=o.screens[o.activeScreenId])==null?void 0:i.areas.areaToOpen}),t=A.useMemo(()=>ve.new(100,100),[]),[n,r]=A.useState(t);return e?k.jsxs(k.Fragment,{children:[k.jsx(yS,{areaToOpen:e,dimensions:n}),k.jsx(gS,{areaToOpen:e,dimensions:n,setAreaToOpenDimensions:r})]}):null}),SS=e=>{const{viewport:t,movingInDirection:n}=e,r=Math.min(256,Math.min(t.width,t.height)*5);return k.jsx("div",{className:"join-area-preview",style:{left:t.left,top:t.top,width:t.width,height:t.height},children:k.jsx("div",{className:`join-area-preview__arrow-container join-area-preview__arrow-container--${n}`,children:k.jsx("div",{className:`join-area-preview__arrow join-area-preview__arrow--${n}`,style:{width:r,height:r},children:k.jsx(Gg,{size:r+"px",style:{color:"transparent"}})})})})};function lh(e,t){return e.map(n=>n.children&&n.children.length>0?k.jsx($0,{label:n.label,disabled:n.disabled,children:lh(n.children,t)},n.id):n.actionId==="area.separator"||n.label.match(/^[-\u2500]+$/)?k.jsx("div",{style:{margin:"4px 0",borderBottom:"1px solid #ccc"}},n.id):k.jsxs(Qr,{disabled:n.disabled,onClick:()=>t(n.actionId,n.metadata,n),children:[n.icon&&at.createElement(n.icon),n.label]},n.id))}const wS=()=>{const e=Ve(a=>a.isVisible&&a.menuType==="default"),t=Ve(a=>a.items),n=Ve(a=>a.position),r=Ve(a=>a.closeContextMenu),o=Ve(a=>a.metadata),i=Ve(a=>a.menuClassName),s=(a,l,u)=>{Q.executeAction(a,{...o,...l}),r&&r()};return e?k.jsx(gu,{anchorPoint:n,state:e?"open":"closed",onClose:r,transition:!0,direction:"right",menuClassName:i,children:lh(t,s)}):null},xS=({children:e})=>k.jsxs(k.Fragment,{children:[e,k.jsx(wS,{}),k.jsx(sh,{})]});function kS(){const e=P(r=>r.activeScreenId),t=P(r=>{var o;return(o=r.screens[e])==null?void 0:o.isDetached}),n=P(r=>r.removeScreen);return A.useEffect(()=>{if(!t)return;const r=()=>{n(e)};return window.addEventListener("beforeunload",r),()=>window.removeEventListener("beforeunload",r)},[e,t,n]),null}function IS(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const o of n){if(!t.hasOwnProperty(o))return!1;const i=e[o],s=t[o];if(i.left!==s.left||i.top!==s.top||i.width!==s.width||i.height!==s.height)return!1}return!0}const CS=e=>{var t;return(t=e.screens[e.activeScreenId])==null?void 0:t.areas},ES=({offset:e=0})=>{const t=P(CS),n=P(S=>{var p;return(p=S.screens[S.activeScreenId])==null?void 0:p.isDetached}),r=A.useMemo(()=>t==null?void 0:t.rootId,[t==null?void 0:t.rootId]),o=A.useMemo(()=>(t==null?void 0:t.layout)??{},[t==null?void 0:t.layout]),i=A.useMemo(()=>t==null?void 0:t.joinPreview,[t==null?void 0:t.joinPreview]),s=A.useMemo(()=>t==null?void 0:t.areaToOpen,[t==null?void 0:t.areaToOpen]),a=A.useRef(null),[l,u]=A.useState(()=>n?{left:0,top:0,width:window.innerWidth,height:window.innerHeight}:Io()),[c,d]=A.useState(null),h=P(S=>S.setViewports);A.useEffect(()=>{if(!n){const S=document.querySelector(".area-root");if(S){const p=S.getBoundingClientRect();u({left:0,top:0,width:p.width,height:p.height})}}},[n]),A.useEffect(()=>{const S=()=>{if(n){const p={left:0,top:0,width:window.innerWidth,height:window.innerHeight};(!a.current||p.width!==a.current.width||p.height!==a.current.height)&&u(p)}else{const p=document.querySelector(".area-root");if(p){const x=p.getBoundingClientRect(),m={left:0,top:0,width:x.width,height:x.height};(!a.current||m.width!==a.current.width||m.height!==a.current.height)&&u(m)}}};return window.addEventListener("resize",S),()=>window.removeEventListener("resize",S)},[n]),A.useEffect(()=>{var x;const S=Object.keys(o).length,p=r?o[r]:null;if(!r||!p||S===0){a.current!==null&&(a.current=null,h({}));return}if(!(!l||l.width<=0||l.height<=0))try{const m=kr(o,r,{...l,top:l.top+e}),f=(x=P.getState().screens[P.getState().activeScreenId])==null?void 0:x.areas.viewports;IS(f,m)||Object.keys(m).some(E=>{const w=f==null?void 0:f[E],y=m[E];return w?Math.abs(w.left-y.left)>1||Math.abs(w.top-y.top)>1||Math.abs(w.width-y.width)>1||Math.abs(w.height-y.height)>1:!0})&&(a.current=l,h(m))}catch(m){console.error("[Karmyc] Erreur lors du calcul du viewportMap:",m)}},[o,r,l,c,h]);const v=A.useCallback(S=>{var y;const p=P.getState(),x=p.screens[p.activeScreenId],m=(x==null?void 0:x.areas.viewports)||{},f=m[S];if(x!=null&&x.isDetached)return{...f,left:0,top:0,width:window.innerWidth,height:window.innerHeight};if(!c)return f;let g,E=-1;if(g=Object.values(o).filter(C=>C.type==="area_row").find(C=>{const z=C.areas.findIndex(I=>I.id===S);return z!==-1?(E=z,!0):!1}),!g||g.id!==c.rowId)return f;const w=c.separatorIndex;if(E===w-1||E===w){const C=E===w-1?w:w-1,z=(y=g.areas[C])==null?void 0:y.id;if(!z)return f;const I=m[z];if(!I)return f;const _=E===w-1,R=c.t;if(!m[g.id])return f;const T=_?f:I,N=_?I:f,D={left:T.left,top:T.top,width:T.width+N.width,height:T.height+N.height};if(g.orientation==="horizontal"){const L=D.width,O=Math.max(0,Math.floor(L*R)),j=Math.max(0,L-O),U=_?O:j,F=_?D.left:D.left+O;return isNaN(U)||isNaN(F)?(console.warn(`[VisViewport] ${S}: NaN detected in horizontal calc.`),f):{...f,width:U,left:F}}else if(g.orientation==="vertical"){const L=D.height,O=Math.max(0,Math.floor(L*R)),j=Math.max(0,L-O),U=_?O:j,F=_?D.top:D.top+O;return isNaN(U)||isNaN(F)?(console.warn(`[VisViewport] ${S}: NaN detected in vertical calc.`),f):{...f,height:U,top:F}}else if(g.orientation==="stack")return f}return f},[o,c]);return k.jsxs(xS,{children:[k.jsx(kS,{}),k.jsxs("div",{className:"area-root",children:[Object.values(o).map(S=>{var p;if(S.type==="area_row"){const x=S,m=((p=P.getState().screens[P.getState().activeScreenId])==null?void 0:p.areas.viewports)||{};if(x.areas.every(g=>m[g.id]))return k.jsx(mS,{offset:e,row:x,setResizePreview:d},S.id)}return null}),Object.entries(o).map(([S])=>{const p=v(S);return p?k.jsx(fS,{id:S,viewport:{...p,top:p.top-e},setResizePreview:d},S):null}),i&&i.areaId&&(()=>{var x;const p=(((x=P.getState().screens[P.getState().activeScreenId])==null?void 0:x.areas.viewports)||{})[i.areaId];return p?k.jsx(SS,{viewport:p,movingInDirection:i.movingInDirection}):null})(),s&&k.jsx(vS,{})]})]})},AS=()=>{const e={plugins:[],initialAreas:[{id:"area-1",type:"demo-area",state:{},role:oe.LEAD},{id:"area-2",type:"logo-karmyc-area",state:{},role:oe.SELF},{id:"area-3",type:"keyboard-shortcuts-area",state:{},role:oe.SELF}],keyboardShortcutsEnabled:!0,builtInLayouts:[{id:"default",name:"Layout par défaut",config:{_id:10,rootId:"root",errors:[],activeAreaId:"area-1",joinPreview:null,layout:{root:{id:"root",type:"area_row",orientation:"horizontal",areas:[{id:"area-1",size:.3},{id:"area-2",size:.4},{id:"area-3",size:.3}]},"area-1":{type:"area",id:"area-1"},"area-2":{type:"area",id:"area-2"},"area-3":{type:"area",id:"area-3"}},areas:{"area-1":{id:"area-1",type:"demo-area",state:{},role:oe.LEAD},"area-2":{id:"area-2",type:"logo-karmyc-area",state:{},role:oe.SELF},"area-3":{id:"area-3",type:"keyboard-shortcuts-area",state:{},role:oe.SELF}},viewports:{},areaToOpen:null,lastSplitResultData:null,lastLeadAreaId:"area-1"},isBuiltIn:!0},{id:"minimal",name:"Layout minimal",config:{_id:10,rootId:"root",errors:[],activeAreaId:"area-1",joinPreview:null,layout:{root:{id:"root",type:"area_row",orientation:"vertical",areas:[{id:"area-1",size:.7},{id:"area-2",size:.3}]},"area-1":{type:"area",id:"area-1"},"area-2":{type:"area",id:"area-2"}},areas:{"area-1":{id:"area-1",type:"demo-area",state:{},role:oe.LEAD},"area-2":{id:"area-2",type:"logo-karmyc-area",state:{},role:oe.SELF}},viewports:{},areaToOpen:null,lastSplitResultData:null,lastLeadAreaId:"area-1"},isBuiltIn:!0}],initialLayout:"default",resizableAreas:!0,manageableAreas:!0,multiScreen:!0},t=Ng(e);return k.jsxs(Fg,{options:t,children:[k.jsx(iS,{}),k.jsx(il,{areaType:"apptitle",children:k.jsx(il,{children:k.jsx(ES,{offset:gt*2})})})]})};vp(document.getElementById("root")).render(k.jsx(A.StrictMode,{children:k.jsx(AS,{})}));

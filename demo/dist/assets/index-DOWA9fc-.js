(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function rd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var od={exports:{}},Ki={},id={exports:{}},K={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ao=Symbol.for("react.element"),vh=Symbol.for("react.portal"),Sh=Symbol.for("react.fragment"),wh=Symbol.for("react.strict_mode"),xh=Symbol.for("react.profiler"),kh=Symbol.for("react.provider"),Ih=Symbol.for("react.context"),Ch=Symbol.for("react.forward_ref"),Eh=Symbol.for("react.suspense"),Ah=Symbol.for("react.memo"),_h=Symbol.for("react.lazy"),Iu=Symbol.iterator;function Mh(e){return e===null||typeof e!="object"?null:(e=Iu&&e[Iu]||e["@@iterator"],typeof e=="function"?e:null)}var sd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ad=Object.assign,ld={};function Ar(e,t,n){this.props=e,this.context=t,this.refs=ld,this.updater=n||sd}Ar.prototype.isReactComponent={};Ar.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ar.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ud(){}ud.prototype=Ar.prototype;function fl(e,t,n){this.props=e,this.context=t,this.refs=ld,this.updater=n||sd}var pl=fl.prototype=new ud;pl.constructor=fl;ad(pl,Ar.prototype);pl.isPureReactComponent=!0;var Cu=Array.isArray,cd=Object.prototype.hasOwnProperty,hl={current:null},dd={key:!0,ref:!0,__self:!0,__source:!0};function fd(e,t,n){var r,o={},i=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(i=""+t.key),t)cd.call(t,r)&&!dd.hasOwnProperty(r)&&(o[r]=t[r]);var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];o.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)o[r]===void 0&&(o[r]=a[r]);return{$$typeof:Ao,type:e,key:i,ref:s,props:o,_owner:hl.current}}function zh(e,t){return{$$typeof:Ao,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ml(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ao}function jh(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Eu=/\/+/g;function Ss(e,t){return typeof e=="object"&&e!==null&&e.key!=null?jh(""+e.key):t.toString(36)}function ti(e,t,n,r,o){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Ao:case vh:s=!0}}if(s)return s=e,o=o(s),e=r===""?"."+Ss(s,0):r,Cu(o)?(n="",e!=null&&(n=e.replace(Eu,"$&/")+"/"),ti(o,t,n,"",function(u){return u})):o!=null&&(ml(o)&&(o=zh(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(Eu,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=r===""?".":r+":",Cu(e))for(var a=0;a<e.length;a++){i=e[a];var l=r+Ss(i,a);s+=ti(i,t,n,l,o)}else if(l=Mh(e),typeof l=="function")for(e=l.call(e),a=0;!(i=e.next()).done;)i=i.value,l=r+Ss(i,a++),s+=ti(i,t,n,l,o);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Lo(e,t,n){if(e==null)return e;var r=[],o=0;return ti(e,r,"","",function(i){return t.call(n,i,o++)}),r}function Th(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Be={current:null},ni={transition:null},Ph={ReactCurrentDispatcher:Be,ReactCurrentBatchConfig:ni,ReactCurrentOwner:hl};function pd(){throw Error("act(...) is not supported in production builds of React.")}K.Children={map:Lo,forEach:function(e,t,n){Lo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Lo(e,function(){t++}),t},toArray:function(e){return Lo(e,function(t){return t})||[]},only:function(e){if(!ml(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};K.Component=Ar;K.Fragment=Sh;K.Profiler=xh;K.PureComponent=fl;K.StrictMode=wh;K.Suspense=Eh;K.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ph;K.act=pd;K.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=ad({},e.props),o=e.key,i=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,s=hl.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)cd.call(t,l)&&!dd.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Ao,type:e.type,key:o,ref:i,props:r,_owner:s}};K.createContext=function(e){return e={$$typeof:Ih,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:kh,_context:e},e.Consumer=e};K.createElement=fd;K.createFactory=function(e){var t=fd.bind(null,e);return t.type=e,t};K.createRef=function(){return{current:null}};K.forwardRef=function(e){return{$$typeof:Ch,render:e}};K.isValidElement=ml;K.lazy=function(e){return{$$typeof:_h,_payload:{_status:-1,_result:e},_init:Th}};K.memo=function(e,t){return{$$typeof:Ah,type:e,compare:t===void 0?null:t}};K.startTransition=function(e){var t=ni.transition;ni.transition={};try{e()}finally{ni.transition=t}};K.unstable_act=pd;K.useCallback=function(e,t){return Be.current.useCallback(e,t)};K.useContext=function(e){return Be.current.useContext(e)};K.useDebugValue=function(){};K.useDeferredValue=function(e){return Be.current.useDeferredValue(e)};K.useEffect=function(e,t){return Be.current.useEffect(e,t)};K.useId=function(){return Be.current.useId()};K.useImperativeHandle=function(e,t,n){return Be.current.useImperativeHandle(e,t,n)};K.useInsertionEffect=function(e,t){return Be.current.useInsertionEffect(e,t)};K.useLayoutEffect=function(e,t){return Be.current.useLayoutEffect(e,t)};K.useMemo=function(e,t){return Be.current.useMemo(e,t)};K.useReducer=function(e,t,n){return Be.current.useReducer(e,t,n)};K.useRef=function(e){return Be.current.useRef(e)};K.useState=function(e){return Be.current.useState(e)};K.useSyncExternalStore=function(e,t,n){return Be.current.useSyncExternalStore(e,t,n)};K.useTransition=function(){return Be.current.useTransition()};K.version="18.3.1";id.exports=K;var E=id.exports;const rt=rd(E);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nh=E,Rh=Symbol.for("react.element"),Dh=Symbol.for("react.fragment"),Lh=Object.prototype.hasOwnProperty,Oh=Nh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$h={key:!0,ref:!0,__self:!0,__source:!0};function hd(e,t,n){var r,o={},i=null,s=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)Lh.call(t,r)&&!$h.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:Rh,type:e,key:i,ref:s,props:o,_owner:Oh.current}}Ki.Fragment=Dh;Ki.jsx=hd;Ki.jsxs=hd;od.exports=Ki;var x=od.exports,md={exports:{}},dt={},yd={exports:{}},gd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,O){var b=T.length;T.push(O);e:for(;0<b;){var U=b-1>>>1,H=T[U];if(0<o(H,O))T[U]=O,T[b]=H,b=U;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var O=T[0],b=T.pop();if(b!==O){T[0]=b;e:for(var U=0,H=T.length,Z=H>>>1;U<Z;){var ne=2*(U+1)-1,X=T[ne],re=ne+1,q=T[re];if(0>o(X,b))re<H&&0>o(q,X)?(T[U]=q,T[re]=b,U=re):(T[U]=X,T[ne]=b,U=ne);else if(re<H&&0>o(q,b))T[U]=q,T[re]=b,U=re;else break e}}return O}function o(T,O){var b=T.sortIndex-O.sortIndex;return b!==0?b:T.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var l=[],u=[],c=1,d=null,m=3,v=!1,S=!1,p=!1,k=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(T){for(var O=n(u);O!==null;){if(O.callback===null)r(u);else if(O.startTime<=T)r(u),O.sortIndex=O.expirationTime,t(l,O);else break;O=n(u)}}function C(T){if(p=!1,g(T),!S)if(n(l)!==null)S=!0,R(w);else{var O=n(u);O!==null&&F(C,O.startTime-T)}}function w(T,O){S=!1,p&&(p=!1,h(z),z=-1),v=!0;var b=m;try{for(g(O),d=n(l);d!==null&&(!(d.expirationTime>O)||T&&!L());){var U=d.callback;if(typeof U=="function"){d.callback=null,m=d.priorityLevel;var H=U(d.expirationTime<=O);O=e.unstable_now(),typeof H=="function"?d.callback=H:d===n(l)&&r(l),g(O)}else r(l);d=n(l)}if(d!==null)var Z=!0;else{var ne=n(u);ne!==null&&F(C,ne.startTime-O),Z=!1}return Z}finally{d=null,m=b,v=!1}}var y=!1,I=null,z=-1,A=5,M=-1;function L(){return!(e.unstable_now()-M<A)}function N(){if(I!==null){var T=e.unstable_now();M=T;var O=!0;try{O=I(!0,T)}finally{O?_():(y=!1,I=null)}}else y=!1}var _;if(typeof f=="function")_=function(){f(N)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,D=j.port2;j.port1.onmessage=N,_=function(){D.postMessage(null)}}else _=function(){k(N,0)};function R(T){I=T,y||(y=!0,_())}function F(T,O){z=k(function(){T(e.unstable_now())},O)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){S||v||(S=!0,R(w))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(T){switch(m){case 1:case 2:case 3:var O=3;break;default:O=m}var b=m;m=O;try{return T()}finally{m=b}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,O){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var b=m;m=T;try{return O()}finally{m=b}},e.unstable_scheduleCallback=function(T,O,b){var U=e.unstable_now();switch(typeof b=="object"&&b!==null?(b=b.delay,b=typeof b=="number"&&0<b?U+b:U):b=U,T){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=b+H,T={id:c++,callback:O,priorityLevel:T,startTime:b,expirationTime:H,sortIndex:-1},b>U?(T.sortIndex=b,t(u,T),n(l)===null&&T===n(u)&&(p?(h(z),z=-1):p=!0,F(C,b-U))):(T.sortIndex=H,t(l,T),S||v||(S=!0,R(w))),T},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(T){var O=m;return function(){var b=m;m=O;try{return T.apply(this,arguments)}finally{m=b}}}})(gd);yd.exports=gd;var Fh=yd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bh=E,lt=Fh;function $(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vd=new Set,no={};function $n(e,t){fr(e,t),fr(e+"Capture",t)}function fr(e,t){for(no[e]=t,e=0;e<t.length;e++)vd.add(t[e])}var Wt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ta=Object.prototype.hasOwnProperty,Uh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Au={},_u={};function Vh(e){return ta.call(_u,e)?!0:ta.call(Au,e)?!1:Uh.test(e)?_u[e]=!0:(Au[e]=!0,!1)}function Hh(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Bh(e,t,n,r){if(t===null||typeof t>"u"||Hh(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function We(e,t,n,r,o,i,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var Pe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Pe[e]=new We(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Pe[t]=new We(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Pe[e]=new We(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Pe[e]=new We(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Pe[e]=new We(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Pe[e]=new We(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Pe[e]=new We(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Pe[e]=new We(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Pe[e]=new We(e,5,!1,e.toLowerCase(),null,!1,!1)});var yl=/[\-:]([a-z])/g;function gl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(yl,gl);Pe[t]=new We(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(yl,gl);Pe[t]=new We(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(yl,gl);Pe[t]=new We(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Pe[e]=new We(e,1,!1,e.toLowerCase(),null,!1,!1)});Pe.xlinkHref=new We("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Pe[e]=new We(e,1,!1,e.toLowerCase(),null,!0,!0)});function vl(e,t,n,r){var o=Pe.hasOwnProperty(t)?Pe[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Bh(t,n,o,r)&&(n=null),r||o===null?Vh(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Gt=bh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Oo=Symbol.for("react.element"),Bn=Symbol.for("react.portal"),Wn=Symbol.for("react.fragment"),Sl=Symbol.for("react.strict_mode"),na=Symbol.for("react.profiler"),Sd=Symbol.for("react.provider"),wd=Symbol.for("react.context"),wl=Symbol.for("react.forward_ref"),ra=Symbol.for("react.suspense"),oa=Symbol.for("react.suspense_list"),xl=Symbol.for("react.memo"),Jt=Symbol.for("react.lazy"),xd=Symbol.for("react.offscreen"),Mu=Symbol.iterator;function jr(e){return e===null||typeof e!="object"?null:(e=Mu&&e[Mu]||e["@@iterator"],typeof e=="function"?e:null)}var me=Object.assign,ws;function br(e){if(ws===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ws=t&&t[1]||""}return`
`+ws+e}var xs=!1;function ks(e,t){if(!e||xs)return"";xs=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var o=u.stack.split(`
`),i=r.stack.split(`
`),s=o.length-1,a=i.length-1;1<=s&&0<=a&&o[s]!==i[a];)a--;for(;1<=s&&0<=a;s--,a--)if(o[s]!==i[a]){if(s!==1||a!==1)do if(s--,a--,0>a||o[s]!==i[a]){var l=`
`+o[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=a);break}}}finally{xs=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?br(e):""}function Wh(e){switch(e.tag){case 5:return br(e.type);case 16:return br("Lazy");case 13:return br("Suspense");case 19:return br("SuspenseList");case 0:case 2:case 15:return e=ks(e.type,!1),e;case 11:return e=ks(e.type.render,!1),e;case 1:return e=ks(e.type,!0),e;default:return""}}function ia(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Wn:return"Fragment";case Bn:return"Portal";case na:return"Profiler";case Sl:return"StrictMode";case ra:return"Suspense";case oa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case wd:return(e.displayName||"Context")+".Consumer";case Sd:return(e._context.displayName||"Context")+".Provider";case wl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case xl:return t=e.displayName||null,t!==null?t:ia(e.type)||"Memo";case Jt:t=e._payload,e=e._init;try{return ia(e(t))}catch{}}return null}function Kh(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ia(t);case 8:return t===Sl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function fn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function kd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Qh(e){var t=kd(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(s){r=""+s,i.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function $o(e){e._valueTracker||(e._valueTracker=Qh(e))}function Id(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=kd(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function mi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function sa(e,t){var n=t.checked;return me({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function zu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=fn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Cd(e,t){t=t.checked,t!=null&&vl(e,"checked",t,!1)}function aa(e,t){Cd(e,t);var n=fn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?la(e,t.type,n):t.hasOwnProperty("defaultValue")&&la(e,t.type,fn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ju(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function la(e,t,n){(t!=="number"||mi(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ur=Array.isArray;function ir(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+fn(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function ua(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error($(91));return me({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Tu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error($(92));if(Ur(n)){if(1<n.length)throw Error($(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:fn(n)}}function Ed(e,t){var n=fn(t.value),r=fn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Pu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ad(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ca(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ad(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Fo,_d=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Fo=Fo||document.createElement("div"),Fo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Fo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ro(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Qr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yh=["Webkit","ms","Moz","O"];Object.keys(Qr).forEach(function(e){Yh.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Qr[t]=Qr[e]})});function Md(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Qr.hasOwnProperty(e)&&Qr[e]?(""+t).trim():t+"px"}function zd(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Md(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var Gh=me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function da(e,t){if(t){if(Gh[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error($(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error($(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error($(61))}if(t.style!=null&&typeof t.style!="object")throw Error($(62))}}function fa(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pa=null;function kl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ha=null,sr=null,ar=null;function Nu(e){if(e=zo(e)){if(typeof ha!="function")throw Error($(280));var t=e.stateNode;t&&(t=Ji(t),ha(e.stateNode,e.type,t))}}function jd(e){sr?ar?ar.push(e):ar=[e]:sr=e}function Td(){if(sr){var e=sr,t=ar;if(ar=sr=null,Nu(e),t)for(e=0;e<t.length;e++)Nu(t[e])}}function Pd(e,t){return e(t)}function Nd(){}var Is=!1;function Rd(e,t,n){if(Is)return e(t,n);Is=!0;try{return Pd(e,t,n)}finally{Is=!1,(sr!==null||ar!==null)&&(Nd(),Td())}}function oo(e,t){var n=e.stateNode;if(n===null)return null;var r=Ji(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error($(231,t,typeof n));return n}var ma=!1;if(Wt)try{var Tr={};Object.defineProperty(Tr,"passive",{get:function(){ma=!0}}),window.addEventListener("test",Tr,Tr),window.removeEventListener("test",Tr,Tr)}catch{ma=!1}function Xh(e,t,n,r,o,i,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Yr=!1,yi=null,gi=!1,ya=null,Jh={onError:function(e){Yr=!0,yi=e}};function Zh(e,t,n,r,o,i,s,a,l){Yr=!1,yi=null,Xh.apply(Jh,arguments)}function qh(e,t,n,r,o,i,s,a,l){if(Zh.apply(this,arguments),Yr){if(Yr){var u=yi;Yr=!1,yi=null}else throw Error($(198));gi||(gi=!0,ya=u)}}function Fn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Dd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ru(e){if(Fn(e)!==e)throw Error($(188))}function em(e){var t=e.alternate;if(!t){if(t=Fn(e),t===null)throw Error($(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var i=o.alternate;if(i===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return Ru(o),e;if(i===r)return Ru(o),t;i=i.sibling}throw Error($(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s){for(a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?e:t}function Ld(e){return e=em(e),e!==null?Od(e):null}function Od(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Od(e);if(t!==null)return t;e=e.sibling}return null}var $d=lt.unstable_scheduleCallback,Du=lt.unstable_cancelCallback,tm=lt.unstable_shouldYield,nm=lt.unstable_requestPaint,we=lt.unstable_now,rm=lt.unstable_getCurrentPriorityLevel,Il=lt.unstable_ImmediatePriority,Fd=lt.unstable_UserBlockingPriority,vi=lt.unstable_NormalPriority,om=lt.unstable_LowPriority,bd=lt.unstable_IdlePriority,Qi=null,Ot=null;function im(e){if(Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(Qi,e,void 0,(e.current.flags&128)===128)}catch{}}var zt=Math.clz32?Math.clz32:lm,sm=Math.log,am=Math.LN2;function lm(e){return e>>>=0,e===0?32:31-(sm(e)/am|0)|0}var bo=64,Uo=4194304;function Vr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Si(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,s=n&268435455;if(s!==0){var a=s&~o;a!==0?r=Vr(a):(i&=s,i!==0&&(r=Vr(i)))}else s=n&~o,s!==0?r=Vr(s):i!==0&&(r=Vr(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,i=t&-t,o>=i||o===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-zt(t),o=1<<n,r|=e[n],t&=~o;return r}function um(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cm(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-zt(i),a=1<<s,l=o[s];l===-1?(!(a&n)||a&r)&&(o[s]=um(a,t)):l<=t&&(e.expiredLanes|=a),i&=~a}}function ga(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ud(){var e=bo;return bo<<=1,!(bo&4194240)&&(bo=64),e}function Cs(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function _o(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-zt(t),e[t]=n}function dm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-zt(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}function Cl(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-zt(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var te=0;function Vd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Hd,El,Bd,Wd,Kd,va=!1,Vo=[],rn=null,on=null,sn=null,io=new Map,so=new Map,qt=[],fm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lu(e,t){switch(e){case"focusin":case"focusout":rn=null;break;case"dragenter":case"dragleave":on=null;break;case"mouseover":case"mouseout":sn=null;break;case"pointerover":case"pointerout":io.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":so.delete(t.pointerId)}}function Pr(e,t,n,r,o,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},t!==null&&(t=zo(t),t!==null&&El(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function pm(e,t,n,r,o){switch(t){case"focusin":return rn=Pr(rn,e,t,n,r,o),!0;case"dragenter":return on=Pr(on,e,t,n,r,o),!0;case"mouseover":return sn=Pr(sn,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return io.set(i,Pr(io.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,so.set(i,Pr(so.get(i)||null,e,t,n,r,o)),!0}return!1}function Qd(e){var t=An(e.target);if(t!==null){var n=Fn(t);if(n!==null){if(t=n.tag,t===13){if(t=Dd(n),t!==null){e.blockedOn=t,Kd(e.priority,function(){Bd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ri(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Sa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);pa=r,n.target.dispatchEvent(r),pa=null}else return t=zo(n),t!==null&&El(t),e.blockedOn=n,!1;t.shift()}return!0}function Ou(e,t,n){ri(e)&&n.delete(t)}function hm(){va=!1,rn!==null&&ri(rn)&&(rn=null),on!==null&&ri(on)&&(on=null),sn!==null&&ri(sn)&&(sn=null),io.forEach(Ou),so.forEach(Ou)}function Nr(e,t){e.blockedOn===t&&(e.blockedOn=null,va||(va=!0,lt.unstable_scheduleCallback(lt.unstable_NormalPriority,hm)))}function ao(e){function t(o){return Nr(o,e)}if(0<Vo.length){Nr(Vo[0],e);for(var n=1;n<Vo.length;n++){var r=Vo[n];r.blockedOn===e&&(r.blockedOn=null)}}for(rn!==null&&Nr(rn,e),on!==null&&Nr(on,e),sn!==null&&Nr(sn,e),io.forEach(t),so.forEach(t),n=0;n<qt.length;n++)r=qt[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<qt.length&&(n=qt[0],n.blockedOn===null);)Qd(n),n.blockedOn===null&&qt.shift()}var lr=Gt.ReactCurrentBatchConfig,wi=!0;function mm(e,t,n,r){var o=te,i=lr.transition;lr.transition=null;try{te=1,Al(e,t,n,r)}finally{te=o,lr.transition=i}}function ym(e,t,n,r){var o=te,i=lr.transition;lr.transition=null;try{te=4,Al(e,t,n,r)}finally{te=o,lr.transition=i}}function Al(e,t,n,r){if(wi){var o=Sa(e,t,n,r);if(o===null)Rs(e,t,r,xi,n),Lu(e,r);else if(pm(o,e,t,n,r))r.stopPropagation();else if(Lu(e,r),t&4&&-1<fm.indexOf(e)){for(;o!==null;){var i=zo(o);if(i!==null&&Hd(i),i=Sa(e,t,n,r),i===null&&Rs(e,t,r,xi,n),i===o)break;o=i}o!==null&&r.stopPropagation()}else Rs(e,t,r,null,n)}}var xi=null;function Sa(e,t,n,r){if(xi=null,e=kl(r),e=An(e),e!==null)if(t=Fn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Dd(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return xi=e,null}function Yd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rm()){case Il:return 1;case Fd:return 4;case vi:case om:return 16;case bd:return 536870912;default:return 16}default:return 16}}var tn=null,_l=null,oi=null;function Gd(){if(oi)return oi;var e,t=_l,n=t.length,r,o="value"in tn?tn.value:tn.textContent,i=o.length;for(e=0;e<n&&t[e]===o[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===o[i-r];r++);return oi=o.slice(e,1<r?1-r:void 0)}function ii(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ho(){return!0}function $u(){return!1}function ft(e){function t(n,r,o,i,s){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ho:$u,this.isPropagationStopped=$u,this}return me(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ho)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ho)},persist:function(){},isPersistent:Ho}),t}var _r={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ml=ft(_r),Mo=me({},_r,{view:0,detail:0}),gm=ft(Mo),Es,As,Rr,Yi=me({},Mo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Rr&&(Rr&&e.type==="mousemove"?(Es=e.screenX-Rr.screenX,As=e.screenY-Rr.screenY):As=Es=0,Rr=e),Es)},movementY:function(e){return"movementY"in e?e.movementY:As}}),Fu=ft(Yi),vm=me({},Yi,{dataTransfer:0}),Sm=ft(vm),wm=me({},Mo,{relatedTarget:0}),_s=ft(wm),xm=me({},_r,{animationName:0,elapsedTime:0,pseudoElement:0}),km=ft(xm),Im=me({},_r,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Cm=ft(Im),Em=me({},_r,{data:0}),bu=ft(Em),Am={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_m={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Mm[e])?!!t[e]:!1}function zl(){return zm}var jm=me({},Mo,{key:function(e){if(e.key){var t=Am[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ii(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?_m[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zl,charCode:function(e){return e.type==="keypress"?ii(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ii(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Tm=ft(jm),Pm=me({},Yi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uu=ft(Pm),Nm=me({},Mo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zl}),Rm=ft(Nm),Dm=me({},_r,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lm=ft(Dm),Om=me({},Yi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$m=ft(Om),Fm=[9,13,27,32],jl=Wt&&"CompositionEvent"in window,Gr=null;Wt&&"documentMode"in document&&(Gr=document.documentMode);var bm=Wt&&"TextEvent"in window&&!Gr,Xd=Wt&&(!jl||Gr&&8<Gr&&11>=Gr),Vu=" ",Hu=!1;function Jd(e,t){switch(e){case"keyup":return Fm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Kn=!1;function Um(e,t){switch(e){case"compositionend":return Zd(t);case"keypress":return t.which!==32?null:(Hu=!0,Vu);case"textInput":return e=t.data,e===Vu&&Hu?null:e;default:return null}}function Vm(e,t){if(Kn)return e==="compositionend"||!jl&&Jd(e,t)?(e=Gd(),oi=_l=tn=null,Kn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Xd&&t.locale!=="ko"?null:t.data;default:return null}}var Hm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Hm[e.type]:t==="textarea"}function qd(e,t,n,r){jd(r),t=ki(t,"onChange"),0<t.length&&(n=new Ml("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Xr=null,lo=null;function Bm(e){df(e,0)}function Gi(e){var t=Gn(e);if(Id(t))return e}function Wm(e,t){if(e==="change")return t}var ef=!1;if(Wt){var Ms;if(Wt){var zs="oninput"in document;if(!zs){var Wu=document.createElement("div");Wu.setAttribute("oninput","return;"),zs=typeof Wu.oninput=="function"}Ms=zs}else Ms=!1;ef=Ms&&(!document.documentMode||9<document.documentMode)}function Ku(){Xr&&(Xr.detachEvent("onpropertychange",tf),lo=Xr=null)}function tf(e){if(e.propertyName==="value"&&Gi(lo)){var t=[];qd(t,lo,e,kl(e)),Rd(Bm,t)}}function Km(e,t,n){e==="focusin"?(Ku(),Xr=t,lo=n,Xr.attachEvent("onpropertychange",tf)):e==="focusout"&&Ku()}function Qm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Gi(lo)}function Ym(e,t){if(e==="click")return Gi(t)}function Gm(e,t){if(e==="input"||e==="change")return Gi(t)}function Xm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Tt=typeof Object.is=="function"?Object.is:Xm;function uo(e,t){if(Tt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!ta.call(t,o)||!Tt(e[o],t[o]))return!1}return!0}function Qu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Yu(e,t){var n=Qu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Qu(n)}}function nf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?nf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function rf(){for(var e=window,t=mi();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=mi(e.document)}return t}function Tl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Jm(e){var t=rf(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&nf(n.ownerDocument.documentElement,n)){if(r!==null&&Tl(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=r.end===void 0?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=Yu(n,i);var s=Yu(n,r);o&&s&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Zm=Wt&&"documentMode"in document&&11>=document.documentMode,Qn=null,wa=null,Jr=null,xa=!1;function Gu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xa||Qn==null||Qn!==mi(r)||(r=Qn,"selectionStart"in r&&Tl(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Jr&&uo(Jr,r)||(Jr=r,r=ki(wa,"onSelect"),0<r.length&&(t=new Ml("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Qn)))}function Bo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Yn={animationend:Bo("Animation","AnimationEnd"),animationiteration:Bo("Animation","AnimationIteration"),animationstart:Bo("Animation","AnimationStart"),transitionend:Bo("Transition","TransitionEnd")},js={},of={};Wt&&(of=document.createElement("div").style,"AnimationEvent"in window||(delete Yn.animationend.animation,delete Yn.animationiteration.animation,delete Yn.animationstart.animation),"TransitionEvent"in window||delete Yn.transitionend.transition);function Xi(e){if(js[e])return js[e];if(!Yn[e])return e;var t=Yn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in of)return js[e]=t[n];return e}var sf=Xi("animationend"),af=Xi("animationiteration"),lf=Xi("animationstart"),uf=Xi("transitionend"),cf=new Map,Xu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hn(e,t){cf.set(e,t),$n(t,[e])}for(var Ts=0;Ts<Xu.length;Ts++){var Ps=Xu[Ts],qm=Ps.toLowerCase(),ey=Ps[0].toUpperCase()+Ps.slice(1);hn(qm,"on"+ey)}hn(sf,"onAnimationEnd");hn(af,"onAnimationIteration");hn(lf,"onAnimationStart");hn("dblclick","onDoubleClick");hn("focusin","onFocus");hn("focusout","onBlur");hn(uf,"onTransitionEnd");fr("onMouseEnter",["mouseout","mouseover"]);fr("onMouseLeave",["mouseout","mouseover"]);fr("onPointerEnter",["pointerout","pointerover"]);fr("onPointerLeave",["pointerout","pointerover"]);$n("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$n("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$n("onBeforeInput",["compositionend","keypress","textInput","paste"]);$n("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$n("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$n("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ty=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hr));function Ju(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,qh(r,t,void 0,e),e.currentTarget=null}function df(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&o.isPropagationStopped())break e;Ju(o,a,u),i=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&o.isPropagationStopped())break e;Ju(o,a,u),i=l}}}if(gi)throw e=ya,gi=!1,ya=null,e}function ae(e,t){var n=t[Aa];n===void 0&&(n=t[Aa]=new Set);var r=e+"__bubble";n.has(r)||(ff(t,e,2,!1),n.add(r))}function Ns(e,t,n){var r=0;t&&(r|=4),ff(n,e,r,t)}var Wo="_reactListening"+Math.random().toString(36).slice(2);function co(e){if(!e[Wo]){e[Wo]=!0,vd.forEach(function(n){n!=="selectionchange"&&(ty.has(n)||Ns(n,!1,e),Ns(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Wo]||(t[Wo]=!0,Ns("selectionchange",!1,t))}}function ff(e,t,n,r){switch(Yd(t)){case 1:var o=mm;break;case 4:o=ym;break;default:o=Al}n=o.bind(null,t,n,e),o=void 0,!ma||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Rs(e,t,n,r,o){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===o||l.nodeType===8&&l.parentNode===o))return;s=s.return}for(;a!==null;){if(s=An(a),s===null)return;if(l=s.tag,l===5||l===6){r=i=s;continue e}a=a.parentNode}}r=r.return}Rd(function(){var u=i,c=kl(n),d=[];e:{var m=cf.get(e);if(m!==void 0){var v=Ml,S=e;switch(e){case"keypress":if(ii(n)===0)break e;case"keydown":case"keyup":v=Tm;break;case"focusin":S="focus",v=_s;break;case"focusout":S="blur",v=_s;break;case"beforeblur":case"afterblur":v=_s;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Fu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Sm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=Rm;break;case sf:case af:case lf:v=km;break;case uf:v=Lm;break;case"scroll":v=gm;break;case"wheel":v=$m;break;case"copy":case"cut":case"paste":v=Cm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Uu}var p=(t&4)!==0,k=!p&&e==="scroll",h=p?m!==null?m+"Capture":null:m;p=[];for(var f=u,g;f!==null;){g=f;var C=g.stateNode;if(g.tag===5&&C!==null&&(g=C,h!==null&&(C=oo(f,h),C!=null&&p.push(fo(f,C,g)))),k)break;f=f.return}0<p.length&&(m=new v(m,S,null,n,c),d.push({event:m,listeners:p}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",m&&n!==pa&&(S=n.relatedTarget||n.fromElement)&&(An(S)||S[Kt]))break e;if((v||m)&&(m=c.window===c?c:(m=c.ownerDocument)?m.defaultView||m.parentWindow:window,v?(S=n.relatedTarget||n.toElement,v=u,S=S?An(S):null,S!==null&&(k=Fn(S),S!==k||S.tag!==5&&S.tag!==6)&&(S=null)):(v=null,S=u),v!==S)){if(p=Fu,C="onMouseLeave",h="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(p=Uu,C="onPointerLeave",h="onPointerEnter",f="pointer"),k=v==null?m:Gn(v),g=S==null?m:Gn(S),m=new p(C,f+"leave",v,n,c),m.target=k,m.relatedTarget=g,C=null,An(c)===u&&(p=new p(h,f+"enter",S,n,c),p.target=g,p.relatedTarget=k,C=p),k=C,v&&S)t:{for(p=v,h=S,f=0,g=p;g;g=Un(g))f++;for(g=0,C=h;C;C=Un(C))g++;for(;0<f-g;)p=Un(p),f--;for(;0<g-f;)h=Un(h),g--;for(;f--;){if(p===h||h!==null&&p===h.alternate)break t;p=Un(p),h=Un(h)}p=null}else p=null;v!==null&&Zu(d,m,v,p,!1),S!==null&&k!==null&&Zu(d,k,S,p,!0)}}e:{if(m=u?Gn(u):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var w=Wm;else if(Bu(m))if(ef)w=Gm;else{w=Qm;var y=Km}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(w=Ym);if(w&&(w=w(e,u))){qd(d,w,n,c);break e}y&&y(e,m,u),e==="focusout"&&(y=m._wrapperState)&&y.controlled&&m.type==="number"&&la(m,"number",m.value)}switch(y=u?Gn(u):window,e){case"focusin":(Bu(y)||y.contentEditable==="true")&&(Qn=y,wa=u,Jr=null);break;case"focusout":Jr=wa=Qn=null;break;case"mousedown":xa=!0;break;case"contextmenu":case"mouseup":case"dragend":xa=!1,Gu(d,n,c);break;case"selectionchange":if(Zm)break;case"keydown":case"keyup":Gu(d,n,c)}var I;if(jl)e:{switch(e){case"compositionstart":var z="onCompositionStart";break e;case"compositionend":z="onCompositionEnd";break e;case"compositionupdate":z="onCompositionUpdate";break e}z=void 0}else Kn?Jd(e,n)&&(z="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(z="onCompositionStart");z&&(Xd&&n.locale!=="ko"&&(Kn||z!=="onCompositionStart"?z==="onCompositionEnd"&&Kn&&(I=Gd()):(tn=c,_l="value"in tn?tn.value:tn.textContent,Kn=!0)),y=ki(u,z),0<y.length&&(z=new bu(z,e,null,n,c),d.push({event:z,listeners:y}),I?z.data=I:(I=Zd(n),I!==null&&(z.data=I)))),(I=bm?Um(e,n):Vm(e,n))&&(u=ki(u,"onBeforeInput"),0<u.length&&(c=new bu("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=I))}df(d,t)})}function fo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ki(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=oo(e,n),i!=null&&r.unshift(fo(e,i,o)),i=oo(e,t),i!=null&&r.push(fo(e,i,o))),e=e.return}return r}function Un(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Zu(e,t,n,r,o){for(var i=t._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,o?(l=oo(n,i),l!=null&&s.unshift(fo(n,l,a))):o||(l=oo(n,i),l!=null&&s.push(fo(n,l,a)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var ny=/\r\n?/g,ry=/\u0000|\uFFFD/g;function qu(e){return(typeof e=="string"?e:""+e).replace(ny,`
`).replace(ry,"")}function Ko(e,t,n){if(t=qu(t),qu(e)!==t&&n)throw Error($(425))}function Ii(){}var ka=null,Ia=null;function Ca(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ea=typeof setTimeout=="function"?setTimeout:void 0,oy=typeof clearTimeout=="function"?clearTimeout:void 0,ec=typeof Promise=="function"?Promise:void 0,iy=typeof queueMicrotask=="function"?queueMicrotask:typeof ec<"u"?function(e){return ec.resolve(null).then(e).catch(sy)}:Ea;function sy(e){setTimeout(function(){throw e})}function Ds(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),ao(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);ao(t)}function an(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function tc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Mr=Math.random().toString(36).slice(2),Lt="__reactFiber$"+Mr,po="__reactProps$"+Mr,Kt="__reactContainer$"+Mr,Aa="__reactEvents$"+Mr,ay="__reactListeners$"+Mr,ly="__reactHandles$"+Mr;function An(e){var t=e[Lt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Kt]||n[Lt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=tc(e);e!==null;){if(n=e[Lt])return n;e=tc(e)}return t}e=n,n=e.parentNode}return null}function zo(e){return e=e[Lt]||e[Kt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Gn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error($(33))}function Ji(e){return e[po]||null}var _a=[],Xn=-1;function mn(e){return{current:e}}function le(e){0>Xn||(e.current=_a[Xn],_a[Xn]=null,Xn--)}function se(e,t){Xn++,_a[Xn]=e.current,e.current=t}var pn={},be=mn(pn),et=mn(!1),Tn=pn;function pr(e,t){var n=e.type.contextTypes;if(!n)return pn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in n)o[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function tt(e){return e=e.childContextTypes,e!=null}function Ci(){le(et),le(be)}function nc(e,t,n){if(be.current!==pn)throw Error($(168));se(be,t),se(et,n)}function pf(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error($(108,Kh(e)||"Unknown",o));return me({},n,r)}function Ei(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||pn,Tn=be.current,se(be,e),se(et,et.current),!0}function rc(e,t,n){var r=e.stateNode;if(!r)throw Error($(169));n?(e=pf(e,t,Tn),r.__reactInternalMemoizedMergedChildContext=e,le(et),le(be),se(be,e)):le(et),se(et,n)}var Ut=null,Zi=!1,Ls=!1;function hf(e){Ut===null?Ut=[e]:Ut.push(e)}function uy(e){Zi=!0,hf(e)}function yn(){if(!Ls&&Ut!==null){Ls=!0;var e=0,t=te;try{var n=Ut;for(te=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ut=null,Zi=!1}catch(o){throw Ut!==null&&(Ut=Ut.slice(e+1)),$d(Il,yn),o}finally{te=t,Ls=!1}}return null}var Jn=[],Zn=0,Ai=null,_i=0,ht=[],mt=0,Pn=null,Vt=1,Ht="";function kn(e,t){Jn[Zn++]=_i,Jn[Zn++]=Ai,Ai=e,_i=t}function mf(e,t,n){ht[mt++]=Vt,ht[mt++]=Ht,ht[mt++]=Pn,Pn=e;var r=Vt;e=Ht;var o=32-zt(r)-1;r&=~(1<<o),n+=1;var i=32-zt(t)+o;if(30<i){var s=o-o%5;i=(r&(1<<s)-1).toString(32),r>>=s,o-=s,Vt=1<<32-zt(t)+o|n<<o|r,Ht=i+e}else Vt=1<<i|n<<o|r,Ht=e}function Pl(e){e.return!==null&&(kn(e,1),mf(e,1,0))}function Nl(e){for(;e===Ai;)Ai=Jn[--Zn],Jn[Zn]=null,_i=Jn[--Zn],Jn[Zn]=null;for(;e===Pn;)Pn=ht[--mt],ht[mt]=null,Ht=ht[--mt],ht[mt]=null,Vt=ht[--mt],ht[mt]=null}var at=null,st=null,de=!1,_t=null;function yf(e,t){var n=yt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function oc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,at=e,st=an(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,at=e,st=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Pn!==null?{id:Vt,overflow:Ht}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=yt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,at=e,st=null,!0):!1;default:return!1}}function Ma(e){return(e.mode&1)!==0&&(e.flags&128)===0}function za(e){if(de){var t=st;if(t){var n=t;if(!oc(e,t)){if(Ma(e))throw Error($(418));t=an(n.nextSibling);var r=at;t&&oc(e,t)?yf(r,n):(e.flags=e.flags&-4097|2,de=!1,at=e)}}else{if(Ma(e))throw Error($(418));e.flags=e.flags&-4097|2,de=!1,at=e}}}function ic(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;at=e}function Qo(e){if(e!==at)return!1;if(!de)return ic(e),de=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ca(e.type,e.memoizedProps)),t&&(t=st)){if(Ma(e))throw gf(),Error($(418));for(;t;)yf(e,t),t=an(t.nextSibling)}if(ic(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error($(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){st=an(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}st=null}}else st=at?an(e.stateNode.nextSibling):null;return!0}function gf(){for(var e=st;e;)e=an(e.nextSibling)}function hr(){st=at=null,de=!1}function Rl(e){_t===null?_t=[e]:_t.push(e)}var cy=Gt.ReactCurrentBatchConfig;function Dr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,e));var o=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(s){var a=o.refs;s===null?delete a[i]:a[i]=s},t._stringRef=i,t)}if(typeof e!="string")throw Error($(284));if(!n._owner)throw Error($(290,e))}return e}function Yo(e,t){throw e=Object.prototype.toString.call(t),Error($(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function sc(e){var t=e._init;return t(e._payload)}function vf(e){function t(h,f){if(e){var g=h.deletions;g===null?(h.deletions=[f],h.flags|=16):g.push(f)}}function n(h,f){if(!e)return null;for(;f!==null;)t(h,f),f=f.sibling;return null}function r(h,f){for(h=new Map;f!==null;)f.key!==null?h.set(f.key,f):h.set(f.index,f),f=f.sibling;return h}function o(h,f){return h=dn(h,f),h.index=0,h.sibling=null,h}function i(h,f,g){return h.index=g,e?(g=h.alternate,g!==null?(g=g.index,g<f?(h.flags|=2,f):g):(h.flags|=2,f)):(h.flags|=1048576,f)}function s(h){return e&&h.alternate===null&&(h.flags|=2),h}function a(h,f,g,C){return f===null||f.tag!==6?(f=Hs(g,h.mode,C),f.return=h,f):(f=o(f,g),f.return=h,f)}function l(h,f,g,C){var w=g.type;return w===Wn?c(h,f,g.props.children,C,g.key):f!==null&&(f.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Jt&&sc(w)===f.type)?(C=o(f,g.props),C.ref=Dr(h,f,g),C.return=h,C):(C=fi(g.type,g.key,g.props,null,h.mode,C),C.ref=Dr(h,f,g),C.return=h,C)}function u(h,f,g,C){return f===null||f.tag!==4||f.stateNode.containerInfo!==g.containerInfo||f.stateNode.implementation!==g.implementation?(f=Bs(g,h.mode,C),f.return=h,f):(f=o(f,g.children||[]),f.return=h,f)}function c(h,f,g,C,w){return f===null||f.tag!==7?(f=jn(g,h.mode,C,w),f.return=h,f):(f=o(f,g),f.return=h,f)}function d(h,f,g){if(typeof f=="string"&&f!==""||typeof f=="number")return f=Hs(""+f,h.mode,g),f.return=h,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Oo:return g=fi(f.type,f.key,f.props,null,h.mode,g),g.ref=Dr(h,null,f),g.return=h,g;case Bn:return f=Bs(f,h.mode,g),f.return=h,f;case Jt:var C=f._init;return d(h,C(f._payload),g)}if(Ur(f)||jr(f))return f=jn(f,h.mode,g,null),f.return=h,f;Yo(h,f)}return null}function m(h,f,g,C){var w=f!==null?f.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return w!==null?null:a(h,f,""+g,C);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Oo:return g.key===w?l(h,f,g,C):null;case Bn:return g.key===w?u(h,f,g,C):null;case Jt:return w=g._init,m(h,f,w(g._payload),C)}if(Ur(g)||jr(g))return w!==null?null:c(h,f,g,C,null);Yo(h,g)}return null}function v(h,f,g,C,w){if(typeof C=="string"&&C!==""||typeof C=="number")return h=h.get(g)||null,a(f,h,""+C,w);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Oo:return h=h.get(C.key===null?g:C.key)||null,l(f,h,C,w);case Bn:return h=h.get(C.key===null?g:C.key)||null,u(f,h,C,w);case Jt:var y=C._init;return v(h,f,g,y(C._payload),w)}if(Ur(C)||jr(C))return h=h.get(g)||null,c(f,h,C,w,null);Yo(f,C)}return null}function S(h,f,g,C){for(var w=null,y=null,I=f,z=f=0,A=null;I!==null&&z<g.length;z++){I.index>z?(A=I,I=null):A=I.sibling;var M=m(h,I,g[z],C);if(M===null){I===null&&(I=A);break}e&&I&&M.alternate===null&&t(h,I),f=i(M,f,z),y===null?w=M:y.sibling=M,y=M,I=A}if(z===g.length)return n(h,I),de&&kn(h,z),w;if(I===null){for(;z<g.length;z++)I=d(h,g[z],C),I!==null&&(f=i(I,f,z),y===null?w=I:y.sibling=I,y=I);return de&&kn(h,z),w}for(I=r(h,I);z<g.length;z++)A=v(I,h,z,g[z],C),A!==null&&(e&&A.alternate!==null&&I.delete(A.key===null?z:A.key),f=i(A,f,z),y===null?w=A:y.sibling=A,y=A);return e&&I.forEach(function(L){return t(h,L)}),de&&kn(h,z),w}function p(h,f,g,C){var w=jr(g);if(typeof w!="function")throw Error($(150));if(g=w.call(g),g==null)throw Error($(151));for(var y=w=null,I=f,z=f=0,A=null,M=g.next();I!==null&&!M.done;z++,M=g.next()){I.index>z?(A=I,I=null):A=I.sibling;var L=m(h,I,M.value,C);if(L===null){I===null&&(I=A);break}e&&I&&L.alternate===null&&t(h,I),f=i(L,f,z),y===null?w=L:y.sibling=L,y=L,I=A}if(M.done)return n(h,I),de&&kn(h,z),w;if(I===null){for(;!M.done;z++,M=g.next())M=d(h,M.value,C),M!==null&&(f=i(M,f,z),y===null?w=M:y.sibling=M,y=M);return de&&kn(h,z),w}for(I=r(h,I);!M.done;z++,M=g.next())M=v(I,h,z,M.value,C),M!==null&&(e&&M.alternate!==null&&I.delete(M.key===null?z:M.key),f=i(M,f,z),y===null?w=M:y.sibling=M,y=M);return e&&I.forEach(function(N){return t(h,N)}),de&&kn(h,z),w}function k(h,f,g,C){if(typeof g=="object"&&g!==null&&g.type===Wn&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Oo:e:{for(var w=g.key,y=f;y!==null;){if(y.key===w){if(w=g.type,w===Wn){if(y.tag===7){n(h,y.sibling),f=o(y,g.props.children),f.return=h,h=f;break e}}else if(y.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Jt&&sc(w)===y.type){n(h,y.sibling),f=o(y,g.props),f.ref=Dr(h,y,g),f.return=h,h=f;break e}n(h,y);break}else t(h,y);y=y.sibling}g.type===Wn?(f=jn(g.props.children,h.mode,C,g.key),f.return=h,h=f):(C=fi(g.type,g.key,g.props,null,h.mode,C),C.ref=Dr(h,f,g),C.return=h,h=C)}return s(h);case Bn:e:{for(y=g.key;f!==null;){if(f.key===y)if(f.tag===4&&f.stateNode.containerInfo===g.containerInfo&&f.stateNode.implementation===g.implementation){n(h,f.sibling),f=o(f,g.children||[]),f.return=h,h=f;break e}else{n(h,f);break}else t(h,f);f=f.sibling}f=Bs(g,h.mode,C),f.return=h,h=f}return s(h);case Jt:return y=g._init,k(h,f,y(g._payload),C)}if(Ur(g))return S(h,f,g,C);if(jr(g))return p(h,f,g,C);Yo(h,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,f!==null&&f.tag===6?(n(h,f.sibling),f=o(f,g),f.return=h,h=f):(n(h,f),f=Hs(g,h.mode,C),f.return=h,h=f),s(h)):n(h,f)}return k}var mr=vf(!0),Sf=vf(!1),Mi=mn(null),zi=null,qn=null,Dl=null;function Ll(){Dl=qn=zi=null}function Ol(e){var t=Mi.current;le(Mi),e._currentValue=t}function ja(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ur(e,t){zi=e,Dl=qn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ze=!0),e.firstContext=null)}function wt(e){var t=e._currentValue;if(Dl!==e)if(e={context:e,memoizedValue:t,next:null},qn===null){if(zi===null)throw Error($(308));qn=e,zi.dependencies={lanes:0,firstContext:e}}else qn=qn.next=e;return t}var _n=null;function $l(e){_n===null?_n=[e]:_n.push(e)}function wf(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,$l(t)):(n.next=o.next,o.next=n),t.interleaved=n,Qt(e,r)}function Qt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Zt=!1;function Fl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ln(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,G&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Qt(e,n)}return o=r.interleaved,o===null?(t.next=t,$l(r)):(t.next=o.next,o.next=t),r.interleaved=t,Qt(e,n)}function si(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Cl(e,n)}}function ac(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?o=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?o=i=t:i=i.next=t}else o=i=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ji(e,t,n,r){var o=e.updateQueue;Zt=!1;var i=o.firstBaseUpdate,s=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?i=u:s.next=u,s=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==s&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(i!==null){var d=o.baseState;s=0,c=u=l=null,a=i;do{var m=a.lane,v=a.eventTime;if((r&m)===m){c!==null&&(c=c.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var S=e,p=a;switch(m=t,v=n,p.tag){case 1:if(S=p.payload,typeof S=="function"){d=S.call(v,d,m);break e}d=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=p.payload,m=typeof S=="function"?S.call(v,d,m):S,m==null)break e;d=me({},d,m);break e;case 2:Zt=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,m=o.effects,m===null?o.effects=[a]:m.push(a))}else v={eventTime:v,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=v,l=d):c=c.next=v,s|=m;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;m=a,a=m.next,m.next=null,o.lastBaseUpdate=m,o.shared.pending=null}}while(!0);if(c===null&&(l=d),o.baseState=l,o.firstBaseUpdate=u,o.lastBaseUpdate=c,t=o.shared.interleaved,t!==null){o=t;do s|=o.lane,o=o.next;while(o!==t)}else i===null&&(o.shared.lanes=0);Rn|=s,e.lanes=s,e.memoizedState=d}}function lc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error($(191,o));o.call(r)}}}var jo={},$t=mn(jo),ho=mn(jo),mo=mn(jo);function Mn(e){if(e===jo)throw Error($(174));return e}function bl(e,t){switch(se(mo,t),se(ho,e),se($t,jo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ca(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ca(t,e)}le($t),se($t,t)}function yr(){le($t),le(ho),le(mo)}function kf(e){Mn(mo.current);var t=Mn($t.current),n=ca(t,e.type);t!==n&&(se(ho,e),se($t,n))}function Ul(e){ho.current===e&&(le($t),le(ho))}var pe=mn(0);function Ti(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Os=[];function Vl(){for(var e=0;e<Os.length;e++)Os[e]._workInProgressVersionPrimary=null;Os.length=0}var ai=Gt.ReactCurrentDispatcher,$s=Gt.ReactCurrentBatchConfig,Nn=0,he=null,Ce=null,Ae=null,Pi=!1,Zr=!1,yo=0,dy=0;function Le(){throw Error($(321))}function Hl(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Tt(e[n],t[n]))return!1;return!0}function Bl(e,t,n,r,o,i){if(Nn=i,he=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ai.current=e===null||e.memoizedState===null?my:yy,e=n(r,o),Zr){i=0;do{if(Zr=!1,yo=0,25<=i)throw Error($(301));i+=1,Ae=Ce=null,t.updateQueue=null,ai.current=gy,e=n(r,o)}while(Zr)}if(ai.current=Ni,t=Ce!==null&&Ce.next!==null,Nn=0,Ae=Ce=he=null,Pi=!1,t)throw Error($(300));return e}function Wl(){var e=yo!==0;return yo=0,e}function Dt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ae===null?he.memoizedState=Ae=e:Ae=Ae.next=e,Ae}function xt(){if(Ce===null){var e=he.alternate;e=e!==null?e.memoizedState:null}else e=Ce.next;var t=Ae===null?he.memoizedState:Ae.next;if(t!==null)Ae=t,Ce=e;else{if(e===null)throw Error($(310));Ce=e,e={memoizedState:Ce.memoizedState,baseState:Ce.baseState,baseQueue:Ce.baseQueue,queue:Ce.queue,next:null},Ae===null?he.memoizedState=Ae=e:Ae=Ae.next=e}return Ae}function go(e,t){return typeof t=="function"?t(e):t}function Fs(e){var t=xt(),n=t.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var r=Ce,o=r.baseQueue,i=n.pending;if(i!==null){if(o!==null){var s=o.next;o.next=i.next,i.next=s}r.baseQueue=o=i,n.pending=null}if(o!==null){i=o.next,r=r.baseState;var a=s=null,l=null,u=i;do{var c=u.lane;if((Nn&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,s=r):l=l.next=d,he.lanes|=c,Rn|=c}u=u.next}while(u!==null&&u!==i);l===null?s=r:l.next=a,Tt(r,t.memoizedState)||(Ze=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do i=o.lane,he.lanes|=i,Rn|=i,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function bs(e){var t=xt(),n=t.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(o!==null){n.pending=null;var s=o=o.next;do i=e(i,s.action),s=s.next;while(s!==o);Tt(i,t.memoizedState)||(Ze=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function If(){}function Cf(e,t){var n=he,r=xt(),o=t(),i=!Tt(r.memoizedState,o);if(i&&(r.memoizedState=o,Ze=!0),r=r.queue,Kl(_f.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Ae!==null&&Ae.memoizedState.tag&1){if(n.flags|=2048,vo(9,Af.bind(null,n,r,o,t),void 0,null),_e===null)throw Error($(349));Nn&30||Ef(n,t,o)}return o}function Ef(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=he.updateQueue,t===null?(t={lastEffect:null,stores:null},he.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Af(e,t,n,r){t.value=n,t.getSnapshot=r,Mf(t)&&zf(e)}function _f(e,t,n){return n(function(){Mf(t)&&zf(e)})}function Mf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Tt(e,n)}catch{return!0}}function zf(e){var t=Qt(e,1);t!==null&&jt(t,e,1,-1)}function uc(e){var t=Dt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:go,lastRenderedState:e},t.queue=e,e=e.dispatch=hy.bind(null,he,e),[t.memoizedState,e]}function vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=he.updateQueue,t===null?(t={lastEffect:null,stores:null},he.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function jf(){return xt().memoizedState}function li(e,t,n,r){var o=Dt();he.flags|=e,o.memoizedState=vo(1|t,n,void 0,r===void 0?null:r)}function qi(e,t,n,r){var o=xt();r=r===void 0?null:r;var i=void 0;if(Ce!==null){var s=Ce.memoizedState;if(i=s.destroy,r!==null&&Hl(r,s.deps)){o.memoizedState=vo(t,n,i,r);return}}he.flags|=e,o.memoizedState=vo(1|t,n,i,r)}function cc(e,t){return li(8390656,8,e,t)}function Kl(e,t){return qi(2048,8,e,t)}function Tf(e,t){return qi(4,2,e,t)}function Pf(e,t){return qi(4,4,e,t)}function Nf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Rf(e,t,n){return n=n!=null?n.concat([e]):null,qi(4,4,Nf.bind(null,t,e),n)}function Ql(){}function Df(e,t){var n=xt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Hl(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Lf(e,t){var n=xt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Hl(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Of(e,t,n){return Nn&21?(Tt(n,t)||(n=Ud(),he.lanes|=n,Rn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ze=!0),e.memoizedState=n)}function fy(e,t){var n=te;te=n!==0&&4>n?n:4,e(!0);var r=$s.transition;$s.transition={};try{e(!1),t()}finally{te=n,$s.transition=r}}function $f(){return xt().memoizedState}function py(e,t,n){var r=cn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ff(e))bf(t,n);else if(n=wf(e,t,n,r),n!==null){var o=He();jt(n,e,r,o),Uf(n,t,r)}}function hy(e,t,n){var r=cn(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ff(e))bf(t,o);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var s=t.lastRenderedState,a=i(s,n);if(o.hasEagerState=!0,o.eagerState=a,Tt(a,s)){var l=t.interleaved;l===null?(o.next=o,$l(t)):(o.next=l.next,l.next=o),t.interleaved=o;return}}catch{}finally{}n=wf(e,t,o,r),n!==null&&(o=He(),jt(n,e,r,o),Uf(n,t,r))}}function Ff(e){var t=e.alternate;return e===he||t!==null&&t===he}function bf(e,t){Zr=Pi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Uf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Cl(e,n)}}var Ni={readContext:wt,useCallback:Le,useContext:Le,useEffect:Le,useImperativeHandle:Le,useInsertionEffect:Le,useLayoutEffect:Le,useMemo:Le,useReducer:Le,useRef:Le,useState:Le,useDebugValue:Le,useDeferredValue:Le,useTransition:Le,useMutableSource:Le,useSyncExternalStore:Le,useId:Le,unstable_isNewReconciler:!1},my={readContext:wt,useCallback:function(e,t){return Dt().memoizedState=[e,t===void 0?null:t],e},useContext:wt,useEffect:cc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,li(4194308,4,Nf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return li(4194308,4,e,t)},useInsertionEffect:function(e,t){return li(4,2,e,t)},useMemo:function(e,t){var n=Dt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Dt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=py.bind(null,he,e),[r.memoizedState,e]},useRef:function(e){var t=Dt();return e={current:e},t.memoizedState=e},useState:uc,useDebugValue:Ql,useDeferredValue:function(e){return Dt().memoizedState=e},useTransition:function(){var e=uc(!1),t=e[0];return e=fy.bind(null,e[1]),Dt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=he,o=Dt();if(de){if(n===void 0)throw Error($(407));n=n()}else{if(n=t(),_e===null)throw Error($(349));Nn&30||Ef(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,cc(_f.bind(null,r,i,e),[e]),r.flags|=2048,vo(9,Af.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Dt(),t=_e.identifierPrefix;if(de){var n=Ht,r=Vt;n=(r&~(1<<32-zt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=yo++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=dy++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},yy={readContext:wt,useCallback:Df,useContext:wt,useEffect:Kl,useImperativeHandle:Rf,useInsertionEffect:Tf,useLayoutEffect:Pf,useMemo:Lf,useReducer:Fs,useRef:jf,useState:function(){return Fs(go)},useDebugValue:Ql,useDeferredValue:function(e){var t=xt();return Of(t,Ce.memoizedState,e)},useTransition:function(){var e=Fs(go)[0],t=xt().memoizedState;return[e,t]},useMutableSource:If,useSyncExternalStore:Cf,useId:$f,unstable_isNewReconciler:!1},gy={readContext:wt,useCallback:Df,useContext:wt,useEffect:Kl,useImperativeHandle:Rf,useInsertionEffect:Tf,useLayoutEffect:Pf,useMemo:Lf,useReducer:bs,useRef:jf,useState:function(){return bs(go)},useDebugValue:Ql,useDeferredValue:function(e){var t=xt();return Ce===null?t.memoizedState=e:Of(t,Ce.memoizedState,e)},useTransition:function(){var e=bs(go)[0],t=xt().memoizedState;return[e,t]},useMutableSource:If,useSyncExternalStore:Cf,useId:$f,unstable_isNewReconciler:!1};function Et(e,t){if(e&&e.defaultProps){t=me({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ta(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:me({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var es={isMounted:function(e){return(e=e._reactInternals)?Fn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=He(),o=cn(e),i=Bt(r,o);i.payload=t,n!=null&&(i.callback=n),t=ln(e,i,o),t!==null&&(jt(t,e,o,r),si(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=He(),o=cn(e),i=Bt(r,o);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=ln(e,i,o),t!==null&&(jt(t,e,o,r),si(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=He(),r=cn(e),o=Bt(n,r);o.tag=2,t!=null&&(o.callback=t),t=ln(e,o,r),t!==null&&(jt(t,e,r,n),si(t,e,r))}};function dc(e,t,n,r,o,i,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,s):t.prototype&&t.prototype.isPureReactComponent?!uo(n,r)||!uo(o,i):!0}function Vf(e,t,n){var r=!1,o=pn,i=t.contextType;return typeof i=="object"&&i!==null?i=wt(i):(o=tt(t)?Tn:be.current,r=t.contextTypes,i=(r=r!=null)?pr(e,o):pn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=es,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function fc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&es.enqueueReplaceState(t,t.state,null)}function Pa(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Fl(e);var i=t.contextType;typeof i=="object"&&i!==null?o.context=wt(i):(i=tt(t)?Tn:be.current,o.context=pr(e,i)),o.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Ta(e,t,i,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&es.enqueueReplaceState(o,o.state,null),ji(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function gr(e,t){try{var n="",r=t;do n+=Wh(r),r=r.return;while(r);var o=n}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:o,digest:null}}function Us(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Na(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var vy=typeof WeakMap=="function"?WeakMap:Map;function Hf(e,t,n){n=Bt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Di||(Di=!0,Ha=r),Na(e,t)},n}function Bf(e,t,n){n=Bt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){Na(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Na(e,t),typeof r!="function"&&(un===null?un=new Set([this]):un.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function pc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new vy;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Py.bind(null,e,t,n),t.then(e,e))}function hc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function mc(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Bt(-1,1),t.tag=2,ln(n,t,1))),n.lanes|=1),e)}var Sy=Gt.ReactCurrentOwner,Ze=!1;function Ue(e,t,n,r){t.child=e===null?Sf(t,null,n,r):mr(t,e.child,n,r)}function yc(e,t,n,r,o){n=n.render;var i=t.ref;return ur(t,o),r=Bl(e,t,n,r,i,o),n=Wl(),e!==null&&!Ze?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Yt(e,t,o)):(de&&n&&Pl(t),t.flags|=1,Ue(e,t,r,o),t.child)}function gc(e,t,n,r,o){if(e===null){var i=n.type;return typeof i=="function"&&!tu(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Wf(e,t,i,r,o)):(e=fi(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&o)){var s=i.memoizedProps;if(n=n.compare,n=n!==null?n:uo,n(s,r)&&e.ref===t.ref)return Yt(e,t,o)}return t.flags|=1,e=dn(i,r),e.ref=t.ref,e.return=t,t.child=e}function Wf(e,t,n,r,o){if(e!==null){var i=e.memoizedProps;if(uo(i,r)&&e.ref===t.ref)if(Ze=!1,t.pendingProps=r=i,(e.lanes&o)!==0)e.flags&131072&&(Ze=!0);else return t.lanes=e.lanes,Yt(e,t,o)}return Ra(e,t,n,r,o)}function Kf(e,t,n){var r=t.pendingProps,o=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},se(tr,it),it|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,se(tr,it),it|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,se(tr,it),it|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,se(tr,it),it|=r;return Ue(e,t,o,n),t.child}function Qf(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ra(e,t,n,r,o){var i=tt(n)?Tn:be.current;return i=pr(t,i),ur(t,o),n=Bl(e,t,n,r,i,o),r=Wl(),e!==null&&!Ze?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Yt(e,t,o)):(de&&r&&Pl(t),t.flags|=1,Ue(e,t,n,o),t.child)}function vc(e,t,n,r,o){if(tt(n)){var i=!0;Ei(t)}else i=!1;if(ur(t,o),t.stateNode===null)ui(e,t),Vf(t,n,r),Pa(t,n,r,o),r=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=wt(u):(u=tt(n)?Tn:be.current,u=pr(t,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==u)&&fc(t,s,r,u),Zt=!1;var m=t.memoizedState;s.state=m,ji(t,r,s,o),l=t.memoizedState,a!==r||m!==l||et.current||Zt?(typeof c=="function"&&(Ta(t,n,c,r),l=t.memoizedState),(a=Zt||dc(t,n,a,r,m,l,u))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,xf(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:Et(t.type,a),s.props=u,d=t.pendingProps,m=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=wt(l):(l=tt(n)?Tn:be.current,l=pr(t,l));var v=n.getDerivedStateFromProps;(c=typeof v=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||m!==l)&&fc(t,s,r,l),Zt=!1,m=t.memoizedState,s.state=m,ji(t,r,s,o);var S=t.memoizedState;a!==d||m!==S||et.current||Zt?(typeof v=="function"&&(Ta(t,n,v,r),S=t.memoizedState),(u=Zt||dc(t,n,u,r,m,S,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,S,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,S,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=S),s.props=r,s.state=S,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return Da(e,t,n,r,i,o)}function Da(e,t,n,r,o,i){Qf(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return o&&rc(t,n,!1),Yt(e,t,i);r=t.stateNode,Sy.current=t;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=mr(t,e.child,null,i),t.child=mr(t,null,a,i)):Ue(e,t,a,i),t.memoizedState=r.state,o&&rc(t,n,!0),t.child}function Yf(e){var t=e.stateNode;t.pendingContext?nc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&nc(e,t.context,!1),bl(e,t.containerInfo)}function Sc(e,t,n,r,o){return hr(),Rl(o),t.flags|=256,Ue(e,t,n,r),t.child}var La={dehydrated:null,treeContext:null,retryLane:0};function Oa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Gf(e,t,n){var r=t.pendingProps,o=pe.current,i=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(o&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),se(pe,o&1),e===null)return za(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,i?(r=t.mode,i=t.child,s={mode:"hidden",children:s},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=rs(s,r,0,null),e=jn(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Oa(n),t.memoizedState=La,e):Yl(t,s));if(o=e.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return wy(e,t,s,r,a,o,n);if(i){i=r.fallback,s=t.mode,o=e.child,a=o.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=dn(o,l),r.subtreeFlags=o.subtreeFlags&14680064),a!==null?i=dn(a,i):(i=jn(i,s,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,s=e.child.memoizedState,s=s===null?Oa(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=e.childLanes&~n,t.memoizedState=La,r}return i=e.child,e=i.sibling,r=dn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Yl(e,t){return t=rs({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Go(e,t,n,r){return r!==null&&Rl(r),mr(t,e.child,null,n),e=Yl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function wy(e,t,n,r,o,i,s){if(n)return t.flags&256?(t.flags&=-257,r=Us(Error($(422))),Go(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,o=t.mode,r=rs({mode:"visible",children:r.children},o,0,null),i=jn(i,o,s,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&mr(t,e.child,null,s),t.child.memoizedState=Oa(s),t.memoizedState=La,i);if(!(t.mode&1))return Go(e,t,s,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error($(419)),r=Us(i,r,void 0),Go(e,t,s,r)}if(a=(s&e.childLanes)!==0,Ze||a){if(r=_e,r!==null){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|s)?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,Qt(e,o),jt(r,e,o,-1))}return eu(),r=Us(Error($(421))),Go(e,t,s,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=Ny.bind(null,e),o._reactRetry=t,null):(e=i.treeContext,st=an(o.nextSibling),at=t,de=!0,_t=null,e!==null&&(ht[mt++]=Vt,ht[mt++]=Ht,ht[mt++]=Pn,Vt=e.id,Ht=e.overflow,Pn=t),t=Yl(t,r.children),t.flags|=4096,t)}function wc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ja(e.return,t,n)}function Vs(e,t,n,r,o){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function Xf(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(Ue(e,t,r.children,n),r=pe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wc(e,n,t);else if(e.tag===19)wc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(se(pe,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Ti(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Vs(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Ti(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Vs(t,!0,n,null,i);break;case"together":Vs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ui(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Yt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Rn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error($(153));if(t.child!==null){for(e=t.child,n=dn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=dn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function xy(e,t,n){switch(t.tag){case 3:Yf(t),hr();break;case 5:kf(t);break;case 1:tt(t.type)&&Ei(t);break;case 4:bl(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;se(Mi,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(se(pe,pe.current&1),t.flags|=128,null):n&t.child.childLanes?Gf(e,t,n):(se(pe,pe.current&1),e=Yt(e,t,n),e!==null?e.sibling:null);se(pe,pe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Xf(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),se(pe,pe.current),r)break;return null;case 22:case 23:return t.lanes=0,Kf(e,t,n)}return Yt(e,t,n)}var Jf,$a,Zf,qf;Jf=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$a=function(){};Zf=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Mn($t.current);var i=null;switch(n){case"input":o=sa(e,o),r=sa(e,r),i=[];break;case"select":o=me({},o,{value:void 0}),r=me({},r,{value:void 0}),i=[];break;case"textarea":o=ua(e,o),r=ua(e,r),i=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ii)}da(n,r);var s;n=null;for(u in o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&o[u]!=null)if(u==="style"){var a=o[u];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(no.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=o!=null?o[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(no.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ae("scroll",e),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};qf=function(e,t,n,r){n!==r&&(t.flags|=4)};function Lr(e,t){if(!de)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Oe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ky(e,t,n){var r=t.pendingProps;switch(Nl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oe(t),null;case 1:return tt(t.type)&&Ci(),Oe(t),null;case 3:return r=t.stateNode,yr(),le(et),le(be),Vl(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Qo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,_t!==null&&(Ka(_t),_t=null))),$a(e,t),Oe(t),null;case 5:Ul(t);var o=Mn(mo.current);if(n=t.type,e!==null&&t.stateNode!=null)Zf(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error($(166));return Oe(t),null}if(e=Mn($t.current),Qo(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Lt]=t,r[po]=i,e=(t.mode&1)!==0,n){case"dialog":ae("cancel",r),ae("close",r);break;case"iframe":case"object":case"embed":ae("load",r);break;case"video":case"audio":for(o=0;o<Hr.length;o++)ae(Hr[o],r);break;case"source":ae("error",r);break;case"img":case"image":case"link":ae("error",r),ae("load",r);break;case"details":ae("toggle",r);break;case"input":zu(r,i),ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ae("invalid",r);break;case"textarea":Tu(r,i),ae("invalid",r)}da(n,i),o=null;for(var s in i)if(i.hasOwnProperty(s)){var a=i[s];s==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Ko(r.textContent,a,e),o=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Ko(r.textContent,a,e),o=["children",""+a]):no.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&ae("scroll",r)}switch(n){case"input":$o(r),ju(r,i,!0);break;case"textarea":$o(r),Pu(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ii)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ad(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[Lt]=t,e[po]=r,Jf(e,t,!1,!1),t.stateNode=e;e:{switch(s=fa(n,r),n){case"dialog":ae("cancel",e),ae("close",e),o=r;break;case"iframe":case"object":case"embed":ae("load",e),o=r;break;case"video":case"audio":for(o=0;o<Hr.length;o++)ae(Hr[o],e);o=r;break;case"source":ae("error",e),o=r;break;case"img":case"image":case"link":ae("error",e),ae("load",e),o=r;break;case"details":ae("toggle",e),o=r;break;case"input":zu(e,r),o=sa(e,r),ae("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=me({},r,{value:void 0}),ae("invalid",e);break;case"textarea":Tu(e,r),o=ua(e,r),ae("invalid",e);break;default:o=r}da(n,o),a=o;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?zd(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&_d(e,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ro(e,l):typeof l=="number"&&ro(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(no.hasOwnProperty(i)?l!=null&&i==="onScroll"&&ae("scroll",e):l!=null&&vl(e,i,l,s))}switch(n){case"input":$o(e),ju(e,r,!1);break;case"textarea":$o(e),Pu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+fn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?ir(e,!!r.multiple,i,!1):r.defaultValue!=null&&ir(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Ii)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Oe(t),null;case 6:if(e&&t.stateNode!=null)qf(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error($(166));if(n=Mn(mo.current),Mn($t.current),Qo(t)){if(r=t.stateNode,n=t.memoizedProps,r[Lt]=t,(i=r.nodeValue!==n)&&(e=at,e!==null))switch(e.tag){case 3:Ko(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ko(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Lt]=t,t.stateNode=r}return Oe(t),null;case 13:if(le(pe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(de&&st!==null&&t.mode&1&&!(t.flags&128))gf(),hr(),t.flags|=98560,i=!1;else if(i=Qo(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error($(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[Lt]=t}else hr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Oe(t),i=!1}else _t!==null&&(Ka(_t),_t=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||pe.current&1?Ee===0&&(Ee=3):eu())),t.updateQueue!==null&&(t.flags|=4),Oe(t),null);case 4:return yr(),$a(e,t),e===null&&co(t.stateNode.containerInfo),Oe(t),null;case 10:return Ol(t.type._context),Oe(t),null;case 17:return tt(t.type)&&Ci(),Oe(t),null;case 19:if(le(pe),i=t.memoizedState,i===null)return Oe(t),null;if(r=(t.flags&128)!==0,s=i.rendering,s===null)if(r)Lr(i,!1);else{if(Ee!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Ti(e),s!==null){for(t.flags|=128,Lr(i,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return se(pe,pe.current&1|2),t.child}e=e.sibling}i.tail!==null&&we()>vr&&(t.flags|=128,r=!0,Lr(i,!1),t.lanes=4194304)}else{if(!r)if(e=Ti(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Lr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!de)return Oe(t),null}else 2*we()-i.renderingStartTime>vr&&n!==1073741824&&(t.flags|=128,r=!0,Lr(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(n=i.last,n!==null?n.sibling=s:t.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=we(),t.sibling=null,n=pe.current,se(pe,r?n&1|2:n&1),t):(Oe(t),null);case 22:case 23:return ql(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?it&1073741824&&(Oe(t),t.subtreeFlags&6&&(t.flags|=8192)):Oe(t),null;case 24:return null;case 25:return null}throw Error($(156,t.tag))}function Iy(e,t){switch(Nl(t),t.tag){case 1:return tt(t.type)&&Ci(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return yr(),le(et),le(be),Vl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ul(t),null;case 13:if(le(pe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error($(340));hr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return le(pe),null;case 4:return yr(),null;case 10:return Ol(t.type._context),null;case 22:case 23:return ql(),null;case 24:return null;default:return null}}var Xo=!1,$e=!1,Cy=typeof WeakSet=="function"?WeakSet:Set,V=null;function er(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ge(e,t,r)}else n.current=null}function Fa(e,t,n){try{n()}catch(r){ge(e,t,r)}}var xc=!1;function Ey(e,t){if(ka=wi,e=rf(),Tl(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,u=0,c=0,d=e,m=null;t:for(;;){for(var v;d!==n||o!==0&&d.nodeType!==3||(a=s+o),d!==i||r!==0&&d.nodeType!==3||(l=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(v=d.firstChild)!==null;)m=d,d=v;for(;;){if(d===e)break t;if(m===n&&++u===o&&(a=s),m===i&&++c===r&&(l=s),(v=d.nextSibling)!==null)break;d=m,m=d.parentNode}d=v}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ia={focusedElem:e,selectionRange:n},wi=!1,V=t;V!==null;)if(t=V,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,V=e;else for(;V!==null;){t=V;try{var S=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var p=S.memoizedProps,k=S.memoizedState,h=t.stateNode,f=h.getSnapshotBeforeUpdate(t.elementType===t.type?p:Et(t.type,p),k);h.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(C){ge(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,V=e;break}V=t.return}return S=xc,xc=!1,S}function qr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,i!==void 0&&Fa(t,n,i)}o=o.next}while(o!==r)}}function ts(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ba(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function ep(e){var t=e.alternate;t!==null&&(e.alternate=null,ep(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Lt],delete t[po],delete t[Aa],delete t[ay],delete t[ly])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function tp(e){return e.tag===5||e.tag===3||e.tag===4}function kc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||tp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ua(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ii));else if(r!==4&&(e=e.child,e!==null))for(Ua(e,t,n),e=e.sibling;e!==null;)Ua(e,t,n),e=e.sibling}function Va(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Va(e,t,n),e=e.sibling;e!==null;)Va(e,t,n),e=e.sibling}var je=null,At=!1;function Xt(e,t,n){for(n=n.child;n!==null;)np(e,t,n),n=n.sibling}function np(e,t,n){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(Qi,n)}catch{}switch(n.tag){case 5:$e||er(n,t);case 6:var r=je,o=At;je=null,Xt(e,t,n),je=r,At=o,je!==null&&(At?(e=je,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):je.removeChild(n.stateNode));break;case 18:je!==null&&(At?(e=je,n=n.stateNode,e.nodeType===8?Ds(e.parentNode,n):e.nodeType===1&&Ds(e,n),ao(e)):Ds(je,n.stateNode));break;case 4:r=je,o=At,je=n.stateNode.containerInfo,At=!0,Xt(e,t,n),je=r,At=o;break;case 0:case 11:case 14:case 15:if(!$e&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var i=o,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&Fa(n,t,s),o=o.next}while(o!==r)}Xt(e,t,n);break;case 1:if(!$e&&(er(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ge(n,t,a)}Xt(e,t,n);break;case 21:Xt(e,t,n);break;case 22:n.mode&1?($e=(r=$e)||n.memoizedState!==null,Xt(e,t,n),$e=r):Xt(e,t,n);break;default:Xt(e,t,n)}}function Ic(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Cy),t.forEach(function(r){var o=Ry.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Ct(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var i=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 5:je=a.stateNode,At=!1;break e;case 3:je=a.stateNode.containerInfo,At=!0;break e;case 4:je=a.stateNode.containerInfo,At=!0;break e}a=a.return}if(je===null)throw Error($(160));np(i,s,o),je=null,At=!1;var l=o.alternate;l!==null&&(l.return=null),o.return=null}catch(u){ge(o,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)rp(t,e),t=t.sibling}function rp(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ct(t,e),Rt(e),r&4){try{qr(3,e,e.return),ts(3,e)}catch(p){ge(e,e.return,p)}try{qr(5,e,e.return)}catch(p){ge(e,e.return,p)}}break;case 1:Ct(t,e),Rt(e),r&512&&n!==null&&er(n,n.return);break;case 5:if(Ct(t,e),Rt(e),r&512&&n!==null&&er(n,n.return),e.flags&32){var o=e.stateNode;try{ro(o,"")}catch(p){ge(e,e.return,p)}}if(r&4&&(o=e.stateNode,o!=null)){var i=e.memoizedProps,s=n!==null?n.memoizedProps:i,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Cd(o,i),fa(a,s);var u=fa(a,i);for(s=0;s<l.length;s+=2){var c=l[s],d=l[s+1];c==="style"?zd(o,d):c==="dangerouslySetInnerHTML"?_d(o,d):c==="children"?ro(o,d):vl(o,c,d,u)}switch(a){case"input":aa(o,i);break;case"textarea":Ed(o,i);break;case"select":var m=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?ir(o,!!i.multiple,v,!1):m!==!!i.multiple&&(i.defaultValue!=null?ir(o,!!i.multiple,i.defaultValue,!0):ir(o,!!i.multiple,i.multiple?[]:"",!1))}o[po]=i}catch(p){ge(e,e.return,p)}}break;case 6:if(Ct(t,e),Rt(e),r&4){if(e.stateNode===null)throw Error($(162));o=e.stateNode,i=e.memoizedProps;try{o.nodeValue=i}catch(p){ge(e,e.return,p)}}break;case 3:if(Ct(t,e),Rt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ao(t.containerInfo)}catch(p){ge(e,e.return,p)}break;case 4:Ct(t,e),Rt(e);break;case 13:Ct(t,e),Rt(e),o=e.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(Jl=we())),r&4&&Ic(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?($e=(u=$e)||c,Ct(t,e),$e=u):Ct(t,e),Rt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(V=e,c=e.child;c!==null;){for(d=V=c;V!==null;){switch(m=V,v=m.child,m.tag){case 0:case 11:case 14:case 15:qr(4,m,m.return);break;case 1:er(m,m.return);var S=m.stateNode;if(typeof S.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,S.props=t.memoizedProps,S.state=t.memoizedState,S.componentWillUnmount()}catch(p){ge(r,n,p)}}break;case 5:er(m,m.return);break;case 22:if(m.memoizedState!==null){Ec(d);continue}}v!==null?(v.return=m,V=v):Ec(d)}c=c.sibling}e:for(c=null,d=e;;){if(d.tag===5){if(c===null){c=d;try{o=d.stateNode,u?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Md("display",s))}catch(p){ge(e,e.return,p)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(p){ge(e,e.return,p)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ct(t,e),Rt(e),r&4&&Ic(e);break;case 21:break;default:Ct(t,e),Rt(e)}}function Rt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(tp(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(ro(o,""),r.flags&=-33);var i=kc(e);Va(e,i,o);break;case 3:case 4:var s=r.stateNode.containerInfo,a=kc(e);Ua(e,a,s);break;default:throw Error($(161))}}catch(l){ge(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ay(e,t,n){V=e,op(e)}function op(e,t,n){for(var r=(e.mode&1)!==0;V!==null;){var o=V,i=o.child;if(o.tag===22&&r){var s=o.memoizedState!==null||Xo;if(!s){var a=o.alternate,l=a!==null&&a.memoizedState!==null||$e;a=Xo;var u=$e;if(Xo=s,($e=l)&&!u)for(V=o;V!==null;)s=V,l=s.child,s.tag===22&&s.memoizedState!==null?Ac(o):l!==null?(l.return=s,V=l):Ac(o);for(;i!==null;)V=i,op(i),i=i.sibling;V=o,Xo=a,$e=u}Cc(e)}else o.subtreeFlags&8772&&i!==null?(i.return=o,V=i):Cc(e)}}function Cc(e){for(;V!==null;){var t=V;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:$e||ts(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!$e)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:Et(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&lc(t,i,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}lc(t,s,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&ao(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}$e||t.flags&512&&ba(t)}catch(m){ge(t,t.return,m)}}if(t===e){V=null;break}if(n=t.sibling,n!==null){n.return=t.return,V=n;break}V=t.return}}function Ec(e){for(;V!==null;){var t=V;if(t===e){V=null;break}var n=t.sibling;if(n!==null){n.return=t.return,V=n;break}V=t.return}}function Ac(e){for(;V!==null;){var t=V;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ts(4,t)}catch(l){ge(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(l){ge(t,o,l)}}var i=t.return;try{ba(t)}catch(l){ge(t,i,l)}break;case 5:var s=t.return;try{ba(t)}catch(l){ge(t,s,l)}}}catch(l){ge(t,t.return,l)}if(t===e){V=null;break}var a=t.sibling;if(a!==null){a.return=t.return,V=a;break}V=t.return}}var _y=Math.ceil,Ri=Gt.ReactCurrentDispatcher,Gl=Gt.ReactCurrentOwner,vt=Gt.ReactCurrentBatchConfig,G=0,_e=null,ke=null,Te=0,it=0,tr=mn(0),Ee=0,So=null,Rn=0,ns=0,Xl=0,eo=null,Xe=null,Jl=0,vr=1/0,bt=null,Di=!1,Ha=null,un=null,Jo=!1,nn=null,Li=0,to=0,Ba=null,ci=-1,di=0;function He(){return G&6?we():ci!==-1?ci:ci=we()}function cn(e){return e.mode&1?G&2&&Te!==0?Te&-Te:cy.transition!==null?(di===0&&(di=Ud()),di):(e=te,e!==0||(e=window.event,e=e===void 0?16:Yd(e.type)),e):1}function jt(e,t,n,r){if(50<to)throw to=0,Ba=null,Error($(185));_o(e,n,r),(!(G&2)||e!==_e)&&(e===_e&&(!(G&2)&&(ns|=n),Ee===4&&en(e,Te)),nt(e,r),n===1&&G===0&&!(t.mode&1)&&(vr=we()+500,Zi&&yn()))}function nt(e,t){var n=e.callbackNode;cm(e,t);var r=Si(e,e===_e?Te:0);if(r===0)n!==null&&Du(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Du(n),t===1)e.tag===0?uy(_c.bind(null,e)):hf(_c.bind(null,e)),iy(function(){!(G&6)&&yn()}),n=null;else{switch(Vd(r)){case 1:n=Il;break;case 4:n=Fd;break;case 16:n=vi;break;case 536870912:n=bd;break;default:n=vi}n=fp(n,ip.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ip(e,t){if(ci=-1,di=0,G&6)throw Error($(327));var n=e.callbackNode;if(cr()&&e.callbackNode!==n)return null;var r=Si(e,e===_e?Te:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Oi(e,r);else{t=r;var o=G;G|=2;var i=ap();(_e!==e||Te!==t)&&(bt=null,vr=we()+500,zn(e,t));do try{jy();break}catch(a){sp(e,a)}while(!0);Ll(),Ri.current=i,G=o,ke!==null?t=0:(_e=null,Te=0,t=Ee)}if(t!==0){if(t===2&&(o=ga(e),o!==0&&(r=o,t=Wa(e,o))),t===1)throw n=So,zn(e,0),en(e,r),nt(e,we()),n;if(t===6)en(e,r);else{if(o=e.current.alternate,!(r&30)&&!My(o)&&(t=Oi(e,r),t===2&&(i=ga(e),i!==0&&(r=i,t=Wa(e,i))),t===1))throw n=So,zn(e,0),en(e,r),nt(e,we()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error($(345));case 2:In(e,Xe,bt);break;case 3:if(en(e,r),(r&130023424)===r&&(t=Jl+500-we(),10<t)){if(Si(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){He(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Ea(In.bind(null,e,Xe,bt),t);break}In(e,Xe,bt);break;case 4:if(en(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var s=31-zt(r);i=1<<s,s=t[s],s>o&&(o=s),r&=~i}if(r=o,r=we()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_y(r/1960))-r,10<r){e.timeoutHandle=Ea(In.bind(null,e,Xe,bt),r);break}In(e,Xe,bt);break;case 5:In(e,Xe,bt);break;default:throw Error($(329))}}}return nt(e,we()),e.callbackNode===n?ip.bind(null,e):null}function Wa(e,t){var n=eo;return e.current.memoizedState.isDehydrated&&(zn(e,t).flags|=256),e=Oi(e,t),e!==2&&(t=Xe,Xe=n,t!==null&&Ka(t)),e}function Ka(e){Xe===null?Xe=e:Xe.push.apply(Xe,e)}function My(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!Tt(i(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function en(e,t){for(t&=~Xl,t&=~ns,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-zt(t),r=1<<n;e[n]=-1,t&=~r}}function _c(e){if(G&6)throw Error($(327));cr();var t=Si(e,0);if(!(t&1))return nt(e,we()),null;var n=Oi(e,t);if(e.tag!==0&&n===2){var r=ga(e);r!==0&&(t=r,n=Wa(e,r))}if(n===1)throw n=So,zn(e,0),en(e,t),nt(e,we()),n;if(n===6)throw Error($(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,In(e,Xe,bt),nt(e,we()),null}function Zl(e,t){var n=G;G|=1;try{return e(t)}finally{G=n,G===0&&(vr=we()+500,Zi&&yn())}}function Dn(e){nn!==null&&nn.tag===0&&!(G&6)&&cr();var t=G;G|=1;var n=vt.transition,r=te;try{if(vt.transition=null,te=1,e)return e()}finally{te=r,vt.transition=n,G=t,!(G&6)&&yn()}}function ql(){it=tr.current,le(tr)}function zn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,oy(n)),ke!==null)for(n=ke.return;n!==null;){var r=n;switch(Nl(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ci();break;case 3:yr(),le(et),le(be),Vl();break;case 5:Ul(r);break;case 4:yr();break;case 13:le(pe);break;case 19:le(pe);break;case 10:Ol(r.type._context);break;case 22:case 23:ql()}n=n.return}if(_e=e,ke=e=dn(e.current,null),Te=it=t,Ee=0,So=null,Xl=ns=Rn=0,Xe=eo=null,_n!==null){for(t=0;t<_n.length;t++)if(n=_n[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,i=n.pending;if(i!==null){var s=i.next;i.next=o,r.next=s}n.pending=r}_n=null}return e}function sp(e,t){do{var n=ke;try{if(Ll(),ai.current=Ni,Pi){for(var r=he.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Pi=!1}if(Nn=0,Ae=Ce=he=null,Zr=!1,yo=0,Gl.current=null,n===null||n.return===null){Ee=1,So=t,ke=null;break}e:{var i=e,s=n.return,a=n,l=t;if(t=Te,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var m=c.alternate;m?(c.updateQueue=m.updateQueue,c.memoizedState=m.memoizedState,c.lanes=m.lanes):(c.updateQueue=null,c.memoizedState=null)}var v=hc(s);if(v!==null){v.flags&=-257,mc(v,s,a,i,t),v.mode&1&&pc(i,u,t),t=v,l=u;var S=t.updateQueue;if(S===null){var p=new Set;p.add(l),t.updateQueue=p}else S.add(l);break e}else{if(!(t&1)){pc(i,u,t),eu();break e}l=Error($(426))}}else if(de&&a.mode&1){var k=hc(s);if(k!==null){!(k.flags&65536)&&(k.flags|=256),mc(k,s,a,i,t),Rl(gr(l,a));break e}}i=l=gr(l,a),Ee!==4&&(Ee=2),eo===null?eo=[i]:eo.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var h=Hf(i,l,t);ac(i,h);break e;case 1:a=l;var f=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof f.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(un===null||!un.has(g)))){i.flags|=65536,t&=-t,i.lanes|=t;var C=Bf(i,a,t);ac(i,C);break e}}i=i.return}while(i!==null)}up(n)}catch(w){t=w,ke===n&&n!==null&&(ke=n=n.return);continue}break}while(!0)}function ap(){var e=Ri.current;return Ri.current=Ni,e===null?Ni:e}function eu(){(Ee===0||Ee===3||Ee===2)&&(Ee=4),_e===null||!(Rn&268435455)&&!(ns&268435455)||en(_e,Te)}function Oi(e,t){var n=G;G|=2;var r=ap();(_e!==e||Te!==t)&&(bt=null,zn(e,t));do try{zy();break}catch(o){sp(e,o)}while(!0);if(Ll(),G=n,Ri.current=r,ke!==null)throw Error($(261));return _e=null,Te=0,Ee}function zy(){for(;ke!==null;)lp(ke)}function jy(){for(;ke!==null&&!tm();)lp(ke)}function lp(e){var t=dp(e.alternate,e,it);e.memoizedProps=e.pendingProps,t===null?up(e):ke=t,Gl.current=null}function up(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Iy(n,t),n!==null){n.flags&=32767,ke=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ee=6,ke=null;return}}else if(n=ky(n,t,it),n!==null){ke=n;return}if(t=t.sibling,t!==null){ke=t;return}ke=t=e}while(t!==null);Ee===0&&(Ee=5)}function In(e,t,n){var r=te,o=vt.transition;try{vt.transition=null,te=1,Ty(e,t,n,r)}finally{vt.transition=o,te=r}return null}function Ty(e,t,n,r){do cr();while(nn!==null);if(G&6)throw Error($(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error($(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(dm(e,i),e===_e&&(ke=_e=null,Te=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Jo||(Jo=!0,fp(vi,function(){return cr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=vt.transition,vt.transition=null;var s=te;te=1;var a=G;G|=4,Gl.current=null,Ey(e,n),rp(n,e),Jm(Ia),wi=!!ka,Ia=ka=null,e.current=n,Ay(n),nm(),G=a,te=s,vt.transition=i}else e.current=n;if(Jo&&(Jo=!1,nn=e,Li=o),i=e.pendingLanes,i===0&&(un=null),im(n.stateNode),nt(e,we()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Di)throw Di=!1,e=Ha,Ha=null,e;return Li&1&&e.tag!==0&&cr(),i=e.pendingLanes,i&1?e===Ba?to++:(to=0,Ba=e):to=0,yn(),null}function cr(){if(nn!==null){var e=Vd(Li),t=vt.transition,n=te;try{if(vt.transition=null,te=16>e?16:e,nn===null)var r=!1;else{if(e=nn,nn=null,Li=0,G&6)throw Error($(331));var o=G;for(G|=4,V=e.current;V!==null;){var i=V,s=i.child;if(V.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(V=u;V!==null;){var c=V;switch(c.tag){case 0:case 11:case 15:qr(8,c,i)}var d=c.child;if(d!==null)d.return=c,V=d;else for(;V!==null;){c=V;var m=c.sibling,v=c.return;if(ep(c),c===u){V=null;break}if(m!==null){m.return=v,V=m;break}V=v}}}var S=i.alternate;if(S!==null){var p=S.child;if(p!==null){S.child=null;do{var k=p.sibling;p.sibling=null,p=k}while(p!==null)}}V=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,V=s;else e:for(;V!==null;){if(i=V,i.flags&2048)switch(i.tag){case 0:case 11:case 15:qr(9,i,i.return)}var h=i.sibling;if(h!==null){h.return=i.return,V=h;break e}V=i.return}}var f=e.current;for(V=f;V!==null;){s=V;var g=s.child;if(s.subtreeFlags&2064&&g!==null)g.return=s,V=g;else e:for(s=f;V!==null;){if(a=V,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ts(9,a)}}catch(w){ge(a,a.return,w)}if(a===s){V=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,V=C;break e}V=a.return}}if(G=o,yn(),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(Qi,e)}catch{}r=!0}return r}finally{te=n,vt.transition=t}}return!1}function Mc(e,t,n){t=gr(n,t),t=Hf(e,t,1),e=ln(e,t,1),t=He(),e!==null&&(_o(e,1,t),nt(e,t))}function ge(e,t,n){if(e.tag===3)Mc(e,e,n);else for(;t!==null;){if(t.tag===3){Mc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(un===null||!un.has(r))){e=gr(n,e),e=Bf(t,e,1),t=ln(t,e,1),e=He(),t!==null&&(_o(t,1,e),nt(t,e));break}}t=t.return}}function Py(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=He(),e.pingedLanes|=e.suspendedLanes&n,_e===e&&(Te&n)===n&&(Ee===4||Ee===3&&(Te&130023424)===Te&&500>we()-Jl?zn(e,0):Xl|=n),nt(e,t)}function cp(e,t){t===0&&(e.mode&1?(t=Uo,Uo<<=1,!(Uo&130023424)&&(Uo=4194304)):t=1);var n=He();e=Qt(e,t),e!==null&&(_o(e,t,n),nt(e,n))}function Ny(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),cp(e,n)}function Ry(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(t),cp(e,n)}var dp;dp=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||et.current)Ze=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ze=!1,xy(e,t,n);Ze=!!(e.flags&131072)}else Ze=!1,de&&t.flags&1048576&&mf(t,_i,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ui(e,t),e=t.pendingProps;var o=pr(t,be.current);ur(t,n),o=Bl(null,t,r,e,o,n);var i=Wl();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,tt(r)?(i=!0,Ei(t)):i=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Fl(t),o.updater=es,t.stateNode=o,o._reactInternals=t,Pa(t,r,e,n),t=Da(null,t,r,!0,i,n)):(t.tag=0,de&&i&&Pl(t),Ue(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ui(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=Ly(r),e=Et(r,e),o){case 0:t=Ra(null,t,r,e,n);break e;case 1:t=vc(null,t,r,e,n);break e;case 11:t=yc(null,t,r,e,n);break e;case 14:t=gc(null,t,r,Et(r.type,e),n);break e}throw Error($(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Et(r,o),Ra(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Et(r,o),vc(e,t,r,o,n);case 3:e:{if(Yf(t),e===null)throw Error($(387));r=t.pendingProps,i=t.memoizedState,o=i.element,xf(e,t),ji(t,r,null,n);var s=t.memoizedState;if(r=s.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){o=gr(Error($(423)),t),t=Sc(e,t,r,n,o);break e}else if(r!==o){o=gr(Error($(424)),t),t=Sc(e,t,r,n,o);break e}else for(st=an(t.stateNode.containerInfo.firstChild),at=t,de=!0,_t=null,n=Sf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(hr(),r===o){t=Yt(e,t,n);break e}Ue(e,t,r,n)}t=t.child}return t;case 5:return kf(t),e===null&&za(t),r=t.type,o=t.pendingProps,i=e!==null?e.memoizedProps:null,s=o.children,Ca(r,o)?s=null:i!==null&&Ca(r,i)&&(t.flags|=32),Qf(e,t),Ue(e,t,s,n),t.child;case 6:return e===null&&za(t),null;case 13:return Gf(e,t,n);case 4:return bl(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=mr(t,null,r,n):Ue(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Et(r,o),yc(e,t,r,o,n);case 7:return Ue(e,t,t.pendingProps,n),t.child;case 8:return Ue(e,t,t.pendingProps.children,n),t.child;case 12:return Ue(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,i=t.memoizedProps,s=o.value,se(Mi,r._currentValue),r._currentValue=s,i!==null)if(Tt(i.value,s)){if(i.children===o.children&&!et.current){t=Yt(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){s=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Bt(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),ja(i.return,n,t),a.lanes|=n;break}l=l.next}}else if(i.tag===10)s=i.type===t.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error($(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),ja(s,n,t),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===t){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}Ue(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,ur(t,n),o=wt(o),r=r(o),t.flags|=1,Ue(e,t,r,n),t.child;case 14:return r=t.type,o=Et(r,t.pendingProps),o=Et(r.type,o),gc(e,t,r,o,n);case 15:return Wf(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Et(r,o),ui(e,t),t.tag=1,tt(r)?(e=!0,Ei(t)):e=!1,ur(t,n),Vf(t,r,o),Pa(t,r,o,n),Da(null,t,r,!0,e,n);case 19:return Xf(e,t,n);case 22:return Kf(e,t,n)}throw Error($(156,t.tag))};function fp(e,t){return $d(e,t)}function Dy(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yt(e,t,n,r){return new Dy(e,t,n,r)}function tu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ly(e){if(typeof e=="function")return tu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===wl)return 11;if(e===xl)return 14}return 2}function dn(e,t){var n=e.alternate;return n===null?(n=yt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function fi(e,t,n,r,o,i){var s=2;if(r=e,typeof e=="function")tu(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Wn:return jn(n.children,o,i,t);case Sl:s=8,o|=8;break;case na:return e=yt(12,n,t,o|2),e.elementType=na,e.lanes=i,e;case ra:return e=yt(13,n,t,o),e.elementType=ra,e.lanes=i,e;case oa:return e=yt(19,n,t,o),e.elementType=oa,e.lanes=i,e;case xd:return rs(n,o,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Sd:s=10;break e;case wd:s=9;break e;case wl:s=11;break e;case xl:s=14;break e;case Jt:s=16,r=null;break e}throw Error($(130,e==null?e:typeof e,""))}return t=yt(s,n,t,o),t.elementType=e,t.type=r,t.lanes=i,t}function jn(e,t,n,r){return e=yt(7,e,r,t),e.lanes=n,e}function rs(e,t,n,r){return e=yt(22,e,r,t),e.elementType=xd,e.lanes=n,e.stateNode={isHidden:!1},e}function Hs(e,t,n){return e=yt(6,e,null,t),e.lanes=n,e}function Bs(e,t,n){return t=yt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Oy(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cs(0),this.expirationTimes=Cs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cs(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function nu(e,t,n,r,o,i,s,a,l){return e=new Oy(e,t,n,a,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=yt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fl(i),e}function $y(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function pp(e){if(!e)return pn;e=e._reactInternals;e:{if(Fn(e)!==e||e.tag!==1)throw Error($(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(tt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error($(171))}if(e.tag===1){var n=e.type;if(tt(n))return pf(e,n,t)}return t}function hp(e,t,n,r,o,i,s,a,l){return e=nu(n,r,!0,e,o,i,s,a,l),e.context=pp(null),n=e.current,r=He(),o=cn(n),i=Bt(r,o),i.callback=t??null,ln(n,i,o),e.current.lanes=o,_o(e,o,r),nt(e,r),e}function os(e,t,n,r){var o=t.current,i=He(),s=cn(o);return n=pp(n),t.context===null?t.context=n:t.pendingContext=n,t=Bt(i,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ln(o,t,s),e!==null&&(jt(e,o,s,i),si(e,o,s)),s}function $i(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function zc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ru(e,t){zc(e,t),(e=e.alternate)&&zc(e,t)}function Fy(){return null}var mp=typeof reportError=="function"?reportError:function(e){console.error(e)};function ou(e){this._internalRoot=e}is.prototype.render=ou.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error($(409));os(e,t,null,null)};is.prototype.unmount=ou.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Dn(function(){os(null,e,null,null)}),t[Kt]=null}};function is(e){this._internalRoot=e}is.prototype.unstable_scheduleHydration=function(e){if(e){var t=Wd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<qt.length&&t!==0&&t<qt[n].priority;n++);qt.splice(n,0,e),n===0&&Qd(e)}};function iu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ss(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function jc(){}function by(e,t,n,r,o){if(o){if(typeof r=="function"){var i=r;r=function(){var u=$i(s);i.call(u)}}var s=hp(t,r,e,0,null,!1,!1,"",jc);return e._reactRootContainer=s,e[Kt]=s.current,co(e.nodeType===8?e.parentNode:e),Dn(),s}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var a=r;r=function(){var u=$i(l);a.call(u)}}var l=nu(e,0,!1,null,null,!1,!1,"",jc);return e._reactRootContainer=l,e[Kt]=l.current,co(e.nodeType===8?e.parentNode:e),Dn(function(){os(t,l,n,r)}),l}function as(e,t,n,r,o){var i=n._reactRootContainer;if(i){var s=i;if(typeof o=="function"){var a=o;o=function(){var l=$i(s);a.call(l)}}os(t,s,e,o)}else s=by(n,t,e,o,r);return $i(s)}Hd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Vr(t.pendingLanes);n!==0&&(Cl(t,n|1),nt(t,we()),!(G&6)&&(vr=we()+500,yn()))}break;case 13:Dn(function(){var r=Qt(e,1);if(r!==null){var o=He();jt(r,e,1,o)}}),ru(e,1)}};El=function(e){if(e.tag===13){var t=Qt(e,134217728);if(t!==null){var n=He();jt(t,e,134217728,n)}ru(e,134217728)}};Bd=function(e){if(e.tag===13){var t=cn(e),n=Qt(e,t);if(n!==null){var r=He();jt(n,e,t,r)}ru(e,t)}};Wd=function(){return te};Kd=function(e,t){var n=te;try{return te=e,t()}finally{te=n}};ha=function(e,t,n){switch(t){case"input":if(aa(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=Ji(r);if(!o)throw Error($(90));Id(r),aa(r,o)}}}break;case"textarea":Ed(e,n);break;case"select":t=n.value,t!=null&&ir(e,!!n.multiple,t,!1)}};Pd=Zl;Nd=Dn;var Uy={usingClientEntryPoint:!1,Events:[zo,Gn,Ji,jd,Td,Zl]},Or={findFiberByHostInstance:An,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Vy={bundleType:Or.bundleType,version:Or.version,rendererPackageName:Or.rendererPackageName,rendererConfig:Or.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ld(e),e===null?null:e.stateNode},findFiberByHostInstance:Or.findFiberByHostInstance||Fy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zo.isDisabled&&Zo.supportsFiber)try{Qi=Zo.inject(Vy),Ot=Zo}catch{}}dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uy;dt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!iu(t))throw Error($(200));return $y(e,t,null,n)};dt.createRoot=function(e,t){if(!iu(e))throw Error($(299));var n=!1,r="",o=mp;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=nu(e,1,!1,null,null,n,!1,r,o),e[Kt]=t.current,co(e.nodeType===8?e.parentNode:e),new ou(t)};dt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error($(188)):(e=Object.keys(e).join(","),Error($(268,e)));return e=Ld(t),e=e===null?null:e.stateNode,e};dt.flushSync=function(e){return Dn(e)};dt.hydrate=function(e,t,n){if(!ss(t))throw Error($(200));return as(null,e,t,!0,n)};dt.hydrateRoot=function(e,t,n){if(!iu(e))throw Error($(405));var r=n!=null&&n.hydratedSources||null,o=!1,i="",s=mp;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=hp(t,null,e,1,n??null,o,!1,i,s),e[Kt]=t.current,co(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new is(t)};dt.render=function(e,t,n){if(!ss(t))throw Error($(200));return as(null,e,t,!1,n)};dt.unmountComponentAtNode=function(e){if(!ss(e))throw Error($(40));return e._reactRootContainer?(Dn(function(){as(null,null,e,!1,function(){e._reactRootContainer=null,e[Kt]=null})}),!0):!1};dt.unstable_batchedUpdates=Zl;dt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ss(n))throw Error($(200));if(e==null||e._reactInternals===void 0)throw Error($(38));return as(e,t,n,!1,r)};dt.version="18.3.1-next-f1338f8080-20240426";function yp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yp)}catch(e){console.error(e)}}yp(),md.exports=dt;var Sr=md.exports,gp,Tc=Sr;gp=Tc.createRoot,Tc.hydrateRoot;var vp=(e=>(e[e.CRITICAL=1e3]="CRITICAL",e[e.HIGH=800]="HIGH",e[e.NORMAL=500]="NORMAL",e[e.LOW=200]="LOW",e[e.BACKGROUND=100]="BACKGROUND",e))(vp||{});const oe={LEAD:"LEAD",FOLLOW:"FOLLOW",SELF:"SELF"};class Hy{constructor(t={}){this.plugins=new Map,this.validators=new Map,this.actionHandlers=new Map,this.menuActionsByType=new Map,this.options={...t},t.defaultValidators&&(this.validators=new Map(Object.entries(t.defaultValidators)))}registerPlugin(t){this.plugins.set(t.id,t),t.onRegister&&t.onRegister()}unregisterPlugin(t){const n=this.plugins.get(t);n!=null&&n.onUnregister&&n.onUnregister(),this.plugins.delete(t)}registerValidator(t,n){const r=this.validators.get(t)||[];this.validators.set(t,[...r,n])}unregisterValidators(t){this.validators.delete(t)}registerActionHandler(t,n,r){if(this.actionHandlers.set(t,{handler:n,metadata:r}),r!=null&&r.menuType){const o=this.menuActionsByType.get(r.menuType)||new Set;o.add(t),this.menuActionsByType.set(r.menuType,o)}}unregisterActionHandler(t){var r;const n=this.actionHandlers.get(t);if((r=n==null?void 0:n.metadata)!=null&&r.menuType){const o=this.menuActionsByType.get(n.metadata.menuType);o&&(o.delete(t),o.size===0&&this.menuActionsByType.delete(n.metadata.menuType))}this.actionHandlers.delete(t)}validateAction(t){const n=this.validators.get(t.type)||[];for(const r of n){const o=r(t);if(!o.valid)return o}return{valid:!0}}handleAction(t){const n=this.validateAction(t);if(!n.valid){console.warn(`Invalid action: ${n.message}`);return}const r=Array.from(this.plugins.values()).sort((o,i)=>i.priority-o.priority);for(const o of r)if(o.actionTypes===null||o.actionTypes.includes(t.type))try{o.handler(t)}catch(i){console.error(`Error in plugin ${o.id}:`,i)}}executeAction(t,n){const r=this.actionHandlers.get(t);return r!=null&&r.handler?(r.handler(n),!0):!1}getMenuActions(t){const n=this.menuActionsByType.get(t)||new Set;return Array.from(n).map(r=>{const o=this.actionHandlers.get(r);return o?{id:r,...o}:null}).filter(r=>r!==null&&r.metadata!==void 0).sort((r,o)=>(r.order||0)-(o.order||0))}}const Q=new Hy,By={initialize:e=>{e.areas.types.forEach(t=>{}),e.actions.plugins.forEach(t=>{Q.registerPlugin(t)}),e.actions.validators.forEach(({actionType:t,validator:n})=>{Q.registerValidator(t,n)}),e.contextMenu.actions.forEach(t=>{})},cleanup:()=>{}},Pc=e=>{let t;const n=new Set,r=(u,c)=>{const d=typeof u=="function"?u(t):u;if(!Object.is(d,t)){const m=t;t=c??(typeof d!="object"||d===null)?d:Object.assign({},t,d),n.forEach(v=>v(t,m))}},o=()=>t,a={setState:r,getState:o,getInitialState:()=>l,subscribe:u=>(n.add(u),()=>n.delete(u))},l=t=e(r,o,a);return a},Wy=e=>e?Pc(e):Pc,Ky=e=>e;function Qy(e,t=Ky){const n=rt.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return rt.useDebugValue(n),n}const Yy=e=>{const t=Wy(e),n=r=>Qy(t,r);return Object.assign(n,t),n},su=e=>Yy;var Sp=Symbol.for("immer-nothing"),Nc=Symbol.for("immer-draftable"),ut=Symbol.for("immer-state");function Mt(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var wr=Object.getPrototypeOf;function xr(e){return!!e&&!!e[ut]}function Ln(e){var t;return e?wp(e)||Array.isArray(e)||!!e[Nc]||!!((t=e.constructor)!=null&&t[Nc])||us(e)||cs(e):!1}var Gy=Object.prototype.constructor.toString();function wp(e){if(!e||typeof e!="object")return!1;const t=wr(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Gy}function Fi(e,t){ls(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function ls(e){const t=e[ut];return t?t.type_:Array.isArray(e)?1:us(e)?2:cs(e)?3:0}function Qa(e,t){return ls(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function xp(e,t,n){const r=ls(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Xy(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function us(e){return e instanceof Map}function cs(e){return e instanceof Set}function Cn(e){return e.copy_||e.base_}function Ya(e,t){if(us(e))return new Map(e);if(cs(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=wp(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[ut];let o=Reflect.ownKeys(r);for(let i=0;i<o.length;i++){const s=o[i],a=r[s];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[s]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[s]})}return Object.create(wr(e),r)}else{const r=wr(e);if(r!==null&&n)return{...e};const o=Object.create(r);return Object.assign(o,e)}}function au(e,t=!1){return ds(e)||xr(e)||!Ln(e)||(ls(e)>1&&(e.set=e.add=e.clear=e.delete=Jy),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>au(r,!0))),e}function Jy(){Mt(2)}function ds(e){return Object.isFrozen(e)}var Zy={};function On(e){const t=Zy[e];return t||Mt(0,e),t}var wo;function kp(){return wo}function qy(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Rc(e,t){t&&(On("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Ga(e){Xa(e),e.drafts_.forEach(eg),e.drafts_=null}function Xa(e){e===wo&&(wo=e.parent_)}function Dc(e){return wo=qy(wo,e)}function eg(e){const t=e[ut];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Lc(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[ut].modified_&&(Ga(t),Mt(4)),Ln(e)&&(e=bi(t,e),t.parent_||Ui(t,e)),t.patches_&&On("Patches").generateReplacementPatches_(n[ut].base_,e,t.patches_,t.inversePatches_)):e=bi(t,n,[]),Ga(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Sp?e:void 0}function bi(e,t,n){if(ds(t))return t;const r=t[ut];if(!r)return Fi(t,(o,i)=>Oc(e,r,t,o,i,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Ui(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const o=r.copy_;let i=o,s=!1;r.type_===3&&(i=new Set(o),o.clear(),s=!0),Fi(i,(a,l)=>Oc(e,r,o,a,l,n,s)),Ui(e,o,!1),n&&e.patches_&&On("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Oc(e,t,n,r,o,i,s){if(xr(o)){const a=i&&t&&t.type_!==3&&!Qa(t.assigned_,r)?i.concat(r):void 0,l=bi(e,o,a);if(xp(n,r,l),xr(l))e.canAutoFreeze_=!1;else return}else s&&n.add(o);if(Ln(o)&&!ds(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;bi(e,o),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Ui(e,o)}}function Ui(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&au(t,n)}function tg(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:kp(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=r,i=lu;n&&(o=[r],i=xo);const{revoke:s,proxy:a}=Proxy.revocable(o,i);return r.draft_=a,r.revoke_=s,a}var lu={get(e,t){if(t===ut)return e;const n=Cn(e);if(!Qa(n,t))return ng(e,n,t);const r=n[t];return e.finalized_||!Ln(r)?r:r===Ws(e.base_,t)?(Ks(e),e.copy_[t]=Za(r,e)):r},has(e,t){return t in Cn(e)},ownKeys(e){return Reflect.ownKeys(Cn(e))},set(e,t,n){const r=Ip(Cn(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const o=Ws(Cn(e),t),i=o==null?void 0:o[ut];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Xy(n,o)&&(n!==void 0||Qa(e.base_,t)))return!0;Ks(e),Ja(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Ws(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Ks(e),Ja(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Cn(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Mt(11)},getPrototypeOf(e){return wr(e.base_)},setPrototypeOf(){Mt(12)}},xo={};Fi(lu,(e,t)=>{xo[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});xo.deleteProperty=function(e,t){return xo.set.call(this,e,t,void 0)};xo.set=function(e,t,n){return lu.set.call(this,e[0],t,n,e[0])};function Ws(e,t){const n=e[ut];return(n?Cn(n):e)[t]}function ng(e,t,n){var o;const r=Ip(t,n);return r?"value"in r?r.value:(o=r.get)==null?void 0:o.call(e.draft_):void 0}function Ip(e,t){if(!(t in e))return;let n=wr(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=wr(n)}}function Ja(e){e.modified_||(e.modified_=!0,e.parent_&&Ja(e.parent_))}function Ks(e){e.copy_||(e.copy_=Ya(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var rg=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const i=n;n=t;const s=this;return function(l=i,...u){return s.produce(l,c=>n.call(this,c,...u))}}typeof n!="function"&&Mt(6),r!==void 0&&typeof r!="function"&&Mt(7);let o;if(Ln(t)){const i=Dc(this),s=Za(t,void 0);let a=!0;try{o=n(s),a=!1}finally{a?Ga(i):Xa(i)}return Rc(i,r),Lc(o,i)}else if(!t||typeof t!="object"){if(o=n(t),o===void 0&&(o=t),o===Sp&&(o=void 0),this.autoFreeze_&&au(o,!0),r){const i=[],s=[];On("Patches").generateReplacementPatches_(t,o,i,s),r(i,s)}return o}else Mt(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(s,...a)=>this.produceWithPatches(s,l=>t(l,...a));let r,o;return[this.produce(t,n,(s,a)=>{r=s,o=a}),r,o]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Ln(e)||Mt(8),xr(e)&&(e=og(e));const t=Dc(this),n=Za(e,void 0);return n[ut].isManual_=!0,Xa(t),n}finishDraft(e,t){const n=e&&e[ut];(!n||!n.isManual_)&&Mt(9);const{scope_:r}=n;return Rc(r,t),Lc(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const o=t[n];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}n>-1&&(t=t.slice(n+1));const r=On("Patches").applyPatches_;return xr(e)?r(e,t):this.produce(e,o=>r(o,t))}};function Za(e,t){const n=us(e)?On("MapSet").proxyMap_(e,t):cs(e)?On("MapSet").proxySet_(e,t):tg(e,t);return(t?t.scope_:kp()).drafts_.push(n),n}function og(e){return xr(e)||Mt(10,e),Cp(e)}function Cp(e){if(!Ln(e)||ds(e))return e;const t=e[ut];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Ya(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Ya(e,!0);return Fi(n,(r,o)=>{xp(n,r,Cp(o))}),t&&(t.finalized_=!1),n}var ct=new rg,ig=ct.produce;ct.produceWithPatches.bind(ct);ct.setAutoFreeze.bind(ct);ct.setUseStrictShallowCopy.bind(ct);ct.applyPatches.bind(ct);ct.createDraft.bind(ct);ct.finishDraft.bind(ct);const sg=e=>(t,n,r)=>(r.setState=(o,i,...s)=>{const a=typeof o=="function"?ig(o):o;return t(a,i,...s)},e(r.setState,n,r)),uu=sg,qo=5,gt=30,Vi=32,ag=.25;let Vn=null,Qs=0,Ys=0,Hn=0;const lg=500,ko=()=>{var i,s;const e={top:0,left:0,height:Math.floor(((i=window.document.querySelector(".area-root"))==null?void 0:i.getBoundingClientRect().height)||0),width:Math.floor(((s=window.document.querySelector(".area-root"))==null?void 0:s.getBoundingClientRect().width)||0)},t=Date.now();if(window.__AREA_RESIZING__){if(Hn||(Hn=t,Vn||(Vn={...e},Qs=e.width,Ys=e.height)),Vn)return Vn}else Hn&&t-Hn>lg&&(Hn=0);const n=Math.abs(e.width-Qs),r=Math.abs(e.height-Ys),o=n>5||r>5;return!window.__AREA_RESIZING__&&o&&!Hn&&(Vn={...e},Qs=e.width,Ys=e.height),Vn||e},qa=(e,t,n)=>e*(1-n)+t*n,Ep=(e,t,n)=>Math.min(t,Math.max(e,n)),ot=e=>e instanceof ve?e:typeof e.left=="number"?new ve(e.left,e.top):new ve(e.x,e.y),ee=class ee{static new(t,n){return typeof t=="number"?new ee(t,n):typeof t.left=="number"?new ee(t.left,t.top):new ee(t.x,t.y)}static fromEvent(t){return new ee(t.clientX,t.clientY)}static dot(t,n){const r=ot(t),o=ot(n);return r.x*o.x+r.y*o.y}constructor(t,n){typeof t=="number"?(this._x=t,this._y=n):(this._x=t.x,this._y=t.y),this.atOrigin=this.x===0&&this.y===0,this.apply=this.apply.bind(this)}set x(t){this._x=t,this.atOrigin=this.x===0&&this.y===0}get x(){return this._x}set y(t){this._y=t,this.atOrigin=this.x===0&&this.y===0}get y(){return this._y}add(t){const n=ot(t);return n.atOrigin?this:new ee(this.x+n.x,this.y+n.y)}addX(t){return new ee(this.x+t,this.y)}addY(t){return new ee(this.x,this.y+t)}sub(t){const n=ot(t);return n.atOrigin?this:new ee(this.x-n.x,this.y-n.y)}subX(t){return new ee(this.x-t,this.y)}subY(t){return new ee(this.x,this.y-t)}subXY(t,n){return new ee(this.x-t,this.y-n)}scale(t,n=ee.new(0,0)){if(t===1)return this;const r=ot(n);return new ee(r.x+(this.x-r.x)*t,r.y+(this.y-r.y)*t)}scaleX(t,n=ee.new(0,0)){if(t===1)return this;const r=ot(n);return new ee(r.x+(this.x-r.x)*t,this.y)}scaleY(t,n=ee.new(0,0)){if(t===1)return this;const r=ot(n);return new ee(this.x,r.y+(this.y-r.y)*t)}scaleXY(t,n,r=ee.new(0,0)){if(t===1&&n===1)return this;const o=ot(r);return new ee(o.x+(this.x-o.x)*t,o.y+(this.y-o.y)*n)}rotate(t,n=ee.new(0,0)){if(t===0)return this;const r=ot(n),o=this.x-r.x,i=this.y-r.y,s=Math.cos(t),a=Math.sin(t),l=o*s-i*a,u=o*a+i*s;return new ee(l+r.x,u+r.y)}multiplyMat2(t,n=ee.new(0,0)){const r=ot(n);return t.multiplyVec2(this.sub(r)).add(r)}copy(){return new ee(this.x,this.y)}lerp(t,n){const r=ot(t);return new ee(qa(this.x,r.x,n),qa(this.y,r.y,n))}round(){return ee.new(Math.round(this.x),Math.round(this.y))}apply(t){return ot(t(this))}length(){return Math.hypot(this.x,this.y)}eq(t){const n=ot(t);return n.x===this.x&&n.y===this.y}toJSON(){return{x:this.x,y:this.y,__objectType:"vec2"}}};ee.ORIGIN=ee.new(0,0);let ve=ee;const ug=rt.createContext(""),cg=(e,t)=>{const n={};if(t[e].type==="area")return{};function o(i){const s=t[i];if(s.type==="area")return{width:1,height:1};const a={height:0,width:0},l=s.areas.map(u=>o(u.id));return s.orientation==="horizontal"?(a.width=l.reduce((u,c)=>u+c.width,0),a.height=Math.max(...l.map(u=>u.height))):(a.height=l.reduce((u,c)=>u+c.height,0),a.width=Math.max(...l.map(u=>u.width))),n[i]=a,a}return n[e]=o(e),n};function En(e,t){const n={};if(!e)return console.error("computeAreaToParentRow received null or undefined layout."),{};const r=Object.keys(e);for(let o=0;o<r.length;o+=1){const i=e[r[o]];if(!i||i.type!=="area_row")continue;const s=i;if(s.areas&&Array.isArray(s.areas))for(let a=0;a<s.areas.length;a+=1)s.areas[a]&&s.areas[a].id&&(n[s.areas[a].id]=s.id)}return n}const nr={lastCalculation:0,totalCalculations:0,failedIds:new Set,reportedProblems:new Set,reset(){this.failedIds.clear(),this.reportedProblems.clear()}};setInterval(()=>{Date.now()-nr.lastCalculation>6e4&&nr.reset()},6e4);let $r={width:0,height:0};const kr=(e,t,n)=>{if(Math.random().toString(36).substring(2,7),!t)return{};const r=JSON.parse(JSON.stringify(e));if(nr.lastCalculation=Date.now(),nr.totalCalculations++,!n||n.width<=0||n.height<=0)if(console.error("Invalid viewport dimensions",n),$r.width>0&&$r.height>0)console.warn("Using last valid viewport dimensions"),n={...n,width:$r.width,height:$r.height};else return{};else $r={width:n.width,height:n.height};if(!e||Object.keys(e).length===0)return console.error("Empty layout provided to computeAreaToViewport"),{};if(!t||!r[t])return console.error(`Invalid rootId: ${t} - not found in layout`,e),{};const o={},i=new Set,s=nr.reportedProblems;Object.entries(r).forEach(([d,m])=>{m?m.type==="area_row"&&(!m.areas||!Array.isArray(m.areas))&&console.error(`Area row ${d} has invalid areas property`,m):console.error(`Invalid area definition for id ${d}`,m)});function a(d,m){if(!d||!m){console.error("Invalid area or contentArea in computeArea",{area:d,contentArea:m});return}if(!i.has(d.id)){if(d.type||(console.warn(`Area ${d.id} has no type, defaulting to 'area'`),d.type="area"),m.width<=0||m.height<=0){console.warn(`Area ${d.id} has invalid content area size: ${m.width}x${m.height}`);return}i.add(d.id),o[d.id]={...m}}}function l(d,m){if(!d||!m||i.has(d.id)){if(d&&i.has(d.id))return;if(!d){console.error("computeRow: Invalid row");return}if(!m){console.error("computeRow: Invalid contentArea for row",d.id);return}}if(i.add(d.id),(!d.areas||!Array.isArray(d.areas))&&(console.error("Row without proper areas array in computeRow",{rowId:d.id,areas:d.areas}),d.areas=[]),(m.width<=0||m.height<=0)&&(console.error("ContentArea with invalid dimensions in computeRow",{rowId:d.id,contentArea:m}),m={...m,width:Math.max(m.width,10),height:Math.max(m.height,10)},console.warn("Corrected contentArea to minimum size for row",d.id,m)),d.areas.length===0){console.warn("Row with empty areas array in computeRow, skipping children but assigning viewport",{rowId:d.id}),o[d.id]={...m};return}o[d.id]={...m};const v=d.areas.map(y=>y.id).filter(y=>!r[y]);v.length>0&&v.forEach(y=>{s.has(`auto_creating_${y}`)||(console.warn(`Auto-creating area ${y} referenced in row ${d.id}`),s.add(`auto_creating_${y}`)),r[y]={type:"area",id:y}});const S=.05;let p=0;d.areas.forEach((y,I)=>{y.size>1&&(y.size=y.size/100),typeof y.size!="number"||isNaN(y.size)||y.size<=0?(y.size===0&&p++,s.has(`${d.id}_${I}_size`)||(console.warn(`Invalid size for area ${y.id}: ${y.size}, defaulting to 1/${d.areas.length}`),s.add(`${d.id}_${I}_size`)),y.size=1/d.areas.length):y.size<S&&(s.has(`${d.id}_${I}_min_size`)||(console.warn(`Area ${y.id} has very small size: ${y.size}, setting to minimum ${S}`),s.add(`${d.id}_${I}_min_size`)),y.size=S)});const k=d.areas.reduce((y,I)=>y+(I.size||0),0);if(k===0||p===d.areas.length){console.warn(`All areas in row ${d.id} have zero size, setting equal distribution`);const y=1/d.areas.length;d.areas.forEach(I=>{I.size=y})}else if(Math.abs(k-1)>.001){const y=1/k;d.areas.forEach(I=>{I.size=I.size*y})}const h=d.areas.reduce((y,I)=>y+(I.size||0),0);if(Math.abs(h-1)>.001){console.error(`Failed to normalize sizes in row ${d.id}: final total=${h}`);const y=1/d.areas.length;d.areas.forEach(I=>{I.size=y})}let f=m.left,g=m.top,C=0,w=0;for(let y=0;y<d.areas.length;y++){const I=d.areas[y];if(!I||!I.id)continue;const z=I.id,A=r[z],M=y===d.areas.length-1;if(!A)continue;let L,N;d.orientation==="horizontal"?(N=m.height,M?L=Math.max(0,m.width-C):(L=Math.max(0,Math.floor(I.size*m.width)),C+=L)):(L=m.width,M?N=Math.max(0,m.height-w):(N=Math.max(0,Math.floor(I.size*m.height)),w+=N));const _={left:f,top:g,width:L,height:N};try{A.type==="area"?a(A,_):A.type==="area_row"&&l(A,_)}catch(j){console.error(`[computeRow RECURSE_ERROR ${y}] Error computing viewport for area ${z}:`,j)}d.orientation==="horizontal"?f+=L:g+=N}}const u=r[t];u.type==="area"?a(u,n):u.type==="area_row"&&l(u,n);const c=Object.keys(r).filter(d=>!o[d]);return c.length>0&&c.forEach(d=>{o[d]||(nr.failedIds.add(d),o[d]={left:0,top:0,width:100,height:100})}),o},Ap=(e,t,n,r)=>{const o=r?ve.new(e.x+r.x/15,e.y+r.y/15):e;let i,s,a=1/0,l;return Object.entries(n).forEach(([u,c])=>{const d=t.layout[u];if(!d||d.type!=="area"&&!(d.type==="area_row"&&d.orientation==="stack"))return;if(o.x>=c.left&&o.x<=c.left+c.width&&o.y>=c.top&&o.y<=c.top+c.height){d.type==="area_row"&&d.orientation==="stack"?i=u:d.type==="area"&&(s=u);return}const v=Math.abs(o.x-c.left),S=Math.abs(o.x-(c.left+c.width)),p=Math.abs(o.y-c.top),k=Math.abs(o.y-(c.top+c.height)),h=Math.min(v,S,p,k);h<a&&(a=h,l=u)}),i||s||l};function _p(e,t){const n=t.x-e.left,r=t.y-e.top,o=n,i=e.width-n,s=r,a=e.height-r,l=e.width/2,u=e.height/2,c=Math.abs(n-l),d=Math.abs(r-u),m=e.width*.3,v=e.height*.3;if(c<m&&d<v)return"stack";const S=Math.min(o,i,s,a);let p;return S===o?p="left":S===i?p="right":S===s?p="top":p="bottom",p}const dg=(e,t,n)=>{const r=t,o=r+n;if(r<0||r>=e.areas.length||o<0||o>=e.areas.length)throw new Error(`Invalid indices: source=${r}, target=${o}, length=${e.areas.length}, direction=${n===-1?"west":"east"}`);const i=e.areas[r],s=e.areas[o];if(!i||!s)throw new Error(`Missing areas: source=${i}, target=${s}`);const a=i.size||1,l=s.size||1,u=a+l;if(e.areas.length===2)return{area:{type:"area",id:i.id},removedAreaId:s.id};const c=[...e.areas];return c[o]={id:i.id,size:u},c.splice(r,1),{area:{...e,areas:c},removedAreaId:s.id}},fg=e=>{const t=[];return e.id||t.push("Missing ID"),e.type||t.push("Missing type"),e.state||t.push("Missing state"),{isValid:t.length===0,errors:t}},Gs=e=>{const t=[];return typeof e.x!="number"&&t.push("Position X must be a number"),typeof e.y!="number"&&t.push("Position Y must be a number"),isNaN(e.x)&&t.push("Position X is NaN"),isNaN(e.y)&&t.push("Position Y is NaN"),{isValid:t.length===0,errors:t}},$c=e=>{const t=[];return e.id||t.push("Missing ID"),e.label||t.push("Missing label"),e.actionId||t.push("Missing actionId"),{isValid:t.length===0,errors:t}},Fc={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Io=new Map,ei=e=>{const t=Io.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([n,r])=>[n,r.getState()])):{}},pg=(e,t,n)=>{if(e===void 0)return{type:"untracked",connection:t.connect(n)};const r=Io.get(n.name);if(r)return{type:"tracked",store:e,...r};const o={connection:t.connect(n),stores:{}};return Io.set(n.name,o),{type:"tracked",store:e,...o}},hg=(e,t)=>{if(t===void 0)return;const n=Io.get(e);n&&(delete n.stores[t],Object.keys(n.stores).length===0&&Io.delete(e))},mg=e=>{var t,n;if(!e)return;const r=e.split(`
`),o=r.findIndex(s=>s.includes("api.setState"));if(o<0)return;const i=((t=r[o+1])==null?void 0:t.trim())||"";return(n=/.+ (.+) .+/.exec(i))==null?void 0:n[1]},yg=(e,t={})=>(n,r,o)=>{const{enabled:i,anonymousActionType:s,store:a,...l}=t;let u;try{u=(i??(Fc?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return e(n,r,o);const{connection:c,...d}=pg(a,u,l);let m=!0;o.setState=(p,k,h)=>{const f=n(p,k);if(!m)return f;const g=mg(new Error().stack),C=h===void 0?{type:s||g||"anonymous"}:typeof h=="string"?{type:h}:h;return a===void 0?(c==null||c.send(C,r()),f):(c==null||c.send({...C,type:`${a}/${C.type}`},{...ei(l.name),[a]:o.getState()}),f)},o.devtools={cleanup:()=>{c&&typeof c.unsubscribe=="function"&&c.unsubscribe(),hg(l.name,a)}};const v=(...p)=>{const k=m;m=!1,n(...p),m=k},S=e(o.setState,r,o);if(d.type==="untracked"?c==null||c.init(S):(d.stores[d.store]=o,c==null||c.init(Object.fromEntries(Object.entries(d.stores).map(([p,k])=>[p,p===d.store?S:k.getState()])))),o.dispatchFromDevtools&&typeof o.dispatch=="function"){let p=!1;const k=o.dispatch;o.dispatch=(...h)=>{(Fc?"production":void 0)!=="production"&&h[0].type==="__setState"&&!p&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),p=!0),k(...h)}}return c.subscribe(p=>{var k;switch(p.type){case"ACTION":if(typeof p.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return Xs(p.payload,h=>{if(h.type==="__setState"){if(a===void 0){v(h.state);return}Object.keys(h.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const f=h.state[a];if(f==null)return;JSON.stringify(o.getState())!==JSON.stringify(f)&&v(f);return}o.dispatchFromDevtools&&typeof o.dispatch=="function"&&o.dispatch(h)});case"DISPATCH":switch(p.payload.type){case"RESET":return v(S),a===void 0?c==null?void 0:c.init(o.getState()):c==null?void 0:c.init(ei(l.name));case"COMMIT":if(a===void 0){c==null||c.init(o.getState());return}return c==null?void 0:c.init(ei(l.name));case"ROLLBACK":return Xs(p.state,h=>{if(a===void 0){v(h),c==null||c.init(o.getState());return}v(h[a]),c==null||c.init(ei(l.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Xs(p.state,h=>{if(a===void 0){v(h);return}JSON.stringify(o.getState())!==JSON.stringify(h[a])&&v(h[a])});case"IMPORT_STATE":{const{nextLiftedState:h}=p.payload,f=(k=h.computedStates.slice(-1)[0])==null?void 0:k.state;if(!f)return;v(a===void 0?f:f[a]),c==null||c.send(null,h);return}case"PAUSE_RECORDING":return m=!m}return}}),S},Mp=yg,Xs=(e,t)=>{let n;try{n=JSON.parse(e)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&t(n)};function zp(e,t){let n;try{n=e()}catch{return}return{getItem:o=>{var i;const s=l=>l===null?null:JSON.parse(l,void 0),a=(i=n.getItem(o))!=null?i:null;return a instanceof Promise?a.then(s):s(a)},setItem:(o,i)=>n.setItem(o,JSON.stringify(i,void 0)),removeItem:o=>n.removeItem(o)}}const el=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return el(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return el(r)(n)}}}},gg=(e,t)=>(n,r,o)=>{let i={storage:zp(()=>localStorage),partialize:p=>p,version:0,merge:(p,k)=>({...k,...p}),...t},s=!1;const a=new Set,l=new Set;let u=i.storage;if(!u)return e((...p)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...p)},r,o);const c=()=>{const p=i.partialize({...r()});return u.setItem(i.name,{state:p,version:i.version})},d=o.setState;o.setState=(p,k)=>{d(p,k),c()};const m=e((...p)=>{n(...p),c()},r,o);o.getInitialState=()=>m;let v;const S=()=>{var p,k;if(!u)return;s=!1,a.forEach(f=>{var g;return f((g=r())!=null?g:m)});const h=((k=i.onRehydrateStorage)==null?void 0:k.call(i,(p=r())!=null?p:m))||void 0;return el(u.getItem.bind(u))(i.name).then(f=>{if(f)if(typeof f.version=="number"&&f.version!==i.version){if(i.migrate){const g=i.migrate(f.state,f.version);return g instanceof Promise?g.then(C=>[!0,C]):[!0,g]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,f.state];return[!1,void 0]}).then(f=>{var g;const[C,w]=f;if(v=i.merge(w,(g=r())!=null?g:m),n(v,!0),C)return c()}).then(()=>{h==null||h(v,void 0),v=r(),s=!0,l.forEach(f=>f(v))}).catch(f=>{h==null||h(void 0,f)})};return o.persist={setOptions:p=>{i={...i,...p},p.storage&&(u=p.storage)},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>S(),hasHydrated:()=>s,onHydrate:p=>(a.add(p),()=>{a.delete(p)}),onFinishHydration:p=>(l.add(p),()=>{l.delete(p)})},i.skipHydration||S(),v||m},jp=gg,xe=new Map,W={registerComponent:(e,t)=>{const n=xe.get(e)||{};xe.set(e,{...n,component:t})},registerInitialState:(e,t)=>{const n=xe.get(e)||{};xe.set(e,{...n,initialState:t})},registerDisplayName:(e,t)=>{const n=xe.get(e)||{};xe.set(e,{...n,displayName:t})},registerIcon:(e,t)=>{const n=xe.get(e)||{};xe.set(e,{...n,icon:t})},registerDefaultSize:(e,t)=>{const n=xe.get(e)||{};xe.set(e,{...n,defaultSize:t})},registerSupportedActions:(e,t)=>{const n=xe.get(e)||{};xe.set(e,{...n,supportedActions:t})},getComponent:e=>{var t;return(t=xe.get(e))==null?void 0:t.component},getInitialState:e=>{var t;return((t=xe.get(e))==null?void 0:t.initialState)||{}},getDisplayName:e=>{var t;return((t=xe.get(e))==null?void 0:t.displayName)||e},getIcon:e=>{var t;return(t=xe.get(e))==null?void 0:t.icon},getDefaultSize:e=>{var t;return(t=xe.get(e))==null?void 0:t.defaultSize},getSupportedActions:e=>{var t;return(t=xe.get(e))==null?void 0:t.supportedActions},getRegisteredTypes:()=>new Set(Array.from(xe.keys())),unregisterAreaType:e=>{xe.delete(e)}},ze=[];for(let e=0;e<256;++e)ze.push((e+256).toString(16).slice(1));function vg(e,t=0){return(ze[e[t+0]]+ze[e[t+1]]+ze[e[t+2]]+ze[e[t+3]]+"-"+ze[e[t+4]]+ze[e[t+5]]+"-"+ze[e[t+6]]+ze[e[t+7]]+"-"+ze[e[t+8]]+ze[e[t+9]]+"-"+ze[e[t+10]]+ze[e[t+11]]+ze[e[t+12]]+ze[e[t+13]]+ze[e[t+14]]+ze[e[t+15]]).toLowerCase()}let Js;const Sg=new Uint8Array(16);function wg(){if(!Js){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Js=crypto.getRandomValues.bind(crypto)}return Js(Sg)}const xg=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),bc={randomUUID:xg};function pi(e,t,n){var o;if(bc.randomUUID&&!e)return bc.randomUUID();e=e||{};const r=e.random??((o=e.rng)==null?void 0:o.call(e))??wg();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,vg(r)}function kg(e,t){const n=[];function r(o,i,s){if(i!==s){if(typeof i!=typeof s){n.push({path:o,oldValue:i,newValue:s});return}if(typeof i=="object"&&i!==null&&s!==null){const a=i,l=s,u=Object.keys(a),c=Object.keys(l);u.forEach(d=>{c.includes(d)||n.push({path:[...o,d],oldValue:a[d],newValue:void 0})}),c.forEach(d=>{u.includes(d)?r([...o,d],a[d],l[d]):n.push({path:[...o,d],oldValue:void 0,newValue:l[d]})})}else n.push({path:o,oldValue:i,newValue:s})}}return r([],e,t),n}function Uc(e,t){let n={...e};return t.changes.forEach(r=>{let o=n;for(let i=0;i<r.path.length-1;i++)o=o[r.path[i]];o[r.path[r.path.length-1]]=r.oldValue}),n}function Ig(e){return{...e,changes:e.changes.map(t=>({...t,oldValue:t.newValue,newValue:t.oldValue}))}}const Cg=uu((e,t)=>({spaces:{},activeSpaceId:null,openSpaceIds:[],errors:[],pilotMode:"AUTO",addSpace:n=>{var i;if(!n.name){e(s=>{s.errors=["Space name cannot be empty."]}),console.error("Validation failed for space:",t().errors);return}const r=pi(),o={id:r,name:n.name,description:n.description??"",sharedState:{color:((i=n.sharedState)==null?void 0:i.color)??"#ff0000",pastDiffs:[],futureDiffs:[],...n.sharedState||{}}};return e(s=>{s.spaces[r]=o,s.openSpaceIds.push(r),s.errors=[]}),r},removeSpace:n=>{e(r=>{delete r.spaces[n],r.activeSpaceId===n&&(r.activeSpaceId=null),r.openSpaceIds=r.openSpaceIds.filter(o=>o!==n),r.errors=[]})},setActiveSpace:n=>{e(r=>{n===null||r.spaces[n]?r.activeSpaceId=n:console.warn(`Attempted to set active space to non-existent ID: ${n}`),r.errors=[]})},setPilotMode:n=>{e(r=>{r.pilotMode=n})},openSpace:n=>{e(r=>{r.spaces[n]&&!r.openSpaceIds.includes(n)&&r.openSpaceIds.push(n)})},closeSpace:n=>{e(r=>{r.openSpaceIds=r.openSpaceIds.filter(o=>o!==n),r.activeSpaceId===n&&(r.activeSpaceId=r.openSpaceIds[r.openSpaceIds.length-1]||null)})},updateSpace:n=>{e(r=>{const o=r.spaces[n.id];if(o){if(n.name===""){r.errors=["Space name cannot be empty."],console.error("Validation failed for space update:",r.errors);return}const{id:i,...s}=n;r.spaces[i]={...o,...s},r.errors=[]}else r.errors=[`Space with ID ${n.id} not found for update.`],console.error("Update failed:",r.errors)})},updateSpaceGenericSharedState:n=>{var d;const{spaceId:r,changes:o}=n,i=t().spaces[r];if(!i){e(m=>{m.errors=[`Space with ID ${n.spaceId} not found for shared state update.`]}),console.error("Shared state update failed: Space not found");return}const s=i.sharedState,a=o.actionType||"UPDATE_SHARED_STATE",l=o.payload||{};e(m=>{const v=m.spaces[r];if(v){const{actionType:S,payload:p,...k}=o;v.sharedState={...v.sharedState,...k},m.errors=[]}});const u=(d=t().spaces[r])==null?void 0:d.sharedState;if(!u){console.error("Shared state update failed: Space disappeared after update?");return}const c=kg(s,u);Array.isArray(c)&&c.length>0&&e(m=>{const v=m.spaces[r];v&&(v.sharedState.pastDiffs||(v.sharedState.pastDiffs=[]),v.sharedState.pastDiffs.push({timestamp:Date.now(),actionType:a,payload:l,changes:c}),v.sharedState.futureDiffs=[])})},clearErrors:()=>{e(n=>{n.errors=[]})},undoSharedState:n=>{e(r=>{var l,u;const o=r.spaces[n];if(!((u=(l=o==null?void 0:o.sharedState)==null?void 0:l.pastDiffs)!=null&&u.length))return;const i=o.sharedState.pastDiffs.pop(),s=o.sharedState,a=Uc(s,i);o.sharedState=a,o.sharedState.futureDiffs||(o.sharedState.futureDiffs=[]),o.sharedState.futureDiffs.push(i)})},redoSharedState:n=>{e(r=>{var u,c;const o=r.spaces[n];if(!((c=(u=o==null?void 0:o.sharedState)==null?void 0:u.futureDiffs)!=null&&c.length))return;const i=o.sharedState.futureDiffs.pop(),s=Ig(i),a=o.sharedState,l=Uc(a,s);o.sharedState=l,o.sharedState.pastDiffs||(o.sharedState.pastDiffs=[]),o.sharedState.pastDiffs.push(i)})},getSpaceById:n=>t().spaces[n],getAllSpaces:()=>t().spaces,getActiveSpace:()=>{const n=t();return n.activeSpaceId?n.spaces[n.activeSpaceId]:null},getActiveSpaceId:()=>t().activeSpaceId,getOpenSpaces:()=>{const n=t();return n.openSpaceIds.map(r=>n.spaces[r]).filter(r=>r!==void 0)},getSpaceErrors:()=>t().errors,getPilotMode:()=>t().pilotMode})),Eg=jp(Cg,{name:"space-storage",partialize:e=>{const t={};for(const o in e.spaces){const{sharedState:i,...s}=e.spaces[o],{pastDiffs:a,futureDiffs:l,...u}=i??{};t[o]={...s,sharedState:u}}const{activeSpaceId:n}=e;return{spaces:t,activeSpaceId:n}},merge:(e,t)=>{const n=e,r={},o=(n==null?void 0:n.spaces)??{},i=t.spaces,s=new Set([...Object.keys(o),...Object.keys(i)]);for(const l of s){const u=o[l],c=i[l];if(!u&&!c)continue;const d=(c==null?void 0:c.sharedState)??{},m=(u==null?void 0:u.sharedState)??{};r[l]={id:(u==null?void 0:u.id)??(c==null?void 0:c.id)??l,name:(u==null?void 0:u.name)??(c==null?void 0:c.name)??`Space ${l}`,description:(u==null?void 0:u.description)??(c==null?void 0:c.description)??"",sharedState:{...d,...m,pastDiffs:[],futureDiffs:[]}},r[l].sharedState.color||(r[l].sharedState.color="#000000")}return{...t,activeSpaceId:(n==null?void 0:n.activeSpaceId)??t.activeSpaceId,spaces:r,errors:[]}}}),B=su()(Mp(Eg,{name:"SpaceStore"})),Tp={_id:0,rootId:null,updateLayout:()=>{},errors:[],activeAreaId:null,joinPreview:null,layout:{},areas:{},viewports:{},areaToOpen:null,lastSplitResultData:null,lastLeadAreaId:null,addArea:()=>"",removeArea:()=>{},setActiveArea:()=>{},updateArea:()=>{},setAreaToOpen:()=>{},updateAreaToOpenPosition:()=>{},finalizeAreaPlacement:()=>{},cleanupTemporaryStates:()=>{},setViewports:()=>{},setRowSizes:()=>{},splitArea:()=>null,setJoinPreview:()=>{},joinOrMoveArea:()=>{},getLastSplitResult:()=>null,getActiveArea:()=>null,getAreaById:()=>{},getAllAreas:()=>({}),getAreaErrors:()=>[],getLastLeadAreaId:()=>null},rr=()=>JSON.parse(JSON.stringify({areas:Tp}));function tl(e,t,n){for(const r in e){const o=e[r];if(o.type==="area_row"){const i=o,s=i.areas.findIndex(l=>l.id===t),a=i.areas.findIndex(l=>l.id===n);if(s!==-1&&a!==-1&&Math.abs(s-a)===1)return{parentRow:i,sourceIndex:s,targetIndex:a}}}return{parentRow:null,sourceIndex:-1,targetIndex:-1}}function Ag(e,t){var i;const n=new Set,r=[t],o=new Set;for(;r.length>0;){const s=r.shift();if(o.has(s))continue;o.add(s);const a=e[s];if(a){if(a.type==="area")n.add(s);else if(a.type==="area_row"){const l=a;l.areas&&Array.isArray(l.areas)&&l.areas.forEach(u=>{u&&u.id&&r.push(u.id)})}}}return((i=e[t])==null?void 0:i.type)==="area"&&n.add(t),n}function Br(e,t){var l;if(!t)return;const n=e.layout[t];if(!n||n.type!=="area_row")return;const r=n;if(r.areas.length!==1)return;const o=r.areas[0],i=o.id,a=En(e.layout,e.rootId)[t];if(a&&((l=e.layout[a])==null?void 0:l.type)==="area_row"){const u=e.layout[a],c=u.areas.findIndex(d=>d.id===t);if(c!==-1){const d=u.areas[c].size??o.size??.5;u.areas[c]={id:i,size:d}}else{console.error(`[simplifyLayoutNodeIfNeeded] Cleanup Error: Row ${t} not found in parent ${a}.`);return}}else e.rootId===t?e.rootId=i:console.warn(`[simplifyLayoutNodeIfNeeded] Row ${t} has single child ${i} but no parent and is not root. Removing row.`);delete e.layout[t]}function Pp(e,t){const n=e[t];return n?n.type==="area"?t:n.type==="area_row"&&n.areas.length>0?Pp(e,n.areas[0].id):null:null}const _g=(e,t)=>({...Tp,addArea:n=>{let r="";return e(o=>{var c;const i=(c=o.screens[o.activeScreenId])==null?void 0:c.areas;if(!i)return;const s=n.id||pi();let a;n.type&&(a=(W._roleMap||{})[n.type]);const l={...n,id:s,role:a};if(a===oe.LEAD&&!l.spaceId){const d=B.getState().spaces,m=Object.keys(d);if(m.length>0){const v=B.getState().activeSpaceId;l.spaceId=v||m[0]}else{const v=B.getState().addSpace({name:`Space for ${n.type}`,sharedState:{}});v&&(l.spaceId=v)}}const u=fg(l);u.isValid?(i.areas[s]=l,i._id+=1,i.errors=[],r=s,o.lastUpdated=Date.now()):(i.errors=u.errors,console.error("Validation failed for area:",u.errors))}),r},removeArea:n=>e(r=>{var s,a;const o=(s=r.screens[r.activeScreenId])==null?void 0:s.areas;if(!o)return;if(Object.keys(o.areas).length<=1){console.warn("Cannot remove the last area of a screen");return}delete o.areas[n],delete o.layout[n];for(const l in o.layout){const u=o.layout[l];if(u.type==="area_row"){const c=u,d=c.areas.findIndex(m=>m.id===n);if(d!==-1)if(c.areas.splice(d,1),c.orientation==="stack"){if(c.activeTabId===n&&(c.activeTabId=((a=c.areas[0])==null?void 0:a.id)||void 0),c.areas.length===0)delete o.layout[l];else if(c.areas.length===1){const m=Object.keys(o.layout).find(v=>{const S=o.layout[v];return S.type==="area_row"&&S.areas.some(p=>p.id===l)});if(m){const v=o.layout[m],S=v.areas.findIndex(p=>p.id===l);S!==-1&&(v.areas[S]={...c.areas[0]}),delete o.layout[l]}else o.rootId===l&&(o.rootId=c.areas[0].id,delete o.layout[l])}}else c.areas.length===0&&delete o.layout[l]}}o.rootId===n&&(o.rootId=null),o.activeAreaId===n&&(o.activeAreaId=null),o.errors=[],r.lastUpdated=Date.now()}),setActiveArea:n=>e(r=>{var i,s;const o=(i=r.screens[r.activeScreenId])==null?void 0:i.areas;o&&(n===null||o.areas[n])&&o.activeAreaId!==n&&(o.activeAreaId=n,n&&((s=o.areas[n])==null?void 0:s.role)===oe.LEAD&&(o.lastLeadAreaId=n),o.errors=[],r.lastUpdated=Date.now())}),updateArea:n=>e(r=>{var s;const o=(s=r.screens[r.activeScreenId])==null?void 0:s.areas;if(!o)return;const i=o.areas[n.id];if(i){const a=n.type||i.type;let l=i.role;(!l||n.type&&n.type!==i.type)&&(l=(W._roleMap||{})[a]);const u=JSON.stringify(i);Object.assign(i,n,{role:l});const c=JSON.stringify(i);u!==c&&(o.errors=[],r.lastUpdated=Date.now())}else o.errors=[`Area with ID ${n.id} not found for update.`]}),updateLayout:n=>e(r=>{var s;const o=(s=r.screens[r.activeScreenId])==null?void 0:s.areas;if(!o)return;const i=o.layout[n.id];if(i&&i.type==="area_row"){const a=JSON.stringify(i);n.activeTabId!==void 0&&(i.activeTabId=n.activeTabId),n.areas!==void 0&&(i.areas=n.areas);const l=JSON.stringify(i);a!==l&&(o.errors=[],r.lastUpdated=Date.now())}else o.errors=[`Layout with ID ${n.id} not found or not a row.`]}),setAreaToOpen:n=>e(r=>{var i;const o=(i=r.screens[r.activeScreenId])==null?void 0:i.areas;o&&o.areaToOpen!==n&&(o.areaToOpen=n,r.lastUpdated=Date.now())}),updateAreaToOpenPosition:n=>e(r=>{var i;const o=(i=r.screens[r.activeScreenId])==null?void 0:i.areas;o!=null&&o.areaToOpen&&(o.areaToOpen.position.x!==n.x||o.areaToOpen.position.y!==n.y)&&(o.areaToOpen.position=n)}),finalizeAreaPlacement:n=>e(r=>{var s,a,l,u,c,d,m,v,S;const o=(s=r.screens[r.activeScreenId])==null?void 0:s.areas;if(!o)return;const i=o.areaToOpen;if(!i){o.errors=["No area to open"];return}try{const{position:p,area:k}=i,h=(a=k.state)==null?void 0:a.sourceId,f=h||pi(),g=new ve(p.x,p.y);if(!h){if(o.areas[f]){console.error(`finalizeAreaPlacement: ID conflict for new area ${f}`),o.areaToOpen=null;return}o.areas[f]={id:f,type:k.type,state:k.state},o._id+=1}const C=ko(),w=kr(o.layout,o.rootId||"",C);let y=n==null?void 0:n.targetId,I=n==null?void 0:n.placement;if(!y){const N=new ve(300,200);y=Ap(g,o,w,N)}if(!y){h||delete o.areas[f],o.areaToOpen=null;return}const z=w[y];if(!z){console.error(`[areaStore] finalizeAreaPlacement: Viewport not found for target ${y}. Bailing out.`),h||delete o.areas[f],o.areaToOpen=null;return}I||(I=_p(z,g)),o.areaToOpen=null;let A=null,M=null;if(h){const N=En(o.layout,o.rootId),_=N[h];if(A=_,_&&((l=o.layout[_])==null?void 0:l.type)==="area_row"){const j=o.layout[_],D=j.areas.findIndex(R=>R.id===h);if(D!==-1)if(j.areas.splice(D,1),j.areas.length===0){delete o.layout[_];const R=N[_];Br(o,R)}else{const R=j.areas.reduce((F,T)=>F+(T.size||0),0);if(R>0){const F=1/R;j.areas.forEach(T=>{T.size=(T.size||0)*F})}j.areas.length===1&&(M=j.areas[0].id),Br(o,_)}}else o.layout[h]&&delete o.layout[h];h!==f&&delete o.areas[h],o.rootId===h&&(o.rootId=null)}y&&y===A&&M&&!o.layout[y]&&(y=M);let L=I==="stack"?"horizontal":I==="top"||I==="bottom"?"vertical":"horizontal";if(I==="stack"){let N=y,_=o.areas[N],j=null;if(((u=o.layout[N])==null?void 0:u.type)==="area_row"&&o.layout[N].orientation==="stack")_=o.areas[N];else if(!_&&((c=o.layout[N])==null?void 0:c.type)==="area_row"){const U=Pp(o.layout,N);U&&(j=N,N=U,_=o.areas[N])}const D=o.areas[f];if(!D||!_){console.error("[finalizeAreaPlacement] Stack creation failed: Source or target area not found.");return}if(!(((d=t().options)==null?void 0:d.allowStackMixedRoles)!==!1)){const U=D.role||D.type&&((m=W._roleMap)==null?void 0:m[D.type]),H=_.role||_.type&&((v=W._roleMap)==null?void 0:v[_.type]);if(U&&H&&U!==H){o.errors=["Impossible de stacker des areas de rôles différents (option de configuration)"];return}}const F=`row-${o._id+1}`;o._id+=1;const T={type:"area_row",id:F,orientation:"stack",areas:[{id:N,size:.5},{id:f,size:.5}],activeTabId:N},b=En(o.layout,o.rootId)[N];if(b&&((S=o.layout[b])==null?void 0:S.type)==="area_row"){const U=o.layout[b],H=U.areas.findIndex(Z=>Z.id===N);if(H!==-1){const Z=U.areas[H].size;U.areas[H]={id:F,size:Z}}}else o.rootId===N&&(o.rootId=F);o.layout[F]=T,o.activeAreaId=N}else{const _=En(o.layout,o.rootId)[y],j=_?o.layout[_]:null,D=pi();if(o.layout[f]||(o.layout[f]={type:"area",id:f}),j&&j.type==="area_row"){const R=j.areas.findIndex(F=>F.id===y);if(R===-1){console.error(`[finalizeAreaPlacement] Target ${y} not found in parent ${_}`);return}if(j.orientation===L){const F=R+(I==="bottom"||I==="right"?1:0);let T=[];F===0?T=[j.areas[0]]:F===j.areas.length?T=[j.areas[j.areas.length-1]]:T=[j.areas[F-1],j.areas[F]];const b=T.reduce((U,H)=>U+(H.size||0),0)/(T.length+1);T.forEach(U=>U.size=b),j.areas.splice(F,0,{id:f,size:b})}else{o._id+=1;const F={type:"area_row",id:D,orientation:L,areas:I==="bottom"||I==="right"?[{id:y,size:.5},{id:f,size:.5}]:[{id:f,size:.5},{id:y,size:.5}]};o.layout[D]=F,j.areas[R]={id:D,size:j.areas[R].size}}}else{o._id+=1;const R={type:"area_row",id:D,orientation:L,areas:I==="bottom"||I==="right"?[{id:y,size:.5},{id:f,size:.5}]:[{id:f,size:.5},{id:y,size:.5}]};o.layout[D]=R,o.rootId=D,o.layout[y]||(o.layout[y]={type:"area",id:y})}}if(o.areas[f]&&(r.screens[r.activeScreenId].areas.activeAreaId=f,o.areas[f].role===oe.LEAD&&(r.screens[r.activeScreenId].areas.lastLeadAreaId=f)),o.rootId&&C&&C.width>0&&C.height>0){const N=kr(o.layout,o.rootId,C);o.viewports=N}else o.viewports={};r.lastUpdated=Date.now()}catch(p){o&&(o.areaToOpen=null),o.errors=[`Error finalizing area placement: ${p}`]}}),cleanupTemporaryStates:()=>e(n=>{var o;const r=(o=n.screens[n.activeScreenId])==null?void 0:o.areas;r&&(r.joinPreview||r.areaToOpen||r.lastSplitResultData)&&(r.joinPreview=null,r.areaToOpen=null,r.lastSplitResultData=null,n.lastUpdated=Date.now())}),setViewports:n=>e(r=>{var i;const o=(i=r.screens[r.activeScreenId])==null?void 0:i.areas;o&&(o.viewports=n)}),setRowSizes:n=>e(r=>{var s;const o=(s=r.screens[r.activeScreenId])==null?void 0:s.areas;if(!o)return;const i=o.layout[n.rowId];if(i&&i.type==="area_row"){const a=i;if(a.areas.length===n.sizes.length){let l=n.sizes.reduce((u,c)=>u+c,0);if(Math.abs(l-1)>.001&&l>0){const u=1/l;a.areas.forEach((c,d)=>{c&&(c.size=n.sizes[d]*u)})}else a.areas.forEach((u,c)=>{u&&(u.size=n.sizes[c])});r.lastUpdated=Date.now()}}}),splitArea:n=>{let r=null;return e(o=>{var g,C;const i=(g=o.screens[o.activeScreenId])==null?void 0:g.areas;if(!i)return;const{areaIdToSplit:s,parentRowId:a,horizontal:l}=n,u=i.layout[s];if(u.type==="area_row"&&u.orientation==="stack"){const w=u.areas,y=[];for(const L of w){const N=i.areas[L.id];if(!N)continue;const _=`area-${i._id+1}`;i._id+=1,i.areas[_]={id:_,type:N.type,state:{...N.state}},i.layout[_]={type:"area",id:_},y.push({id:_,size:L.size})}const I=`row-${i._id+1}`;i._id+=1;const z={id:I,type:"area_row",orientation:"stack",areas:y,activeTabId:(C=y[0])==null?void 0:C.id};i.layout[I]=z;const A=`row-${i._id+1}`;i._id+=1;const M={id:A,type:"area_row",orientation:l?"horizontal":"vertical",areas:[{id:s,size:.5},{id:I,size:.5}]};if(i.layout[A]=M,a){const L=i.layout[a];if((L==null?void 0:L.type)==="area_row"){const N=L.areas.findIndex(_=>_.id===s);if(N!==-1){const _=L.areas[N].size??.5;L.areas[N]={id:A,size:_}}}}else i.rootId=A;r={newRowId:A,separatorIndex:1};return}i._id+=1;const c=i._id,d=`area-${c}`,m=`row-${c+1}`;if(i.areas[d]||i.layout[d]){console.error(`splitArea: ID conflict for new area ${d}`);return}const v=i.areas[s];if(i.areas[d]={id:d,type:(v==null?void 0:v.type)||u.type,state:{...v==null?void 0:v.state},spaceId:v==null?void 0:v.spaceId},i.layout[d]={type:"area",id:d},i.layout[m]){console.error(`splitArea: ID conflict for new row ${m}`);return}const S={id:m,type:"area_row",orientation:l?"horizontal":"vertical",areas:[{id:s,size:.5},{id:d,size:.5}]};i.layout[m]=S;let p=.5;if(a){const w=i.layout[a];if((w==null?void 0:w.type)==="area_row"){const y=w.areas.findIndex(I=>I.id===s);if(y!==-1)if(p=w.areas[y].size??.5,w.orientation===S.orientation){const I=S.areas.map(z=>({id:z.id,size:(z.size??.5)*p}));w.areas.splice(y,1,...I),r={newRowId:a,separatorIndex:y+1}}else w.areas[y]={id:m,size:p},r={newRowId:m,separatorIndex:1};else console.error(`splitArea Error: Area ${s} not in parent ${a}.`)}else console.error(`splitArea Error: Parent ${a} not found or not row.`)}else i.rootId===s?(i.rootId=m,r={newRowId:m,separatorIndex:1}):console.error(`splitArea Error: Area ${s} has no parent and is not root.`);i._id=c+2,i.lastSplitResultData=r;function k(w){if(!w)return;let y=w;for(;y;){const I=i.layout[y];if(Br(i,y),y=En(i.layout,i.rootId)[y],!(I&&!i.layout[I.id]))break}}function h(w,y=null){if(!w)return;const I=i.layout[w];if(!I||I.type!=="area_row")return;let z=!1;for(let A=0;A<I.areas.length;){const M=I.areas[A].id,L=i.layout[M];if(L&&L.type==="area_row"&&L.orientation===I.orientation){const N=L,_=I.areas[A].size??1/I.areas.length,j=N.areas.reduce((R,F)=>R+(F.size??0),0)||1,D=N.areas.map(R=>({id:R.id,size:(R.size??1/N.areas.length)*_/j}));I.areas.splice(A,1,...D.filter(R=>!I.areas.some(F=>F.id===R.id))),delete i.layout[M],z=!0}else A++}for(const A of I.areas)h(A.id,w);z&&h(w,y)}function f(){const w=new Set;function y(I){if(!I||w.has(I))return;w.add(I);const z=i.layout[I];if(z&&z.type==="area_row")for(const A of z.areas)y(A.id)}y(i.rootId);for(const I in i.layout){const z=i.layout[I];z&&z.type==="area_row"&&!w.has(I)&&delete i.layout[I]}}k(a),h(i.rootId),f(),o.lastUpdated=Date.now()}),r},setJoinPreview:n=>e(r=>{var i;const o=(i=r.screens[r.activeScreenId])==null?void 0:i.areas;o&&o.joinPreview!==n&&(o.joinPreview=n,r.lastUpdated=Date.now())}),joinOrMoveArea:n=>e(r=>{var h,f,g;const o=(h=r.screens[r.activeScreenId])==null?void 0:h.areas;if(!o)return;const{sourceAreaId:i,targetAreaId:s,direction:a}=n,{parentRow:l,sourceIndex:u,targetIndex:c}=tl(o.layout,i,s);if(!l||l.type!=="area_row"){o.errors=[`Could not find adjacent areas ${i}/${s} in the same row.`],o.joinPreview=null;return}const d=l.id,v=En(o.layout,o.rootId)[d],S=JSON.parse(JSON.stringify(l)),p=c>u?1:-1,k=u;try{const C=dg(S,k,p),{area:w,removedAreaId:y}=C,I=Ag(o.layout,y);if(I.add(y),I.forEach(z=>{delete o.areas[z],delete o.layout[z]}),w.id===d&&w.type==="area_row"){const z=w;if(o.layout[d]=z,z.areas){const A=z.areas.reduce((M,L)=>M+(L.size||0),0);if(A>0){const M=1/A;z.areas.forEach(L=>{L.size=(L.size||0)*M})}}((f=z.areas)==null?void 0:f.length)===1&&Br(o,d)}else if(delete o.layout[d],o.layout[w.id]||w.type!=="area_row"&&(o.layout[w.id]={type:"area",id:w.id}),v&&((g=o.layout[v])==null?void 0:g.type)==="area_row"){const z=o.layout[v],A=z.areas.findIndex(M=>M.id===d);if(A!==-1){const M=z.areas[A].size??.5;z.areas[A]={id:w.id,size:M}}else console.error(`[joinOrMoveArea] Cleanup Error: Row ${d} not found in grandparent ${v}.`)}else o.rootId===d&&(o.rootId=w.id);o.activeAreaId&&I.has(o.activeAreaId)&&(w.type==="area"?o.activeAreaId=w.id:o.activeAreaId=null),o.errors=[],o.joinPreview=null}catch(C){console.error("Error during joinOrMoveArea:",C),o.errors=[C instanceof Error?C.message:String(C)],o.joinPreview=null}r.lastUpdated=Date.now()}),getLastSplitResult:()=>{var r;const n=(r=t().screens[t().activeScreenId])==null?void 0:r.areas;return n?n.lastSplitResultData:null},getActiveArea:()=>{var o;const n=t(),r=(o=n.screens[n.activeScreenId])==null?void 0:o.areas;return r&&r.activeAreaId?r.areas[r.activeAreaId]:null},getAreaById:n=>{var i;const r=t(),o=(i=r.screens[r.activeScreenId])==null?void 0:i.areas;return o?o.areas[n]:void 0},getAllAreas:()=>{var o;const n=t(),r=(o=n.screens[n.activeScreenId])==null?void 0:o.areas;return r?r.areas:{}},getAreaErrors:()=>{var o;const n=t(),r=(o=n.screens[n.activeScreenId])==null?void 0:o.areas;return r?r.errors:[]},getLastLeadAreaId:()=>{var o;const n=t(),r=(o=n.screens[n.activeScreenId])==null?void 0:o.areas;return(r==null?void 0:r.lastLeadAreaId)||null},findParentRowAndIndices:tl}),Mg=(e,t)=>{const n=_g(e,t);return{screens:{1:rr()},activeScreenId:"1",nextScreenId:2,options:{allowStackMixedRoles:!0},lastUpdated:Date.now(),layout_preset:[],addScreen:()=>e(r=>{const o=r.nextScreenId.toString();r.screens[o]=rr();const i=`area-default-${o}-0`,s=r.screens[o].areas;s.areas[i]={id:i,type:"text-note",state:{content:"New Screen"}},s.layout={[i]:{type:"area",id:i}},s.rootId=i,s._id=1,s.activeAreaId=i,r.nextScreenId+=1,r.activeScreenId=o,r.lastUpdated=Date.now()}),switchScreen:r=>e(o=>{o.screens[r]&&o.activeScreenId!==r?(o.activeScreenId=r,o.lastUpdated=Date.now()):o.screens[r]||console.warn(`Attempted to switch to non-existent screen ID: ${r}`)}),removeScreen:r=>e(o=>{var a;if(Object.keys(o.screens).filter(l=>{var u;return!((u=o.screens[l])!=null&&u.isDetached)}).length<=1&&!((a=o.screens[r])!=null&&a.isDetached)){console.warn("Cannot remove the last classic screen");return}if(!o.screens[r]){console.warn(`Attempted to remove non-existent screen ID: ${r}`);return}if(delete o.screens[r],o.nextScreenId=Object.keys(o.screens).filter(l=>!l.startsWith("detached-")).reduce((l,u)=>Math.max(l,parseInt(u)),0)+1,o.activeScreenId===r){const l=Object.keys(o.screens).filter(u=>{var c;return!((c=o.screens[u])!=null&&c.isDetached)}).sort((u,c)=>parseInt(u)-parseInt(c));o.activeScreenId=l[0]||Object.keys(o.screens)[0]||"1"}const s=new URL(window.location.href);s.searchParams.get("screen")===r&&(s.searchParams.set("screen",o.activeScreenId),window.history.replaceState({},"",s.toString())),o.lastUpdated=Date.now()}),duplicateScreen:r=>e(o=>{if(!o.screens[r]){console.warn(`Attempted to duplicate non-existent screen ID: ${r}`);return}const i=o.nextScreenId.toString(),s=o.screens[r];o.screens[i]=JSON.parse(JSON.stringify(s)),o.nextScreenId+=1,o.activeScreenId=i,o.lastUpdated=Date.now()}),detachArea:r=>e(o=>{const i=o.getAreaById(r);if(!i){console.warn(`Area ${r} not found`);return}const s=`detached-${o.nextScreenId}`;o.nextScreenId+=1,o.screens[s]={...rr(),areas:{...rr().areas},isDetached:!0,detachedFromAreaId:r};const a=o.screens[s].areas;a.areas[r]={...i},a.layout={[r]:{type:"area",id:r}},a.rootId=r,a.activeAreaId=r;const l=o.screens[o.activeScreenId];if(l){delete l.areas.areas[r];for(const c in l.areas.layout){const d=l.areas.layout[c];d.type==="area_row"&&(d.areas=d.areas.filter(m=>m.id!==r))}delete l.areas.layout[r],l.areas.rootId===r&&(l.areas.rootId=null);for(const c in l.areas.layout){const d=l.areas.layout[c];d.type==="area_row"&&d.areas.length===1&&Br(l.areas,c)}}const u=["width=800","height=600","menubar=no","toolbar=no","location=no","status=no","scrollbars=yes","resizable=yes"].join(",");window.open(`?screen=${s}`,s,u),o.lastUpdated=Date.now()}),addArea:n.addArea,removeArea:n.removeArea,setActiveArea:n.setActiveArea,updateArea:n.updateArea,updateLayout:n.updateLayout,setAreaToOpen:n.setAreaToOpen,updateAreaToOpenPosition:n.updateAreaToOpenPosition,finalizeAreaPlacement:n.finalizeAreaPlacement,cleanupTemporaryStates:n.cleanupTemporaryStates,setViewports:n.setViewports,setRowSizes:n.setRowSizes,splitArea:n.splitArea,setJoinPreview:n.setJoinPreview,joinOrMoveArea:n.joinOrMoveArea,getLastSplitResult:n.getLastSplitResult,getActiveArea:n.getActiveArea,getAreaById:n.getAreaById,getAllAreas:n.getAllAreas,getAreaErrors:n.getAreaErrors,findParentRowAndIndices:tl}},zg=Math.random().toString(36).slice(2),P=su()(uu(jp(Mp(Mg,{name:"KarmycRootStore"}),{name:"karmycRootState",partialize:e=>({screens:e.screens,activeScreenId:e.activeScreenId,nextScreenId:e.nextScreenId,lastUpdated:e.lastUpdated,options:e.options,layout_preset:e.layout_preset}),storage:zp(()=>localStorage),skipHydration:!1,onRehydrateStorage:()=>e=>{e||(console.warn("[KarmycStore] État invalide après hydratation, réinitialisation..."),P.setState({screens:{1:rr()},activeScreenId:"1",nextScreenId:2,lastUpdated:Date.now(),options:{allowStackMixedRoles:!0}}))}}))),jg=(e={})=>{const t=P.getState(),n={...t.options,...e};!t.screens||Object.keys(t.screens).length===0?P.setState({screens:{1:rr()},activeScreenId:"1",nextScreenId:2,lastUpdated:Date.now(),options:n}):P.setState({options:n})};if(typeof window<"u"){let e=null;const t=50;window.addEventListener("storage",n=>{var r,o,i;if(n.key==="karmycRootState"){const s=localStorage.getItem("karmycRootState");if(!s)return;const a=JSON.parse(s);if(((r=a==null?void 0:a.state)==null?void 0:r.windowId)===zg)return;const l=P.getState(),u=((o=a==null?void 0:a.state)==null?void 0:o.screens)||{},c=((i=a==null?void 0:a.state)==null?void 0:i.lastUpdated)||0,d=l.lastUpdated||0,m=Object.keys(u).some(v=>{const S=u[v],p=l.screens[v];return!p||JSON.stringify(S)!==JSON.stringify(p)});e&&clearTimeout(e),e=setTimeout(()=>{m&&c>d&&P.setState(v=>({...v,screens:u,lastUpdated:c})),e=null},t)}})}function Tg(e={}){const t=E.useMemo(()=>({plugins:e.plugins??[],validators:e.validators??[],initialAreas:e.initialAreas??[],keyboardShortcutsEnabled:e.keyboardShortcutsEnabled??!0,builtInLayouts:e.builtInLayouts??[],initialLayout:e.initialLayout??"default",options:{resizableAreas:e.resizableAreas??!0,manageableAreas:e.manageableAreas??!0,multiScreen:e.multiScreen??!0,builtInLayouts:e.builtInLayouts??[]}}),[e.plugins,e.validators,e.initialAreas,e.keyboardShortcutsEnabled,e.builtInLayouts,e.initialLayout,e.resizableAreas,e.manageableAreas,e.multiScreen]);return E.useEffect(()=>{const n={areas:{types:[],layout:{}},actions:{plugins:t.plugins,validators:t.validators},contextMenu:{actions:[]}};return By.initialize(n),P.setState(r=>({...r,options:t.options})),()=>{}},[t]),t}const Pg=["area/addArea","area/removeArea","area/updateArea","area/moveArea","area/resizeArea","composition/update","composition/addElement","composition/removeElement","composition/updateElement","project/update","draw/addLine","draw/updateLine","draw/removeLine","draw/updateStrokeWidth","draw/updateColor","draw/updateZoom","draw/updatePan","draw/clearCanvas"],Ng={id:"history",priority:vp.HIGH,actionTypes:Pg,handler:e=>{const{type:t,payload:n}=e;nl(t,n)}};function nl(e,t){switch(e){case"area/addArea":return`Ajout d'une zone ${t.type||""}`;case"area/removeArea":return"Suppression d'une zone";case"area/updateArea":return"Mise à jour d'une zone";case"area/moveArea":return"Déplacement d'une zone";case"area/resizeArea":return"Redimensionnement d'une zone";case"composition/addElement":return`Ajout d'un élément ${t.elementType||""}`;case"composition/removeElement":return"Suppression d'un élément";case"composition/updateElement":return"Mise à jour d'un élément";case"draw/addLine":return"Ajout d'une ligne";case"draw/updateLine":return"Modification d'une ligne";case"draw/removeLine":return"Suppression d'une ligne";case"draw/updateStrokeWidth":return`Modification de l'épaisseur du trait : ${t.oldValue} → ${t.newValue}`;case"draw/updateColor":return`Modification de la couleur : ${t.oldValue} → ${t.newValue}`;case"draw/clearCanvas":return"Effacement du dessin";default:return`Action ${e}`}}function Rg(){const{addArea:e,removeArea:t,setActiveArea:n,updateArea:r,getActiveArea:o,getAreaById:i,getAllAreas:s,getAreaErrors:a}=P(),l=E.useCallback((k,h,f)=>{const g={id:"",type:k,state:h,position:f};if((W._roleMap||{})[k]===oe.LEAD){const w=B.getState().spaces,y=Object.keys(w);if(y.length>0){const I=B.getState().activeSpaceId;g.spaceId=I||y[0]}else{const I=B.getState().addSpace({name:`Space for ${k}`,sharedState:{}});I&&(g.spaceId=I)}}return e(g)},[e]),u=E.useCallback(k=>{t(k)},[t]),c=E.useCallback(k=>{n(k)},[n]),d=E.useCallback((k,h)=>{r({id:k,...h})},[r]),m=E.useCallback(()=>o(),[o]),v=E.useCallback(k=>i(k),[i]),S=E.useCallback(()=>s(),[s]),p=E.useCallback(()=>a(),[a]);return{createArea:l,removeArea:u,setActive:c,update:d,getActive:m,getById:v,getAll:S,getErrors:p}}const Dg=({options:e={}})=>{const t=E.useRef(!1),{createArea:n}=Rg();return E.useEffect(()=>{var d;if(t.current)return;t.current=!0;const r=[Ng],o=e.plugins||[],i=[...r,...o],s=[];i.forEach(m=>{Q.registerPlugin(m),s.push(m.id)}),e.validators&&e.validators.forEach(({actionType:m,validator:v})=>{Q.registerValidator(m,v)});const a=P.getState(),l=a.activeScreenId,u=(d=a.screens[l])==null?void 0:d.areas;if(!((u==null?void 0:u.rootId)||Object.keys((u==null?void 0:u.areas)||{}).length>0)){const m=e.initialAreas||[],v=[];if(m.forEach((S,p)=>{let k;try{k=n(S.type,S.state)}catch(h){console.error(`[KarmycInitializer] Error calling createArea for area ${p+1}:`,h),k=void 0}k?v.push(k):console.warn(`[KarmycInitializer] Failed to create area or received empty/undefined ID for area ${p+1}.`)}),v.length>0){const S={id:"root",type:"area_row",orientation:"horizontal",areas:v.map(p=>({id:p,size:1/v.length}))};P.setState(p=>{var h;if(!((h=p.screens[p.activeScreenId])!=null&&h.areas))return console.error(`[KarmycInitializer] Active screen areas ${p.activeScreenId} not found during layout update.`),p;const k={...p.screens[p.activeScreenId].areas.layout||{},root:S,...v.reduce((f,g)=>(f[g]||(f[g]={type:"area",id:g}),f),{})};return p.screens[p.activeScreenId].areas.rootId="root",p.screens[p.activeScreenId].areas.layout=k,p},!1,"KarmycInitializer/setDefaultLayout")}else console.warn("[KarmycInitializer] No areas were successfully created (newAreaIds is empty). Skipping layout creation.")}return()=>{s.forEach(m=>{Q.unregisterPlugin(m)})}},[]),null},Fr=new Map,Zs=new Map;let Lg=1;const Ir={registerShortcuts:(e,t)=>{Fr.set(e,t)},getShortcuts:e=>Fr.get(e)||[],clearShortcuts:e=>{Fr.delete(e)},unregisterShortcuts:e=>{Fr.delete(e)},register:e=>{const t=`kbd-${Lg++}`;return Zs.set(t,e),t},remove:e=>Zs.delete(e),getAllShortcuts:()=>{const e=[];for(const t of Fr.values())e.push(...t);for(const t of Zs.values())e.push(t);return e}};function Og(e,t){const n=Ir.getAllShortcuts();for(const o of n)if(o.key===e){const i=new Set(o.modifierKeys||[]);let s=!0;for(const a of i)if(!t.has(a)){s=!1;break}if(s){const a=new Set(o.optionalModifierKeys||[]);for(const l of t)if(!i.has(l)&&!a.has(l)){s=!1;break}}if(s)return!0}const r=[{key:"R",modifiers:["Control"]},{key:"S",modifiers:["Control"]},{key:"P",modifiers:["Control"]},{key:"F",modifiers:["Control"]},{key:"L",modifiers:["Control"]},{key:"U",modifiers:["Control"]},{key:"I",modifiers:["Control"]},{key:"J",modifiers:["Control"]},{key:"K",modifiers:["Control"]},{key:"N",modifiers:["Control"]},{key:"T",modifiers:["Control"]},{key:"W",modifiers:["Control"]}];for(const o of r)if(e===o.key){const i=new Set(o.modifiers);let s=!0;for(const a of i)if(!t.has(a)){s=!1;break}if(s&&t.size===i.size)return!0}return!1}const $g=({children:e,options:t={}})=>{const n=E.useRef(!0),r=E.useRef(!1),o=E.useRef(null),i=E.useRef(0),s=E.useRef([]);E.useEffect(()=>{jg(t)},[t]),E.useEffect(()=>{document.addEventListener("contextmenu",u=>u.preventDefault(),!1)},[]),E.useEffect(()=>{const c=new URLSearchParams(window.location.search).get("screen");if(c)if(P.getState().screens[c])P.setState({activeScreenId:c}),o.current=c;else{console.warn(`[KarmycProvider] Screen ID '${c}' from URL not found in store.`);const v=new URL(window.location.href);v.searchParams.delete("screen"),window.history.replaceState({},"",v.toString())}const d=setTimeout(()=>{n.current=!1},0);return()=>clearTimeout(d)},[]);const a=P(u=>u.activeScreenId),l=P(u=>u.screens);return E.useEffect(()=>{if(n.current||r.current)return;const u=P.getState(),c=Object.keys(u.screens).length;if(c!==i.current){const v=Object.keys(u.screens).sort((p,k)=>parseInt(p)-parseInt(k));if(s.current.length===0){s.current=v,i.current=c;return}const S=s.current.find(p=>!v.includes(p));if(S){const p=s.current.indexOf(S),k=s.current.indexOf(a);if(k>p){const h=k-1,f=v[h];f&&(P.setState({activeScreenId:f}),o.current=f)}}s.current=v,i.current=c;return}if(!u.screens[a]){console.warn(`[KarmycProvider] Invalid active screen ID '${a}', resetting to '1'`),P.setState({activeScreenId:"1"});return}if(o.current===a)return;const d=new URL(window.location.href),m=d.searchParams.get("screen");a!==m&&(r.current=!0,a?d.searchParams.set("screen",a):d.searchParams.delete("screen"),window.history.replaceState({},"",d.toString()),r.current=!1,o.current=a)},[a,l]),E.useEffect(()=>{const u=c=>{var h,f;if(c.key==="Control"||c.key==="Alt"||c.key==="Shift"||c.key==="Meta")return;const d=new Set;c.ctrlKey&&d.add("Control"),c.altKey&&d.add("Alt"),c.shiftKey&&d.add("Shift"),c.metaKey&&d.add("Command");const m=P.getState(),v=(h=m.screens[m.activeScreenId])==null?void 0:h.areas.activeAreaId,S=v?(f=m.getAreaById(v))==null?void 0:f.type:null,p=Ir.getAllShortcuts().filter(g=>g.isGlobal);for(const g of p)if(g.key.toUpperCase()===c.key.toUpperCase()){const C=new Set(g.modifierKeys||[]);let w=!0;for(const y of C)if(!d.has(y)){w=!1;break}if(w){const y=new Set(g.optionalModifierKeys||[]);for(const I of d)if(!C.has(I)&&!y.has(I)){w=!1;break}}if(w){c.preventDefault(),c.stopPropagation();try{g.fn(v||"",{})}catch(y){console.error(`Error executing global shortcut ${g.name}:`,y)}return}}if(!v||!S)return;const k=Ir.getShortcuts(S);for(const g of k)if(!g.isGlobal&&g.key.toUpperCase()===c.key.toUpperCase()){const C=new Set(g.modifierKeys||[]);let w=!0;for(const y of C)if(!d.has(y)){w=!1;break}if(w){const y=new Set(g.optionalModifierKeys||[]);for(const I of d)if(!C.has(I)&&!y.has(I)){w=!1;break}}if(w){c.preventDefault(),c.stopPropagation();try{g.fn(v,{})}catch(y){console.error(`Error executing area shortcut ${g.name}:`,y)}return}}Og(c.key,d)&&(c.preventDefault(),c.stopPropagation())};return window.addEventListener("keydown",u,!0),()=>window.removeEventListener("keydown",u,!0)},[]),x.jsxs(x.Fragment,{children:[x.jsx(Dg,{options:t}),e]})},Vc={isVisible:!1,position:{x:0,y:0},items:[],errors:[],targetId:void 0,metadata:void 0,menuClassName:"menu",customContextMenuContent:null,menuType:void 0},Ve=su()(uu(e=>({...Vc,openContextMenu:t=>e(n=>{const{position:r,items:o,targetId:i,metadata:s}=t,a=t.menuClassName,l=Gs(r);if(!l.isValid){console.warn("Position validation failed:",l.errors),n.errors=l.errors;return}const c=o.map(d=>$c(d)).filter(d=>!d.isValid);if(c.length>0){console.warn("Items validation failed:",c),n.errors=c.flatMap(d=>d.errors||["Unknown item validation error"]);return}n.isVisible=!0,n.position=r,n.items=o,n.targetId=i,n.metadata=s,n.menuClassName=a||n.menuClassName||"menu",n.errors=[],n.menuType="default"}),openCustomContextMenu:t=>e(n=>{const{position:r,targetId:o,metadata:i,component:s}=t,a=t.menuClassName;if(!r){console.warn("Aucune position fournie à openCustomContextMenu"),n.errors=["Aucune position fournie au menu contextuel"];return}const l=Gs(r);if(!l.isValid){console.warn("Position validation failed:",l.errors),n.errors=l.errors;return}n.isVisible=!0,n.position=r,n.targetId=o,n.metadata=i,n.errors=[],n.menuClassName=a+" menu",n.customContextMenuContent=s,n.menuType="custom"}),closeContextMenu:()=>e(t=>{Object.assign(t,Vc),t.menuType=void 0}),updateContextMenuPosition:t=>e(n=>{const r=Gs(t);if(!r.isValid){n.errors=r.errors;return}n.position=t,n.errors=[]}),updateContextMenuItems:t=>e(n=>{const o=t.map(i=>$c(i)).filter(i=>!i.isValid);if(o.length>0){n.errors=o.flatMap(i=>i.errors||["Unknown item validation error"]);return}n.items=t,n.errors=[]}),clearErrors:()=>e(t=>{t.errors=[]})}))),cu=()=>{const e=Ve(s=>s.isVisible),t=Ve(s=>s.position),n=Ve(s=>s.openContextMenu),r=Ve(s=>s.closeContextMenu),o=E.useCallback(s=>{n(s)},[n]),i=E.useCallback(()=>{r()},[r]);return{isVisible:e,position:t,open:o,close:i}};function Fe(e,t,n){E.useEffect(()=>(Q.registerActionHandler(e,t,n),()=>{Q.unregisterActionHandler(e)}),[e,t,n])}/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fg=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),bg=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),Hc=e=>{const t=bg(e);return t.charAt(0).toUpperCase()+t.slice(1)},Np=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),Ug=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=E.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:i,iconNode:s,...a},l)=>E.createElement("svg",{ref:l,...Vg,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Np("lucide",o),...!i&&!Ug(a)&&{"aria-hidden":"true"},...a},[...s.map(([u,c])=>E.createElement(u,c)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=(e,t)=>{const n=E.forwardRef(({className:r,...o},i)=>E.createElement(Hg,{ref:i,iconNode:t,className:Np(`lucide-${Fg(Hc(e))}`,`lucide-${e}`,r),...o}));return n.displayName=Hc(e),n};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bg=[["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}],["path",{d:"M10 4v4",key:"pp8u80"}],["path",{d:"M2 8h20",key:"d11cs7"}],["path",{d:"M6 4v4",key:"1svtjw"}]],Wg=J("app-window",Bg);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=[["path",{d:"M15 6v6h4l-7 7-7-7h4V6h6z",key:"1thax2"}]],Qg=J("arrow-big-down",Kg);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yg=[["path",{d:"m16 22-1-4",key:"1ow2iv"}],["path",{d:"M19 13.99a1 1 0 0 0 1-1V12a2 2 0 0 0-2-2h-3a1 1 0 0 1-1-1V4a2 2 0 0 0-4 0v5a1 1 0 0 1-1 1H6a2 2 0 0 0-2 2v.99a1 1 0 0 0 1 1",key:"iw8jdu"}],["path",{d:"M5 14h14l1.973 6.767A1 1 0 0 1 20 22H4a1 1 0 0 1-.973-1.233z",key:"1soew8"}],["path",{d:"m8 22 1-4",key:"s3unb"}]],Gg=J("brush-cleaning",Yg);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"9",x2:"15",y1:"15",y2:"9",key:"1dfufj"}]],du=J("circle-slash",Xg);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Zg=J("clock",Jg);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Rp=J("copy",qg);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Bc=J("ellipsis-vertical",ev);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Wc=J("ellipsis",tv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],rv=J("external-link",nv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],Dp=J("file-down",ov);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]],Lp=J("file-up",iv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=[["path",{d:"m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H18a2 2 0 0 1 2 2v2",key:"1nmvlm"}],["circle",{cx:"14",cy:"15",r:"1",key:"1gm4qj"}]],av=J("folder-open-dot",sv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Kc=J("folder-open",lv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],cv=J("history",uv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],fv=J("keyboard",dv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],hv=J("link",pv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],yv=J("lock-open",mv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],vv=J("lock",gv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],wv=J("maximize-2",Sv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],kv=J("minimize-2",xv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Op=J("palette",Iv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],Ev=J("panels-top-left",Cv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],fu=J("plus",Av);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=[["path",{d:"M20.34 17.52a10 10 0 1 0-2.82 2.82",key:"fydyku"}],["circle",{cx:"19",cy:"19",r:"2",key:"17f5cg"}],["path",{d:"m13.41 13.41 4.18 4.18",key:"1gqbwc"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Mv=J("radius",_v);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]],jv=J("redo",zv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Pv=J("rotate-ccw",Tv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Rv=J("rotate-cw",Nv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],$p=J("square-pen",Dv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Ov=J("trash-2",Lv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],Fv=J("trash",$v);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],Uv=J("undo",bv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Fp=J("x",Vv),Hv=()=>{const e=P(u=>u.screens),t=P(u=>u.activeScreenId),n=P(u=>u.switchScreen),r=P(u=>u.addScreen),o=P(u=>u.removeScreen),i=P(u=>u.duplicateScreen),{open:s}=cu();Fe("open-new-window",u=>{u!=null&&u.screenId&&window.open(`?screen=${u.screenId}`,"_blank","noopener,noreferrer")}),Fe("open-new-tab",u=>{u!=null&&u.screenId&&window.open(`?screen=${u.screenId}`,"_blank")}),Fe("delete-screen",u=>{u!=null&&u.screenId&&(Object.keys(e).length>1?o(u.screenId):console.warn("Impossible de supprimer le dernier écran"))}),Fe("duplicate-screen",u=>{u!=null&&u.screenId&&i(u.screenId)}),Fe("add-screen",()=>{r()});const a=Object.keys(e).filter(u=>{var c;return!((c=e[u])!=null&&c.isDetached)}).sort((u,c)=>parseInt(u)-parseInt(c)),l=(u,c)=>{u.preventDefault(),s({position:{x:u.clientX,y:u.clientY},menuClassName:"screen-switcher-menu",items:[{id:"add",label:"Add",icon:fu,actionId:"add-screen",metadata:{}},{id:"duplicate",label:"Duplicate",icon:Rp,actionId:"duplicate-screen",metadata:{screenId:c}},{id:"open-new-window",label:"Open in new window",icon:Wg,actionId:"open-new-window",metadata:{screenId:c}},{id:"open-new-tab",label:"Open in new tab",icon:rv,actionId:"open-new-tab",metadata:{screenId:c}},{id:"delete",label:"Delete",icon:Fv,actionId:"delete-screen",metadata:{screenId:c},disabled:Object.keys(e).length<=1}],targetId:c})};return x.jsx("div",{style:{display:"flex",alignItems:"center",gap:"5px",padding:"0 10px"},children:a.map((u,c)=>x.jsx("button",{onClick:()=>n(u),onContextMenu:d=>l(d,u),style:{padding:"2px 8px",border:"1px solid #555",borderRadius:"3px",background:t===u?"#444":"#2a2a2a",color:t===u?"#eee":"#aaa",cursor:"pointer",minWidth:"25px",textAlign:"center"},disabled:t===u,children:c+1},u))})},xn={},rl=new Set;function Bv(){rl.forEach(e=>e())}function qe(e,t){const n=`${e}:${t}`,r=E.useCallback((i,s,a={})=>{const{order:l=0,alignment:u="left",width:c,allowedLayerTypes:d,callback:m}=a;xn[n]?xn[n]=xn[n].filter(S=>!(S.identifier.name===s.name&&S.identifier.type===s.type)):xn[n]=[];const v=Math.random().toString(36).substr(2,9);return xn[n].push({component:i,order:l,alignment:u,width:c,identifier:s,allowedLayerTypes:d,callback:m}),xn[n].sort((S,p)=>S.order-p.order),Bv(),v},[n]),o=E.useCallback(()=>xn[n]||[],[n]);return{registerComponent:r,getComponents:o}}function Wv(){const[,e]=rt.useReducer(t=>t+1,0);E.useEffect(()=>(rl.add(e),()=>{rl.delete(e)}),[])}const ol=({areaId:e,areaType:t="app",areaState:n={},children:r,viewport:o={top:0,left:0,width:"100%",height:"100%"}})=>{const i=e||t;Wv();const{getComponents:s}=qe(i,"top-outer"),{getComponents:a}=qe(i,"bottom-outer"),{getComponents:l}=qe(i,"top-inner"),{getComponents:u}=qe(i,"bottom-inner"),c=s(),d=a(),m=l(),v=u(),S=P(M=>M.activeScreenId),p=P(M=>{var L;return(L=M.screens[S])==null?void 0:L.isDetached})||!1,k=P(M=>M.options.multiScreen)||!1,h=P(M=>{var N;const L=(N=M.screens[M.activeScreenId])==null?void 0:N.areas;if(L)return e?Object.values(L.areas).find(_=>_.id===e):void 0}),f=h==null?void 0:h.spaceId,g=E.useCallback(()=>{f&&B.getState().setActiveSpace(f)},[f]),C=c.length>0,w=d.length>0,y=C?gt:0,I=w?gt:0,z=(h==null?void 0:h.enableFullscreen)??!1,A=(M,L)=>{const N=M.filter(D=>D.alignment==="left"),_=M.filter(D=>D.alignment==="center"),j=M.filter(D=>D.alignment==="right");return N.length===0&&_.length===0&&j.length===0?null:L.includes("inner")||!p&&L.includes("outer")?x.jsxs("div",{className:`tools-bar tools-bar-${L}`,style:{height:gt,minHeight:gt},onFocusCapture:g,tabIndex:0,children:[x.jsx("div",{className:"tools-bar-section tools-bar-section--left",style:{display:N.length>0?"flex":"none"},children:N.map((D,R)=>{const F=D.component;return x.jsx(F,{areaState:n,onFocusCapture:g},`${D.identifier.type}-${D.identifier.name}-${R}`)})}),x.jsx("div",{className:"tools-bar-section tools-bar-section--center",style:{display:_.length>0?"flex":"none"},children:_.map((D,R)=>{const F=D.component;return x.jsx(F,{areaState:n,onFocusCapture:g},`${D.identifier.type}-${D.identifier.name}-${R}`)})}),x.jsxs("div",{className:"tools-bar-section tools-bar-section--right",style:{display:j.length>0?"flex":"none"},children:[j.map((D,R)=>{const F=D.component;return x.jsx(F,{areaState:n,onFocusCapture:g},`${D.identifier.type}-${D.identifier.name}-${R}`)}),k&&t==="app"&&L==="bottom-outer"&&x.jsx(Hv,{})]})]}):null};return x.jsxs("div",{className:"tools-container",style:{top:o.top,left:o.left,height:p||z?"100%":`calc(${o.height})`},onFocusCapture:g,tabIndex:0,children:[A(c,"top-outer"),x.jsxs("div",{className:"tools-content",style:{height:p||z?`calc(100% - ${I}px)`:`calc(${o==null?void 0:o.height}${typeof(o==null?void 0:o.height)=="string"?"":"px"} - ${y}px - ${I}px)`},children:[A(m,"top-inner"),r,A(v,"bottom-inner")]}),A(d,"bottom-outer")]})},Qc=e=>Symbol.iterator in e,Yc=e=>"entries"in e,Gc=(e,t)=>{const n=e instanceof Map?e:new Map(e.entries()),r=t instanceof Map?t:new Map(t.entries());if(n.size!==r.size)return!1;for(const[o,i]of n)if(!Object.is(i,r.get(o)))return!1;return!0},Kv=(e,t)=>{const n=e[Symbol.iterator](),r=t[Symbol.iterator]();let o=n.next(),i=r.next();for(;!o.done&&!i.done;){if(!Object.is(o.value,i.value))return!1;o=n.next(),i=r.next()}return!!o.done&&!!i.done};function or(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null||Object.getPrototypeOf(e)!==Object.getPrototypeOf(t)?!1:Qc(e)&&Qc(t)?Yc(e)&&Yc(t)?Gc(e,t):Kv(e,t):Gc({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)})}function Qv(e){const t=rt.useRef(void 0);return n=>{const r=e(n);return or(t.current,r)?t.current:t.current=r}}var bp={exports:{}},Up={},Vp={exports:{}},Hp={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cr=E;function Yv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Gv=typeof Object.is=="function"?Object.is:Yv,Xv=Cr.useState,Jv=Cr.useEffect,Zv=Cr.useLayoutEffect,qv=Cr.useDebugValue;function e0(e,t){var n=t(),r=Xv({inst:{value:n,getSnapshot:t}}),o=r[0].inst,i=r[1];return Zv(function(){o.value=n,o.getSnapshot=t,qs(o)&&i({inst:o})},[e,n,t]),Jv(function(){return qs(o)&&i({inst:o}),e(function(){qs(o)&&i({inst:o})})},[e]),qv(n),n}function qs(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Gv(e,n)}catch{return!0}}function t0(e,t){return t()}var n0=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t0:e0;Hp.useSyncExternalStore=Cr.useSyncExternalStore!==void 0?Cr.useSyncExternalStore:n0;Vp.exports=Hp;var r0=Vp.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fs=E,o0=r0;function i0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var s0=typeof Object.is=="function"?Object.is:i0,a0=o0.useSyncExternalStore,l0=fs.useRef,u0=fs.useEffect,c0=fs.useMemo,d0=fs.useDebugValue;Up.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var i=l0(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=c0(function(){function l(v){if(!u){if(u=!0,c=v,v=r(v),o!==void 0&&s.hasValue){var S=s.value;if(o(S,v))return d=S}return d=v}if(S=d,s0(c,v))return S;var p=r(v);return o!==void 0&&o(S,p)?(c=v,S):(c=v,d=p)}var u=!1,c,d,m=n===void 0?null:n;return[function(){return l(t())},m===null?void 0:function(){return l(m())}]},[t,n,r,o]);var a=a0(e,i[0],i[1]);return u0(function(){s.hasValue=!0,s.value=a},[a]),d0(a),a};bp.exports=Up;var f0=bp.exports;const p0=rd(f0),{useSyncExternalStoreWithSelector:h0}=p0,m0=e=>e;function Wr(e,t=m0,n){const r=h0(e.subscribe,e.getState,e.getInitialState,t,n);return rt.useDebugValue(r),r}function bn(){const e=Wr(B,y=>y.spaces,or),t=Wr(B,y=>y.activeSpaceId,or),n=Wr(B,y=>y.openSpaceIds,or),r=Wr(B,y=>y.pilotMode,or),o=B(y=>y.addSpace),i=B(y=>y.removeSpace),s=B(y=>y.setActiveSpace),a=B(y=>y.openSpace),l=B(y=>y.closeSpace),u=B(y=>y.updateSpace),c=B(y=>y.updateSpaceGenericSharedState),d=E.useMemo(()=>Object.entries(e).map(([y,I])=>({id:y,name:I.name})),[e]),m=E.useMemo(()=>n.map(y=>e[y]).filter(y=>y!==void 0),[e,n]),v=E.useCallback((y,I={})=>o({name:y,sharedState:I}),[o]),S=E.useCallback(y=>{i(y)},[i]),p=E.useCallback(y=>{s(y)},[s]),k=E.useCallback(y=>{a(y)},[a]),h=E.useCallback(y=>{l(y)},[l]),f=E.useCallback((y,I)=>{c({spaceId:y,changes:I})},[c]),g=E.useCallback((y,I)=>{u({id:y,...I})},[u]),C=E.useCallback(y=>B.getState().spaces[y],[]),w=E.useCallback(y=>{B.getState().setPilotMode(y)},[]);return{spaceList:d,activeSpaceId:t,openSpaces:m,openSpaceIds:n,pilotMode:r,createSpace:v,deleteSpace:S,setActive:p,setPilotMode:w,openSpace:k,closeSpace:h,updateSharedState:f,updateSpaceProperties:g,getSpaceById:C}}const y0=()=>{const{open:e}=cu(),[t,n]=E.useState(!1),{spaceList:r,activeSpaceId:o,openSpaces:i,createSpace:s,setActive:a,openSpace:l,closeSpace:u,updateSpaceProperties:c}=bn(),d=E.useCallback(()=>{const p=r.find(C=>C.id===o);if(!p)return;const k=JSON.stringify(p,null,2),h="data:application/json;charset=utf-8,"+encodeURIComponent(k),f=`${p.name}.json`,g=document.createElement("a");g.setAttribute("href",h),g.setAttribute("download",f),g.click()},[r,o]),m=E.useCallback(()=>{const p=document.createElement("input");p.type="file",p.accept=".json",p.onchange=k=>{var g;const h=(g=k.target.files)==null?void 0:g[0];if(!h)return;const f=new FileReader;f.onload=C=>{var w;try{const y=JSON.parse((w=C.target)==null?void 0:w.result),I=s(y.name,y.sharedState);I&&a(I)}catch(y){console.error("Error importing space:",y)}},f.readAsText(h)},p.click()},[s,a]),v=E.useCallback(()=>{const p=r.find(h=>h.id===o);if(!p||!o)return;const k=prompt("Nouveau nom du space:",p.name);k&&k!==p.name&&c(o,{name:k})},[r,o,c]);E.useEffect(()=>(Q.registerActionHandler("space.new",()=>{const p=s("Nouveau Space");p&&a(p)}),Q.registerActionHandler("space.import",m),Q.registerActionHandler("space.export",d),Q.registerActionHandler("space.rename",v),Q.registerActionHandler("space.close",p=>{const k=p.spaceId||o;k&&u(k)}),Q.registerActionHandler("space.open",p=>{p.spaceId&&(l(p.spaceId),a(p.spaceId))}),()=>{Q.unregisterActionHandler("space.new"),Q.unregisterActionHandler("space.import"),Q.unregisterActionHandler("space.export"),Q.unregisterActionHandler("space.rename"),Q.unregisterActionHandler("space.close"),Q.unregisterActionHandler("space.open")}),[s,m,d,v,u,l,a,o]);const S=E.useCallback(p=>{p.preventDefault();const k=r.slice(-10).reverse(),h=!!o,f=[{id:"new",label:"Nouveau Space",actionId:"space.new",icon:fu},{id:"import",label:"Importer Space",actionId:"space.import",icon:Lp},{id:"export",label:"Exporter Space",actionId:"space.export",icon:Dp,disabled:!h},{id:"rename",label:"Renommer Space",actionId:"space.rename",icon:$p,disabled:!h},{id:"close",label:"Fermer Space Actif",actionId:"space.close",icon:Fp,disabled:!h}];i.length>0&&f.push({id:"separator1",label:"---",actionId:"area.separator"},{id:"open",label:"Espaces Ouverts",actionId:"space.open",icon:Kc,children:i.map(g=>({id:`open-${g.id}`,label:g.name,actionId:"space.open",metadata:{spaceId:g.id}}))}),k.length>0&&f.push({id:"separator2",label:"---",actionId:"area.separator"},{id:"recent",label:"Spaces Récents",actionId:"space.recent",icon:cv,children:k.map(g=>({id:`recent-${g.id}`,label:g.name,actionId:"space.open",metadata:{spaceId:g.id}}))}),e({position:{x:p.clientX,y:p.clientY},items:f,menuClassName:"space-context-menu"})},[e,r,o,i]);return x.jsxs(x.Fragment,{children:[x.jsx("style",{children:`
                    .space-context-menu {
                        z-index: 9999 !important;
                    }
                `}),x.jsx("div",{onContextMenu:S,onClick:S,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),style:{cursor:"pointer",padding:"8px",color:"white",display:"flex",alignItems:"center",gap:"8px",userSelect:"none",backgroundColor:t?"rgba(255, 255, 255, 0.1)":"transparent",transition:"background-color 0.2s ease"},children:x.jsx(Kc,{size:26})})]})},Bp=e=>!!e&&e[0]==="o",il=Sr.unstable_batchedUpdates,Co=(e,t)=>e===!0||!!(e&&e[t]),St=(e,t)=>typeof e=="function"?e(t):e,ps=(e,t)=>(t&&Object.keys(t).forEach(n=>{const r=e[n],o=t[n];typeof o=="function"&&r?e[n]=(...i)=>{o(...i),r(...i)}:e[n]=o}),e),g0=e=>{if(typeof e!="string")return{top:0,right:0,bottom:0,left:0};const t=e.trim().split(/\s+/,4).map(parseFloat),n=isNaN(t[0])?0:t[0],r=isNaN(t[1])?n:t[1];return{top:n,right:r,bottom:isNaN(t[2])?n:t[2],left:isNaN(t[3])?r:t[3]}},ea=e=>{for(;e;){if(e=e.parentNode,!e||e===document.body||!e.parentNode)return;const{overflow:t,overflowX:n,overflowY:r}=getComputedStyle(e);if(/auto|scroll|overlay|hidden/.test(t+r+n))return e}};function pu(e,t){return{"aria-disabled":e||void 0,tabIndex:t?0:-1}}function Xc(e,t){for(let n=0;n<e.length;n++)if(e[n]===t)return n;return-1}const Er=({block:e,element:t,modifiers:n,className:r})=>E.useMemo(()=>{const o=t?`${e}__${t}`:e;let i=o;n&&Object.keys(n).forEach(a=>{const l=n[a];l&&(i+=` ${o}--${l===!0?a:`${a}-${l}`}`)});let s=typeof r=="function"?r(n):r;return typeof s=="string"&&(s=s.trim(),s&&(i+=` ${s}`)),i},[e,t,n,r]),v0="szh-menu-container",dr="szh-menu",S0="arrow",Wp="item",w0="submenu",Kp=E.createContext(),hu=E.createContext({}),sl=E.createContext({}),Qp=E.createContext({}),x0=E.createContext({}),hs=E.createContext({}),Je=Object.freeze({ENTER:"Enter",ESC:"Escape",SPACE:" ",HOME:"Home",END:"End",LEFT:"ArrowLeft",RIGHT:"ArrowRight",UP:"ArrowUp",DOWN:"ArrowDown"}),Se=Object.freeze({RESET:0,SET:1,UNSET:2,INCREASE:3,DECREASE:4,FIRST:5,LAST:6,SET_INDEX:7}),Eo=Object.freeze({CLICK:"click",CANCEL:"cancel",BLUR:"blur",SCROLL:"scroll"}),al=Object.freeze({FIRST:"first",LAST:"last"}),k0=Object.freeze({entering:"opening",entered:"open",exiting:"closing",exited:"closed"}),Jc="absolute",Yp="none",Gp="menuitem",ll={preventScroll:!0},I0=({className:e,containerRef:t,containerProps:n,children:r,isOpen:o,theming:i,transition:s,onClose:a})=>{const l=Co(s,"item"),u=({key:d})=>{switch(d){case Je.ESC:St(a,{key:d,reason:Eo.CANCEL});break}},c=d=>{o&&!d.currentTarget.contains(d.relatedTarget)&&St(a,{reason:Eo.BLUR})};return x.jsx("div",{...ps({onKeyDown:u,onBlur:c},n),className:Er({block:v0,modifiers:E.useMemo(()=>({theme:i,itemTransition:l}),[i,l]),className:e}),style:{position:"absolute",...n==null?void 0:n.style},ref:t,children:r})},C0=()=>{let e,t=0;return{toggle:n=>{n?t++:t--,t=Math.max(t,0)},on:(n,r,o)=>{t?e||(e=setTimeout(()=>{e=0,r()},n)):o==null||o()},off:()=>{e&&(clearTimeout(e),e=0)}}},E0=e=>{const[t,n]=E.useState(),o=E.useRef({items:[],hoverIndex:-1,sorted:!1}).current,i=E.useCallback((a,l)=>{const{items:u}=o;if(!a)o.items=[];else if(l)u.push(a);else{const c=u.indexOf(a);c>-1&&(u.splice(c,1),a.contains(document.activeElement)&&(e.current.focus(ll),n()))}o.hoverIndex=-1,o.sorted=!1},[o,e]),s=E.useCallback((a,l,u)=>{const{items:c,hoverIndex:d}=o,m=()=>{if(o.sorted)return;const p=e.current.querySelectorAll(".szh-menu__item");c.sort((k,h)=>Xc(p,k)-Xc(p,h)),o.sorted=!0};let v=-1,S;switch(a){case Se.RESET:break;case Se.SET:S=l;break;case Se.UNSET:S=p=>p===l?void 0:p;break;case Se.FIRST:m(),v=0,S=c[v];break;case Se.LAST:m(),v=c.length-1,S=c[v];break;case Se.SET_INDEX:m(),v=u,S=c[v];break;case Se.INCREASE:m(),v=d,v<0&&(v=c.indexOf(l)),v++,v>=c.length&&(v=0),S=c[v];break;case Se.DECREASE:m(),v=d,v<0&&(v=c.indexOf(l)),v--,v<0&&(v=c.length-1),S=c[v];break}S||(v=-1),n(S),o.hoverIndex=v},[e,o]);return{hoverItem:t,dispatch:s,updateItems:i}},Zc=(e,t)=>Math.round(e)===t?e:t,A0=e=>{const t=e.getBoundingClientRect();return t.width=Zc(t.width,e.offsetWidth),t.height=Zc(t.height,e.offsetHeight),t},_0=(e,t,n,r)=>{const o=A0(t),i=e.getBoundingClientRect(),s=n===window?{left:0,top:0,right:document.documentElement.clientWidth,bottom:window.innerHeight}:n.getBoundingClientRect(),a=g0(r),l=S=>S+i.left-s.left-a.left,u=S=>S+i.left+o.width-s.right+a.right,c=S=>S+i.top-s.top-a.top,d=S=>S+i.top+o.height-s.bottom+a.bottom;return{menuRect:o,containerRect:i,getLeftOverflow:l,getRightOverflow:u,getTopOverflow:c,getBottomOverflow:d,confineHorizontally:S=>{let p=l(S);if(p<0)S-=p;else{const k=u(S);k>0&&(S-=k,p=l(S),p<0&&(S-=p))}return S},confineVertically:S=>{let p=c(S);if(p<0)S-=p;else{const k=d(S);k>0&&(S-=k,p=c(S),p<0&&(S-=p))}return S}}},M0=({arrowRef:e,menuY:t,anchorRect:n,containerRect:r,menuRect:o})=>{let i=n.top-r.top-t+n.height/2;const s=e.current.offsetHeight*1.25;return i=Math.max(s,i),i=Math.min(i,o.height-s),i},z0=({anchorRect:e,containerRect:t,menuRect:n,placeLeftorRightY:r,placeLeftX:o,placeRightX:i,getLeftOverflow:s,getRightOverflow:a,confineHorizontally:l,confineVertically:u,arrowRef:c,arrow:d,direction:m,position:v})=>{let S=m,p=r;v!=="initial"&&(p=u(p),v==="anchor"&&(p=Math.min(p,e.bottom-t.top),p=Math.max(p,e.top-t.top-n.height)));let k,h,f;return S==="left"?(k=o,v!=="initial"&&(h=s(k),h<0&&(f=a(i),(f<=0||-h>f)&&(k=i,S="right")))):(k=i,v!=="initial"&&(f=a(k),f>0&&(h=s(o),(h>=0||-h<f)&&(k=o,S="left")))),v==="auto"&&(k=l(k)),{arrowY:d?M0({menuY:p,arrowRef:c,anchorRect:e,containerRect:t,menuRect:n}):void 0,x:k,y:p,computedDirection:S}},j0=({arrowRef:e,menuX:t,anchorRect:n,containerRect:r,menuRect:o})=>{let i=n.left-r.left-t+n.width/2;const s=e.current.offsetWidth*1.25;return i=Math.max(s,i),i=Math.min(i,o.width-s),i},T0=({anchorRect:e,containerRect:t,menuRect:n,placeToporBottomX:r,placeTopY:o,placeBottomY:i,getTopOverflow:s,getBottomOverflow:a,confineHorizontally:l,confineVertically:u,arrowRef:c,arrow:d,direction:m,position:v})=>{let S=m==="top"?"top":"bottom",p=r;v!=="initial"&&(p=l(p),v==="anchor"&&(p=Math.min(p,e.right-t.left),p=Math.max(p,e.left-t.left-n.width)));let k,h,f;return S==="top"?(k=o,v!=="initial"&&(h=s(k),h<0&&(f=a(i),(f<=0||-h>f)&&(k=i,S="bottom")))):(k=i,v!=="initial"&&(f=a(k),f>0&&(h=s(o),(h>=0||-h<f)&&(k=o,S="top")))),v==="auto"&&(k=u(k)),{arrowX:d?j0({menuX:p,arrowRef:c,anchorRect:e,containerRect:t,menuRect:n}):void 0,x:p,y:k,computedDirection:S}},P0=({arrow:e,align:t,direction:n,gap:r,shift:o,position:i,anchorRect:s,arrowRef:a,positionHelpers:l})=>{const{menuRect:u,containerRect:c}=l,d=n==="left"||n==="right";let m=d?r:o,v=d?o:r;if(e){const w=a.current;d?m+=w.offsetWidth:v+=w.offsetHeight}const S=s.left-c.left-u.width-m,p=s.right-c.left+m,k=s.top-c.top-u.height-v,h=s.bottom-c.top+v;let f,g;t==="end"?(f=s.right-c.left-u.width,g=s.bottom-c.top-u.height):t==="center"?(f=s.left-c.left-(u.width-s.width)/2,g=s.top-c.top-(u.height-s.height)/2):(f=s.left-c.left,g=s.top-c.top),f+=m,g+=v;const C={...l,anchorRect:s,placeLeftX:S,placeRightX:p,placeLeftorRightY:g,placeTopY:k,placeBottomY:h,placeToporBottomX:f,arrowRef:a,arrow:e,direction:n,position:i};switch(n){case"left":case"right":return z0(C);case"top":case"bottom":default:return T0(C)}},hi=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?E.useLayoutEffect:E.useEffect;function qc(e,t){typeof e=="function"?e(t):e.current=t}const mu=(e,t)=>E.useMemo(()=>e?t?n=>{qc(e,n),qc(t,n)}:e:t,[e,t]),ed=-9999,Xp=({ariaLabel:e,menuClassName:t,menuStyle:n,arrow:r,arrowProps:o={},anchorPoint:i,anchorRef:s,containerRef:a,containerProps:l,externalRef:u,parentScrollingRef:c,align:d="start",direction:m="bottom",position:v="auto",overflow:S="visible",setDownOverflow:p,repositionFlag:k,captureFocus:h=!0,state:f,endTransition:g,isDisabled:C,menuItemFocus:w,gap:y=0,shift:I=0,children:z,onClose:A,focusProps:M,...L})=>{const[N,_]=E.useState({x:ed,y:ed}),[j,D]=E.useState({}),[R,F]=E.useState(),[T,O]=E.useState(m),[b]=E.useState(C0),[U,H]=E.useReducer(Y=>Y+1,1),{transition:Z,boundingBoxRef:ne,boundingBoxPadding:X,rootMenuRef:re,rootAnchorRef:q,scrollNodesRef:ye,reposition:Me,viewScroll:ue,submenuCloseDelay:ie}=E.useContext(hs),{submenuCtx:fe,reposSubmenu:Ne=k}=E.useContext(sl),Ke=E.useRef(),vn=E.useRef(),ce=E.useRef(!1),{hoverItem:pt,dispatch:Qe,updateItems:Ft}=E0(Ke),Re=Bp(f),To=Co(Z,"open"),Sn=Co(Z,"close"),Ye=ye.current,vu=Y=>{switch(Y.key){case Je.HOME:Qe(Se.FIRST);break;case Je.END:Qe(Se.LAST);break;case Je.UP:Qe(Se.DECREASE,pt);break;case Je.DOWN:Qe(Se.INCREASE,pt);break;case Je.SPACE:Y.target&&Y.target.className.indexOf(dr)!==-1&&Y.preventDefault();return;default:return}Y.preventDefault(),Y.stopPropagation()},kt=()=>{f==="closing"&&F(),St(g)},Pt=Y=>{Y.stopPropagation(),b.on(ie,()=>{Qe(Se.RESET),Ke.current.focus(ll)})},wn=Y=>{Y.target===Y.currentTarget&&b.off()},Ge=E.useCallback(Y=>{var ku;const De=Ke.current,It=a.current;if(!De||!It)return;const Nt=s?(ku=s.current)==null?void 0:ku.getBoundingClientRect():i?{left:i.x,right:i.x,top:i.y,bottom:i.y,width:0,height:0}:null;if(!Nt)return;Ye.menu||(Ye.menu=(ne?ne.current:ea(re.current))||window);const Ie=_0(It,De,Ye.menu,X);let{arrowX:No,arrowY:fh,x:ph,y:Ro,computedDirection:hh}=P0({arrow:r,align:d,direction:m,gap:y,shift:I,position:v,anchorRect:Nt,arrowRef:vn,positionHelpers:Ie});const{menuRect:mh}=Ie,xu=mh.height;if(!Y&&S!=="visible"){const{getTopOverflow:yh,getBottomOverflow:gh}=Ie;let zr,gs;const vs=gh(Ro);if(vs>0)zr=xu-vs,gs=vs;else{const Do=yh(Ro);Do<0&&(zr=xu+Do,gs=0-Do,zr>=0&&(Ro-=Do))}zr>=0&&F({height:zr,overflowAmt:gs})}r&&D({x:No,y:fh}),_({x:ph,y:Ro}),O(hh)},[r,d,X,m,y,I,v,S,i,s,a,ne,re,Ye]);hi(()=>{Re&&(Ge(),ce.current&&H()),ce.current=Re},[Re,Ge,Ne]),hi(()=>{R&&!p&&(Ke.current.scrollTop=0)},[R,p]),hi(()=>Ft,[Ft]),E.useEffect(()=>{let{menu:Y}=Ye;if(!Re||!Y)return;if(Y=Y.addEventListener?Y:window,!Ye.anchors){Ye.anchors=[];let Ie=ea(q&&q.current);for(;Ie&&Ie!==Y;)Ye.anchors.push(Ie),Ie=ea(Ie)}let De=ue;if(Ye.anchors.length&&De==="initial"&&(De="auto"),De==="initial")return;const It=()=>{De==="auto"?il(()=>Ge(!0)):St(A,{reason:Eo.SCROLL})},Nt=Ye.anchors.concat(ue!=="initial"?Y:[]);return Nt.forEach(Ie=>Ie.addEventListener("scroll",It)),()=>Nt.forEach(Ie=>Ie.removeEventListener("scroll",It))},[q,Ye,Re,A,ue,Ge]);const Po=!!R&&R.overflowAmt>0;E.useEffect(()=>{if(Po||!Re||!c)return;const Y=()=>il(Ge),De=c.current;return De.addEventListener("scroll",Y),()=>De.removeEventListener("scroll",Y)},[Re,Po,c,Ge]),E.useEffect(()=>{if(!Re||typeof ResizeObserver!="function"||Me==="initial")return;const Y=[],De=new ResizeObserver(Ie=>Ie.forEach(({target:No})=>{Y.indexOf(No)<0?Y.push(No):Sr.flushSync(()=>{Ge(),H()})})),It={box:"border-box"};De.observe(Ke.current,It);const Nt=s==null?void 0:s.current;return Nt&&De.observe(Nt,It),()=>De.disconnect()},[Re,Me,s,Ge]),E.useEffect(()=>{if(!Re){Qe(Se.RESET),Sn||F();return}const{position:Y,alwaysUpdate:De}=w||{},It=()=>{Y===al.FIRST?Qe(Se.FIRST):Y===al.LAST?Qe(Se.LAST):Y>=-1&&Qe(Se.SET_INDEX,void 0,Y)};if(De)It();else if(h){const Nt=setTimeout(()=>{const Ie=Ke.current;Ie&&!Ie.contains(document.activeElement)&&(Ie.focus(ll),It())},To?170:100);return()=>clearTimeout(Nt)}},[Re,To,Sn,h,w,Qe]);const ah=E.useMemo(()=>({isParentOpen:Re,submenuCtx:b,dispatch:Qe,updateItems:Ft}),[Re,b,Qe,Ft]);let ms,ys;R&&(p?ys=R.overflowAmt:ms=R.height);const lh=E.useMemo(()=>({reposSubmenu:U,submenuCtx:b,overflow:S,overflowAmt:ys,parentMenuRef:Ke,parentDir:T}),[U,b,S,ys,T]),uh=ms>=0?{maxHeight:ms,overflow:S}:void 0,Su=E.useMemo(()=>({state:f,align:d,dir:T}),[f,d,T]),ch=E.useMemo(()=>({dir:T}),[T]),dh=Er({block:dr,element:S0,modifiers:ch,className:o.className}),wu=x.jsxs("ul",{role:"menu","aria-label":e,...pu(C),...ps({onPointerEnter:fe==null?void 0:fe.off,onPointerMove:Pt,onPointerLeave:wn,onKeyDown:vu,onAnimationEnd:kt},L),ref:mu(u,Ke),className:Er({block:dr,modifiers:Su,className:t}),style:{...n,...uh,margin:0,display:f==="closed"?"none":void 0,position:Jc,left:N.x,top:N.y},children:[r&&x.jsx("li",{"aria-hidden":!0,...o,className:dh,style:{display:"block",position:Jc,left:j.x,top:j.y,...o.style},ref:vn}),x.jsx(sl.Provider,{value:lh,children:x.jsx(hu.Provider,{value:ah,children:x.jsx(Kp.Provider,{value:pt,children:St(z,Su)})})})]});return l?x.jsx(I0,{...l,isOpen:Re,children:wu}):wu},yu=E.forwardRef(function({"aria-label":t,className:n,containerProps:r,initialMounted:o,unmountOnClose:i,transition:s,transitionTimeout:a,boundingBoxRef:l,boundingBoxPadding:u,reposition:c="auto",submenuOpenDelay:d=300,submenuCloseDelay:m=150,viewScroll:v="initial",portal:S,theming:p,onItemClick:k,...h},f){const g=E.useRef(null),C=E.useRef({}),{anchorRef:w,state:y,onClose:I}=h,z=E.useMemo(()=>({initialMounted:o,unmountOnClose:i,transition:s,transitionTimeout:a,boundingBoxRef:l,boundingBoxPadding:u,rootMenuRef:g,rootAnchorRef:w,scrollNodesRef:C,reposition:c,viewScroll:v,submenuOpenDelay:d,submenuCloseDelay:m}),[o,i,s,a,w,l,u,c,v,d,m]),A=E.useMemo(()=>({handleClick(L,N){L.stopPropagation||St(k,L);let _=L.keepOpen;_===void 0&&(_=N&&L.key===Je.SPACE),_||St(I,{value:L.value,key:L.key,reason:Eo.CLICK})},handleClose(L){St(I,{key:L,reason:Eo.CLICK})}}),[k,I]);if(!y)return null;const M=x.jsx(hs.Provider,{value:z,children:x.jsx(Qp.Provider,{value:A,children:x.jsx(Xp,{...h,ariaLabel:t||"Menu",externalRef:f,containerRef:g,containerProps:{className:n,containerRef:g,containerProps:r,theming:p,transition:s,onClose:I}})})});return S===!0&&typeof document<"u"?Sr.createPortal(M,document.body):S?S.target?Sr.createPortal(M,S.target):S.stablePosition?null:M:M}),ul=0,cl=1,Hi=2,Bi=3,Wi=4,N0=5,Jp=6,R0=["preEnter","entering","entered","preExit","exiting","exited","unmounted"],Zp=e=>({_s:e,status:R0[e],isEnter:e<Bi,isMounted:e!==Jp,isResolved:e===Hi||e>Wi}),dl=e=>e?Jp:N0,D0=(e,t)=>{switch(e){case cl:case ul:return Hi;case Wi:case Bi:return dl(t)}},L0=e=>typeof e=="object"?[e.enter,e.exit]:[e,e],O0=(e,t)=>setTimeout(()=>{isNaN(document.body.offsetTop)||e(t+1)},0),td=(e,t,n,r,o)=>{clearTimeout(r.current);const i=Zp(e);t(i),n.current=i,o&&o({current:i})},$0=({enter:e=!0,exit:t=!0,preEnter:n,preExit:r,timeout:o,initialEntered:i,mountOnEnter:s,unmountOnExit:a,onStateChange:l}={})=>{const[u,c]=E.useState(()=>Zp(i?Hi:dl(s))),d=E.useRef(u),m=E.useRef(),[v,S]=L0(o),p=E.useCallback(()=>{const h=D0(d.current._s,a);h&&td(h,c,d,m,l)},[l,a]),k=E.useCallback(h=>{const f=C=>{switch(td(C,c,d,m,l),C){case cl:v>=0&&(m.current=setTimeout(p,v));break;case Wi:S>=0&&(m.current=setTimeout(p,S));break;case ul:case Bi:m.current=O0(f,C);break}},g=d.current.isEnter;typeof h!="boolean"&&(h=!g),h?!g&&f(e?n?ul:cl:Hi):g&&f(t?r?Bi:Wi:dl(a))},[p,l,e,t,n,r,v,S,a]);return[u,k,p]},F0=({initialOpen:e,initialMounted:t,unmountOnClose:n,transition:r,transitionTimeout:o=500,onMenuChange:i}={})=>{const s=Co(r,"open"),a=Co(r,"close"),[{status:l},u,c]=$0({initialEntered:e,mountOnEnter:!t,unmountOnExit:n,timeout:o,enter:s,exit:a,onStateChange:E.useCallback(({current:{isEnter:d,isResolved:m}})=>{!i||d&&s&&m||!d&&a&&m||i({open:d})},[i,s,a])});return[{state:k0[l],endTransition:c},u]},b0=e=>{const[t,n]=F0(e),[r,o]=E.useState(),i=(s,a)=>{o({position:s,alwaysUpdate:a}),n(!0)};return[{menuItemFocus:r,...t},n,i]},qp=(e,t)=>{const n=E.memo(t),r=E.forwardRef((o,i)=>{const s=E.useRef(null);return x.jsx(n,{...o,itemRef:s,externalRef:i,isHovering:E.useContext(Kp)===s.current})});return r.displayName=`WithHovering(${e})`,r},eh=e=>{const[t,n]=E.useState(!1);return E.useEffect(()=>{!e&&n(!1)},[e]),[t,()=>!t&&n(!0),()=>n(!1)]},th=(e,t,n)=>{hi(()=>{if(e)return;const r=t.current;return n(r,!0),()=>{n(r)}},[e,t,n])},U0=qp("SubMenu",function({"aria-label":t,className:n,disabled:r,direction:o,label:i,openTrigger:s,onMenuChange:a,isHovering:l,instanceRef:u,itemRef:c,captureFocus:d,repositionFlag:m,itemProps:v={},...S}){const p=E.useContext(hs),{rootMenuRef:k,submenuOpenDelay:h,submenuCloseDelay:f}=p,{parentMenuRef:g,parentDir:C,overflow:w}=E.useContext(sl),{isParentOpen:y,submenuCtx:I,dispatch:z,updateItems:A}=E.useContext(hu),M=w!=="visible",[L,N,_]=b0({...p,onMenuChange:a}),[j,D,R]=eh(l),{state:F}=L,T=!!r,O=Bp(F),b=E.useRef(null),[U]=E.useState({v:0}),H=()=>{I.off(),U.v&&(clearTimeout(U.v),U.v=0)},Z=(...ce)=>{H(),ne(),!T&&_(...ce)},ne=()=>!l&&!T&&z(Se.SET,c.current),X=ce=>{ne(),s||(U.v=setTimeout(()=>il(Z),Math.max(ce,0)))},re=ce=>{T||(ce.stopPropagation(),D(),!(U.v||O)&&I.on(f,()=>X(h-f),()=>X(h)))},q=()=>{R(),H(),O||z(Se.UNSET,c.current)},ye=ce=>{if(l)switch(ce.key){case Je.ENTER:ce.preventDefault();case Je.SPACE:case Je.RIGHT:s!=="none"&&Z(al.FIRST)}},Me=ce=>{let pt=!1;switch(ce.key){case Je.LEFT:O&&(c.current.focus(),N(!1),pt=!0);break;case Je.RIGHT:O||(pt=!0);break}pt&&(ce.preventDefault(),ce.stopPropagation())};th(T,c,A),E.useEffect(()=>I.toggle(O),[I,O]),E.useEffect(()=>()=>{clearTimeout(U.v),I.toggle(!1)},[U,I]),E.useEffect(()=>{l&&y?c.current.focus():N(!1)},[l,y,N,c]),E.useImperativeHandle(u,()=>({openMenu:(...ce)=>{y&&Z(...ce)},closeMenu:()=>{O&&(c.current.focus(),N(!1))}}));const ue=E.useMemo(()=>({open:O,hover:j||l,disabled:T,submenu:!0}),[O,l,T,j]),{ref:ie,className:fe,...Ne}=v,Ke=ps({onPointerEnter:I.off,onPointerMove:re,onPointerLeave:q,onKeyDown:ye,onClick:()=>s!=="none"&&Z()},Ne),vn=()=>{const ce=x.jsx(Xp,{...S,...L,ariaLabel:t||(typeof i=="string"?i:"Submenu"),anchorRef:c,containerRef:M?k:b,direction:o||(C==="right"||C==="left"?C:"right"),parentScrollingRef:M&&g,isDisabled:T}),pt=k.current;return M&&pt?Sr.createPortal(ce,pt):ce};return x.jsxs("li",{className:Er({block:dr,element:w0,className:n}),style:{position:"relative"},role:Yp,ref:b,onKeyDown:Me,children:[x.jsx("div",{role:Gp,"aria-haspopup":!0,"aria-expanded":O,...pu(T,l),...Ke,ref:mu(ie,c),className:Er({block:dr,element:Wp,modifiers:ue,className:fe}),children:E.useMemo(()=>St(i,ue),[i,ue])}),F&&vn()]})}),V0=(e,t,n,r)=>{const[o,i,s]=eh(n),{submenuCloseDelay:a}=E.useContext(hs),{isParentOpen:l,submenuCtx:u,dispatch:c,updateItems:d}=E.useContext(hu),m=()=>{!n&&!r&&c(Se.SET,e.current)},v=()=>{!r&&c(Se.UNSET,e.current)},S=h=>{n&&!h.currentTarget.contains(h.relatedTarget)&&v()},p=h=>{r||(h.stopPropagation(),i(),u.on(a,m,m))},k=(h,f)=>{s(),u.off(),!f&&v()};return th(r,e,d),E.useEffect(()=>{n&&l&&t.current&&t.current.focus()},[t,n,l]),{mouseOver:o,setHover:m,onBlur:S,onPointerMove:p,onPointerLeave:k}},Kr=qp("MenuItem",function({className:t,value:n,href:r,type:o,checked:i,disabled:s,children:a,onClick:l,isHovering:u,itemRef:c,externalRef:d,...m}){const v=!!s,{mouseOver:S,setHover:p,...k}=V0(c,c,u,v),h=E.useContext(Qp),f=E.useContext(x0),g=o==="radio",C=o==="checkbox",w=!!r&&!v&&!g&&!C,y=g?f.value===n:C?!!i:!1,I=N=>{if(v){N.stopPropagation(),N.preventDefault();return}const _={value:n,syntheticEvent:N};N.key!==void 0&&(_.key=N.key),C&&(_.checked=!y),g&&(_.name=f.name),St(l,_),g&&St(f.onRadioChange,_),h.handleClick(_,C||g)},z=N=>{if(u)switch(N.key){case Je.ENTER:N.preventDefault();case Je.SPACE:w?c.current.click():I(N)}},A=E.useMemo(()=>({type:o,disabled:v,hover:S||u,checked:y,anchor:w}),[o,v,S,u,y,w]),M=ps({...k,onPointerDown:p,onKeyDown:z,onClick:I},m),L={role:g?"menuitemradio":C?"menuitemcheckbox":Gp,"aria-checked":g||C?y:void 0,...pu(v,u),...M,ref:mu(d,c),className:Er({block:dr,element:Wp,modifiers:A,className:t}),children:E.useMemo(()=>St(a,A),[a,A])};return w?x.jsx("li",{role:Yp,children:x.jsx("a",{href:r,...L})}):x.jsx("li",{...L})}),nd="karmyc_custom_layouts",H0=()=>{var C;cu();const[e,t]=E.useState(!1),[n,r]=E.useState("closed"),[o,i]=E.useState({x:0,y:0}),s=P(),a=((C=s.options)==null?void 0:C.builtInLayouts)||[],[l,u]=E.useState(()=>{const w=localStorage.getItem(nd);return w?JSON.parse(w):[]});E.useEffect(()=>{localStorage.setItem(nd,JSON.stringify(l))},[l]);const c=E.useMemo(()=>[...a,...l],[a,l]),d=E.useCallback(w=>{u(w),P.setState(y=>({...y,layout_preset:w}))},[]),m=E.useCallback(w=>{const y=JSON.stringify(w,null,2),I="data:application/json;charset=utf-8,"+encodeURIComponent(y),z=`${w.name}.json`,A=document.createElement("a");A.setAttribute("href",I),A.setAttribute("download",z),A.click()},[]),v=E.useCallback(()=>{const w=document.createElement("input");w.type="file",w.accept=".json",w.onchange=y=>{var A;const I=(A=y.target.files)==null?void 0:A[0];if(!I)return;const z=new FileReader;z.onload=M=>{var L;try{const _={...JSON.parse((L=M.target)==null?void 0:L.result),id:Date.now().toString(),isBuiltIn:!1};d([...l,_])}catch(N){console.error("Erreur lors de l'import du preset:",N)}},z.readAsText(I)},w.click()},[l,d]),S=E.useCallback(w=>{const y=prompt("Nouveau nom du preset:",w.name);y&&y!==w.name&&d(l.map(I=>I.id===w.id?{...I,name:y}:I))},[l,d]),p=E.useCallback(w=>{confirm(`Voulez-vous vraiment supprimer le preset "${w.name}" ?`)&&d(l.filter(y=>y.id!==w.id))},[l,d]),k=E.useCallback(()=>{const w=s.activeScreenId,y=s.screens[w];if(!y)return;const I=prompt("Nom du nouveau preset:");if(!I)return;const z={id:Date.now().toString(),name:I,config:{_id:y.areas._id,rootId:y.areas.rootId,errors:[],activeAreaId:y.areas.activeAreaId,joinPreview:null,layout:y.areas.layout,areas:y.areas.areas,viewports:y.areas.viewports,areaToOpen:null,lastSplitResultData:null,lastLeadAreaId:y.areas.lastLeadAreaId},isBuiltIn:!1};d([...l,z])},[s,l,d]),h=E.useCallback(w=>{const y=c.find(z=>z.id===w);if(!y)return;const I=s.activeScreenId;I&&P.setState(z=>{const A=z.screens[I];A&&(A.areas={_id:y.config._id,rootId:y.config.rootId,errors:[],activeAreaId:y.config.activeAreaId,joinPreview:null,layout:{...y.config.layout},areas:{...y.config.areas},viewports:{...y.config.viewports},areaToOpen:null,lastSplitResultData:null,lastLeadAreaId:y.config.lastLeadAreaId},z.lastUpdated=Date.now())})},[s,c]);E.useEffect(()=>(Q.registerActionHandler("layout.import",v),Q.registerActionHandler("layout.export",m),Q.registerActionHandler("layout.rename",S),Q.registerActionHandler("layout.delete",p),Q.registerActionHandler("layout.save",k),Q.registerActionHandler("layout.apply",h),()=>{Q.unregisterActionHandler("layout.import"),Q.unregisterActionHandler("layout.export"),Q.unregisterActionHandler("layout.rename"),Q.unregisterActionHandler("layout.delete"),Q.unregisterActionHandler("layout.save"),Q.unregisterActionHandler("layout.apply")}),[v,m,S,p,k,h]);const f=E.useCallback(w=>{w.preventDefault(),i({x:w.clientX,y:w.clientY}),r("open")},[]),g=E.useCallback(()=>{r("closed")},[]);return x.jsxs(x.Fragment,{children:[x.jsx("style",{children:`
                    .layout-context-menu {
                        z-index: 9999 !important;
                    }
                    .preset-item {
                        display: flex;
                        align-items: center;
                        justify-content: space-between;
                        width: 100%;
                        padding: 4px 8px;
                    }
                    .preset-actions {
                        display: flex;
                        gap: 4px;
                    }
                    .preset-actions button {
                        background: none;
                        border: none;
                        padding: 4px;
                        cursor: pointer;
                        color: inherit;
                    }
                    .preset-actions button:hover {
                        background: rgba(255, 255, 255, 0.1);
                        border-radius: 4px;
                    }
                `}),x.jsx("div",{onContextMenu:f,onClick:f,onMouseEnter:()=>t(!0),onMouseLeave:()=>t(!1),style:{cursor:"pointer",padding:"8px",color:"white",display:"flex",alignItems:"center",gap:"8px",userSelect:"none",backgroundColor:e?"rgba(255, 255, 255, 0.1)":"transparent",transition:"background-color 0.2s ease"},children:x.jsx(Ev,{size:26})}),x.jsxs(yu,{anchorPoint:o,state:n,onClose:g,menuClassName:"layout-context-menu",children:[a.map(w=>x.jsx(Kr,{onClick:()=>h(w.id),children:w.name},w.id)),l.map(w=>x.jsx(Kr,{onClick:()=>h(w.id),children:x.jsxs("div",{className:"preset-item",children:[x.jsx("span",{children:w.name}),x.jsxs("div",{className:"preset-actions",children:[x.jsx("button",{onClick:y=>{y.stopPropagation(),S(w)},children:x.jsx($p,{size:16})}),x.jsx("button",{onClick:y=>{y.stopPropagation(),p(w)},children:x.jsx(Ov,{size:16})}),x.jsx("button",{onClick:y=>{y.stopPropagation(),m(w)},children:x.jsx(Dp,{size:16})})]})]})},w.id)),x.jsx("hr",{}),x.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"4px"},children:[x.jsxs(Kr,{onClick:k,children:[x.jsx(fu,{size:16,style:{marginRight:"8px"}}),"Nouveau"]}),x.jsxs(Kr,{onClick:v,children:[x.jsx(Lp,{size:16,style:{marginRight:"8px"}}),"Importer"]})]})]})]})};function nh(e,t){E.useEffect(()=>{const n=t.map(r=>({...r,areaType:r.isGlobal?void 0:e}));return Ir.registerShortcuts(e,n),()=>{Ir.unregisterShortcuts(e)}},[e,t])}const B0=()=>x.jsx("div",{className:"empty-area-message",children:x.jsx("span",{className:"empty-area-message__text",children:"No area initialized"})});function gn(e,t,n,r){E.useEffect(()=>(W.registerComponent(e,t),W.registerInitialState(e,n),r&&(r.displayName&&W.registerDisplayName(e,r.displayName),r.icon&&W.registerIcon(e,r.icon),r.defaultSize&&W.registerDefaultSize(e,r.defaultSize),r.supportedActions&&W.registerSupportedActions(e,r.supportedActions),r.role&&(W._roleMap=W._roleMap||{},W._roleMap[e]=r.role),r.supportFullscreen!==void 0&&(W._supportFullscreenMap=W._supportFullscreenMap||{},W._supportFullscreenMap[e]=r.supportFullscreen)),()=>{W.unregisterAreaType(e)}),[e,t,n,r,r==null?void 0:r.displayName,r==null?void 0:r.defaultSize,r==null?void 0:r.supportedActions,r==null?void 0:r.icon,r==null?void 0:r.role,r==null?void 0:r.supportFullscreen])}const W0=()=>{const{updateArea:e}=P.getState(),{registerComponent:t}=qe("demo-area","top-inner"),n=r=>{const o=r.areaId;o&&e({id:o,type:"demo-area",state:W.getInitialState("demo-area")})};return E.useMemo(()=>{t(()=>x.jsx("div",{children:"Top Demo Area center slot"}),{name:"topOuterSlot",type:"menu"},{order:990,width:"auto",alignment:"center"})},[t]),nh("demo-area",[{key:"S",modifierKeys:["Control"],name:"Save Demo Area",fn:r=>{console.log(`Saving demo area ${r}`)},history:!0,isGlobal:!0},{key:"R",name:"Reset Demo Area",fn:r=>{console.log(`Resetting demo area ${r}`),e({id:r,type:"demo-area",state:W.getInitialState("demo-area")})}}]),gn("demo-area",B0,{},{displayName:"Demo area",defaultSize:{width:300,height:200},role:oe.LEAD,icon:du}),Fe("area.create-demo-area",n),null},K0=""+new URL("karmyc_logo-DE65axty.svg",import.meta.url).href,Q0=()=>{const{updateArea:e}=P.getState(),t=n=>{const r=n.areaId;r&&e({id:r,type:"logo-karmyc-area",state:W.getInitialState("logo-karmyc-area")})};return nh("logo-karmyc-area",[{key:"L",modifierKeys:["Control"],name:"Toggle Logo Size",fn:n=>{console.log(`Toggling logo size for area ${n} in Karmyc Core DEMO!!`)}},{key:"H",name:"Hide/Show Logo",fn:n=>{console.log(`Toggling logo visibility for area ${n}  in Karmyc Core DEMO 2!!`)}}]),gn("logo-karmyc-area",()=>x.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"8px",width:"100%",height:"100%"},children:[x.jsx("img",{src:K0,style:{width:"75%"}}),x.jsx("strong",{children:"Karmyc core Demo"})]}),{},{displayName:"Logo Karmyc",defaultSize:{width:300,height:200},role:oe.SELF,icon:hv}),Fe("area.create-logo-karmyc-area",t),null},Y0=()=>{const e=Ir.getAllShortcuts(),t=e.filter(o=>o.isGlobal),r=e.filter(o=>!o.isGlobal).reduce((o,i)=>{const s=i.areaType||"Unknown";return o[s]||(o[s]=[]),o[s].push(i),o},{});return x.jsxs("div",{style:{padding:"15px",color:"white",height:"100%",overflow:"auto"},children:[x.jsxs("div",{style:{marginBottom:"30px"},children:[x.jsx("h3",{style:{borderBottom:"1px solid rgba(255,255,255,0.2)",paddingBottom:"10px",marginBottom:"15px"},children:"Raccourcis Globaux"}),x.jsx("div",{style:{display:"grid",gap:"5px"},children:t.map((o,i)=>{var s;return x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"4px"},children:[x.jsx("span",{children:o.name}),x.jsxs("span",{style:{backgroundColor:"rgba(255,255,255,0.2)",padding:"2px 8px",borderRadius:"4px",fontFamily:"monospace"},children:[(s=o.modifierKeys)==null?void 0:s.map(a=>a).join(" + ")," + ",o.key]})]},i)})})]}),Object.entries(r).map(([o,i])=>x.jsxs("div",{style:{marginBottom:"30px"},children:[x.jsx("h3",{style:{borderBottom:"1px solid rgba(255,255,255,0.2)",paddingBottom:"10px",marginBottom:"15px"},children:o}),x.jsx("div",{style:{display:"grid",gap:"10px"},children:i.map((s,a)=>{var l;return x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"4px"},children:[x.jsx("span",{children:s.name}),x.jsxs("span",{style:{backgroundColor:"rgba(255,255,255,0.2)",padding:"2px 8px",borderRadius:"4px",fontFamily:"monospace"},children:[(l=s.modifierKeys)==null?void 0:l.map(u=>u).join(" + ")," + ",s.key]})]},a)})})]},o))]})},G0=()=>{const{updateArea:e}=P.getState(),{registerComponent:t}=qe("demo-area","top-inner"),n=r=>{const o=r.areaId;o&&e({id:o,type:"keyboard-shortcuts-area",state:W.getInitialState("keyboard-shortcuts-area")})};return E.useMemo(()=>{t(()=>x.jsx("div",{children:"Top Demo Area center slot"}),{name:"topOuterSlot",type:"menu"},{order:990,width:"auto",alignment:"center"})},[t]),gn("keyboard-shortcuts-area",Y0,{},{displayName:"Raccourcis Clavier",defaultSize:{width:400,height:600},role:oe.SELF,icon:fv}),Fe("area.create-keyboard-shortcuts-area",n),null};function X0(e,t={}){var m,v,S,p,k,h;const{enabled:n=!0,maxHistorySize:r=50}=t,o=B(f=>f.undoSharedState),i=B(f=>f.redoSharedState),s=B(f=>e?f.spaces[e]:null),a=!!((v=(m=s==null?void 0:s.sharedState)==null?void 0:m.pastDiffs)!=null&&v.length),l=!!((p=(S=s==null?void 0:s.sharedState)==null?void 0:S.futureDiffs)!=null&&p.length),u=E.useCallback(()=>{!n||!e||!a||o(e)},[n,e,a,o]),c=E.useCallback(()=>{!n||!e||!l||i(e)},[n,e,l,i]),d=E.useCallback(()=>{!n||!e||B.setState(f=>{const g=f.spaces[e];g&&(g.sharedState.pastDiffs=[],g.sharedState.futureDiffs=[])})},[n,e]);return{canUndo:a,canRedo:l,undo:u,redo:c,clearHistory:d,pastDiffs:((k=s==null?void 0:s.sharedState)==null?void 0:k.pastDiffs)??[],futureDiffs:((h=s==null?void 0:s.sharedState)==null?void 0:h.futureDiffs)??[]}}const J0=({id:e,viewport:t})=>{const{activeSpaceId:n}=bn(),{pastDiffs:r,futureDiffs:o,canUndo:i,canRedo:s,undo:a,redo:l}=X0(n),u=E.useCallback(c=>new Date(c).toLocaleTimeString(),[]);return x.jsxs("div",{style:{width:t.width,height:t.height,display:"flex",flexDirection:"column",background:"#1a1a1a",color:"white",padding:"16px",gap:"16px"},children:[x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #333",paddingBottom:"8px"},children:[x.jsxs("h3",{style:{margin:0,display:"flex",alignItems:"center",gap:"8px"},children:[x.jsx(Zg,{size:20}),"Historique"]}),x.jsxs("div",{style:{display:"flex",gap:"8px"},children:[x.jsxs("button",{onClick:a,disabled:!i,style:{padding:"4px 8px",background:i?"#333":"#222",border:"none",borderRadius:"4px",color:"white",cursor:i?"pointer":"not-allowed",display:"flex",alignItems:"center",gap:"4px"},children:[x.jsx(Pv,{size:16}),"Annuler"]}),x.jsxs("button",{onClick:l,disabled:!s,style:{padding:"4px 8px",background:s?"#333":"#222",border:"none",borderRadius:"4px",color:"white",cursor:s?"pointer":"not-allowed",display:"flex",alignItems:"center",gap:"4px"},children:[x.jsx(Rv,{size:16}),"Rétablir"]})]})]}),x.jsxs("div",{style:{flex:1,overflowY:"auto",display:"flex",flexDirection:"column",gap:"8px"},children:[o.length>0&&x.jsxs("div",{style:{marginBottom:"16px"},children:[x.jsx("h4",{style:{color:"#666",margin:"0 0 8px 0"},children:"Actions futures"}),o.map((c,d)=>x.jsxs("div",{style:{padding:"8px",background:"#222",borderRadius:"4px",fontSize:"14px"},children:[x.jsx("div",{style:{color:"#888"},children:u(c.timestamp)}),x.jsx("div",{style:{marginTop:"4px"},children:nl(c.actionType,c.payload)})]},`future-${c.timestamp}`))]}),r.length>0?r.map((c,d)=>x.jsxs("div",{style:{padding:"8px",background:"#222",borderRadius:"4px",fontSize:"14px",cursor:"pointer"},onMouseEnter:m=>{m.currentTarget.style.background="#2a2a2a"},onMouseLeave:m=>{m.currentTarget.style.background="#222"},onClick:()=>{},children:[x.jsx("div",{style:{color:"#888"},children:u(c.timestamp)}),x.jsx("div",{style:{marginTop:"4px"},children:nl(c.actionType,c.payload)})]},`past-${c.timestamp}`)):x.jsx("div",{style:{color:"#666",textAlign:"center",padding:"32px",background:"#222",borderRadius:"4px"},children:"Aucune action dans l'historique"})]})]})},Z0=()=>{const{updateArea:e}=P.getState(),t=n=>{const r=n.areaId;r&&e({id:r,type:"history-area",state:W.getInitialState("history-area")})};return gn("history-area",J0,{},{displayName:"History",defaultSize:{width:300,height:200},role:oe.FOLLOW,icon:du}),Fe("area.create-history-area",t),null},rh=e=>{const t=P(A=>A.setAreaToOpen),n=P(A=>A.updateAreaToOpenPosition),r=P(A=>A.finalizeAreaPlacement),o=P(A=>A.cleanupTemporaryStates),i=P(A=>A.updateLayout),s=P(A=>{var M;return(M=A.screens[A.activeScreenId])==null?void 0:M.areas.layout}),a=P(A=>{var M;return(M=A.screens[A.activeScreenId])==null?void 0:M.areas.rootId}),l=P(A=>{var M;return(M=A.screens[A.activeScreenId])==null?void 0:M.areas.areas}),u=P(A=>{var M;return(M=A.screens[A.activeScreenId])==null?void 0:M.areas.areaToOpen}),c=P(A=>{var M;return(M=A.screens[A.activeScreenId])==null?void 0:M.areas.viewports}),d=E.useRef(null),m=E.useRef(performance.now()),v=E.useRef(void 0),S=E.useRef(!1),p=E.useMemo(()=>ve.new(300,200),[]),k=E.useMemo(()=>{if(!u||!a||!c||Object.keys(c).length===0)return null;const A=ve.new(u.position.x,u.position.y);return Ap(A,{layout:s},c,p)},[u==null?void 0:u.position.x,u==null?void 0:u.position.y,s,a,l,c,p]),h=E.useMemo(()=>k?c[k]:null,[k,c]),f=E.useMemo(()=>{if(!u||!h)return"stack";const A=ve.new(u.position.x,u.position.y);return _p(h,A)},[h,u==null?void 0:u.position.x,u==null?void 0:u.position.y,u]),g=E.useCallback((A,M)=>{S.current||(S.current=!0,v.current=requestAnimationFrame(()=>{n({x:A,y:M}),S.current=!1}))},[n]),C=E.useCallback(A=>{A.preventDefault(),g(A.clientX,A.clientY)},[g]),w=E.useCallback(A=>{if(!(e!=null&&e.type)||!(e!=null&&e.id)||!(e!=null&&e.state)){console.warn("useAreaDragAndDrop - Missing required params for handleDragStart");return}const{type:M,id:L,state:N}=e;document.body.style.userSelect="none";const _=A.currentTarget.getBoundingClientRect();d.current={startX:A.clientX-_.left,startY:A.clientY-_.top,sourceId:L},m.current=performance.now();const j=document.createElement("div");j.style.width="1px",j.style.height="1px",j.style.position="fixed",j.style.top="-1px",j.style.left="-1px",j.style.opacity="0.01",j.style.pointerEvents="none",document.body.appendChild(j),A.dataTransfer.effectAllowed="move",A.dataTransfer.setData("text/plain",JSON.stringify({type:"menubar",areaType:M,areaId:L})),A.dataTransfer.setDragImage(j,0,0),requestAnimationFrame(()=>{document.body.contains(j)&&document.body.removeChild(j),t({position:{x:A.clientX,y:A.clientY},area:{type:M,state:{...N,sourceId:L}}})}),document.addEventListener("dragover",C)},[e,t,C]),y=E.useCallback(A=>{A.dataTransfer.types.includes("karmyc/tab-drag-source")||(A.preventDefault(),A.dataTransfer.dropEffect="move")},[]),I=E.useCallback(A=>{let M;try{const j=A.dataTransfer.getData("text/plain");j&&(M=JSON.parse(j))}catch(j){console.warn("[DropZone] handleDrop - Could not parse drag data",j),o();return}if(M&&M.type==="tab"){console.warn('[DropZone] handleDrop - Received "tab" type drag, assuming handled by AreaTabs. Aborting here.'),o();return}if(A.preventDefault(),A.stopPropagation(),!M){console.warn("[DropZone] handleDrop - Invalid or missing source data type after tab check"),o();return}const L=M.areaId;let N=null;const _=document.elementsFromPoint(A.clientX,A.clientY);for(const j of _){if(j.classList.contains("global-drag-overlay")||j.classList.contains("areaToOpenContainer"))continue;const D=j.closest("[data-areaid]");if(D){const R=D.dataset.areaid;if(R&&R!=="-1"&&R!==L&&!Object.values(s).some(T=>T.type==="area_row"&&T.orientation==="stack"&&T.areas.some(O=>O.id===R))){N=R;break}}}if(!N){console.warn("[DropZone] handleDrop: no targetAreaId found"),o();return}try{if(g(A.clientX,A.clientY),Object.values(s).some(D=>D.type==="area_row"&&D.orientation==="stack"&&D.id===N)&&f==="stack"){const D=Object.values(s).find(R=>R.type==="area_row"&&R.orientation==="stack"&&R.id===N);if(D){const R=Object.values(s).find(T=>T.type==="area_row"&&T.areas.some(O=>O.id===L));if(R){const T=R.areas.filter(U=>U.id!==L),O=T.reduce((U,H)=>U+H.size,0),b=T.map(U=>({...U,size:O>0?U.size/O:1/T.length}));i({...R,areas:b})}const F={...D,areas:[...D.areas,{id:L,size:1}]};i(F),P.getState().updateArea({id:L,isLocked:!0}),o()}}else f==="stack"&&(P.getState().updateArea({id:L,isLocked:!0}),P.getState().updateArea({id:N,isLocked:!0})),r({targetId:N,placement:f}),o()}catch(j){console.error("[DropZone] handleDrop - Error during finalization:",j),o()}},[o,r,g,f,s,i]),z=E.useCallback(A=>{document.body.style.userSelect="",!(!d.current||(v.current&&cancelAnimationFrame(v.current),performance.now()-m.current<100))&&(d.current=null,o(),document.removeEventListener("dragover",C))},[o,C]);return E.useEffect(()=>()=>{v.current&&cancelAnimationFrame(v.current)},[]),{handleDragStart:w,handleDragOver:y,handleDragEnd:z,handleDrop:I,areaToOpenTargetId:k,areaToOpenTargetViewport:h,calculatedPlacement:f}},q0={lines:[],strokeWidth:3,color:"#000000",pastDiffs:[],futureDiffs:[]},eS=({id:e,viewport:t})=>{const n=P(_=>{var D;const j=(D=_.screens[_.activeScreenId])==null?void 0:D.areas;return j?j.areas[e]:void 0}),r=(n==null?void 0:n.spaceId)??null,{updateSharedState:o}=bn(),{undoSharedState:i,redoSharedState:s,getSpaceById:a}=B(),{sharedState:l,canUndo:u,canRedo:c}=B(Qv(_=>{var D,R,F,T;const j=r?_.spaces[r]:null;return{sharedState:(j==null?void 0:j.sharedState)??q0,canUndo:(((R=(D=j==null?void 0:j.sharedState)==null?void 0:D.pastDiffs)==null?void 0:R.length)??0)>0,canRedo:(((T=(F=j==null?void 0:j.sharedState)==null?void 0:F.futureDiffs)==null?void 0:T.length)??0)>0}})),{lines:d,strokeWidth:m,color:v}=l;Fe("draw/addLine",_=>{var F,T;const{line:j,spaceId:D}=_;if(!D)return;const R=((T=(F=a(D))==null?void 0:F.sharedState)==null?void 0:T.lines)??[];o(D,{lines:[...R,j],actionType:"draw/addLine",payload:{line:j}})},{history:{enabled:!0,type:"draw/addLine",getDescription:()=>"Ajout d'une ligne",getPayload:_=>({line:_.line})}}),Fe("draw/updateStrokeWidth",_=>{var F,T;const{width:j,spaceId:D}=_;if(!D)return;const R=(T=(F=a(D))==null?void 0:F.sharedState)==null?void 0:T.strokeWidth;o(D,{strokeWidth:j,actionType:"draw/updateStrokeWidth",payload:{oldValue:R,newValue:j}})},{history:{enabled:!0,type:"draw/updateStrokeWidth",getDescription:_=>`Modification de l'épaisseur : ${_.oldWidth} → ${_.width}`,getPayload:_=>({oldValue:_.oldWidth,newValue:_.width})}}),Fe("draw/clearCanvas",_=>{var R,F;const{spaceId:j}=_;if(!j)return;const D=((F=(R=a(j))==null?void 0:R.sharedState)==null?void 0:F.lines)??[];o(j,{lines:[],actionType:"draw/clearCanvas",payload:{oldValue:D,newValue:[]}})},{history:{enabled:!0,type:"draw/clearCanvas",getDescription:()=>"Effacement du dessin",getPayload:_=>{var j,D;return{oldValue:((D=(j=a(_.spaceId))==null?void 0:j.sharedState)==null?void 0:D.lines)??[],newValue:[]}}}});const S=E.useRef(null),p=E.useCallback(_=>{if(!r)return;const j=parseInt(_.target.value);Q.executeAction("draw/updateStrokeWidth",{width:j,oldWidth:m,spaceId:r})},[r,m]),k=E.useCallback(()=>{r&&Q.executeAction("draw/clearCanvas",{spaceId:r})},[r]),h=E.useCallback(()=>{r&&i(r)},[r,i]),f=E.useCallback(()=>{r&&s(r)},[r,s]),{registerComponent:g}=qe(e,"bottom-outer");E.useMemo(()=>{g(()=>x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:"white"},children:[x.jsx(Mv,{}),x.jsx("input",{ref:S,id:`stroke-width-${e}`,type:"range",min:"1",max:"20",value:m,onChange:p,style:{width:"100px",cursor:"pointer",WebkitAppearance:"none",appearance:"none",height:"4px",borderRadius:"2px",background:"#ffffff"},className:"custom-range"}),x.jsx("span",{children:m})]}),{name:"topOuterSlot",type:"menu"},{order:990,width:"auto",alignment:"right"})},[e,p,m]);const{registerComponent:C}=qe(e,"bottom-inner");E.useMemo(()=>{C(()=>x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[x.jsx("button",{onClick:h,disabled:!u,children:x.jsx(Uv,{})}),x.jsx("button",{onClick:f,disabled:!c,children:x.jsx(jv,{})}),x.jsx("button",{onClick:k,children:x.jsx(Gg,{})})]}),{name:"bottomInnerSlot",type:"menu"},{order:990,width:"auto",alignment:"center"})},[e,h,f,k,u,c]);const w=E.useRef(null),[y,I]=E.useState(!1),[z,A]=E.useState([]);E.useEffect(()=>{if(!w.current)return;const _=w.current,j=_.getContext("2d");if(!j)return;const D=Math.max(0,t.height-50);if(_.width=t.width,_.height=D,j.clearRect(0,0,_.width,_.height),!Array.isArray(d)){console.error(`[HistoryDrawingArea ${e}] Invalid drawingLines data detected (not an array):`,d);return}d.forEach((R,F)=>{if(!R||!Array.isArray(R.points)||R.points.length<2){console.warn(`[HistoryDrawingArea ${e}] Skipping invalid line data at index ${F}:`,R);return}j.beginPath(),j.moveTo(R.points[0].x,R.points[0].y);for(let T=1;T<R.points.length;T++)R.points[T]&&j.lineTo(R.points[T].x,R.points[T].y);j.strokeStyle=R.color,j.lineWidth=R.width,j.lineCap="round",j.lineJoin="round",j.stroke()})},[d,t.width,t.height,e]);const M=_=>{if(!w.current||!r)return;const D=w.current.getBoundingClientRect(),R=_.clientX-D.left,F=_.clientY-D.top;I(!0),A([{x:R,y:F}])},L=_=>{if(!y||!w.current||!r)return;const j=w.current,D=j.getBoundingClientRect(),R=_.clientX-D.left,F=_.clientY-D.top,T=[...z,{x:R,y:F}];A(T);const O=j.getContext("2d");if(!O||T.length<2)return;const b=T[T.length-2];O.beginPath(),O.moveTo(b.x,b.y),O.lineTo(R,F),O.strokeStyle=v,O.lineWidth=m,O.lineCap="round",O.lineJoin="round",O.stroke()},N=()=>{if(!y||z.length<2||!r){I(!1),A([]);return}I(!1);const _={id:`line-${Date.now()}`,points:z,color:v,width:m};Q.executeAction("draw/addLine",{line:_,spaceId:r}),A([])};return x.jsx("div",{style:{width:t.width,height:t.height,display:"flex",flexDirection:"column",background:"#ffffff",borderRadius:"4px",overflow:"hidden"},children:x.jsx("canvas",{ref:w,onMouseDown:M,onMouseMove:L,onMouseUp:N,onMouseLeave:N,style:{display:"block"}})})},tS=()=>{const{updateArea:e}=P.getState(),t=n=>{const r=n.areaId;r&&e({id:r,type:"draw-area",state:W.getInitialState("draw-area")})};return gn("draw-area",eS,{},{displayName:"Simple draw",defaultSize:{width:300,height:200},role:oe.LEAD,icon:du,supportFullscreen:!0}),Fe("area.create-draw-area",t),null},nS=({viewport:e})=>{const{activeSpaceId:t,createSpace:n,deleteSpace:r,setActive:o,updateSharedState:i,pilotMode:s,setPilotMode:a}=bn(),l=B().getAllSpaces(),u=Wr(P,f=>f.getAllAreas(),or),[c,d]=E.useState(""),[m,v]=E.useState("#1890ff"),S=E.useMemo(()=>{const f={};for(const g in l)f[g]=[];return Object.values(u).forEach(g=>{const C=g.spaceId;C&&f[C]&&f[C].push(g)}),f},[l,u]),p=E.useMemo(()=>{const f=[];for(const g in l)if(Object.prototype.hasOwnProperty.call(l,g)){const C=l[g],w=S[g]||[];f.push({id:g,space:C,isActive:g===t,areasCount:w.length})}return f},[l,t,S]),k=()=>{c.trim()&&(n(c.trim(),{color:m}),d(""))},h=(f,g)=>{i(f,{color:g})};return x.jsx("div",{style:{width:e.width,height:e.height,padding:"1rem",display:"flex",flexDirection:"column",gap:"1rem",overflow:"auto"},children:x.jsxs("div",{style:{padding:"0.25rem",border:"1px solid #eee",borderRadius:"4px",background:"#f9f9f9",flex:1,overflowY:"auto"},children:[x.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",padding:"0.5rem",borderBottom:"1px solid #eee"},children:x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[x.jsx("span",{children:"Pilot mode:"}),x.jsx("button",{onClick:()=>a(s==="MANUAL"?"AUTO":"MANUAL"),style:{padding:"0.25rem 0.5rem",borderRadius:"4px",border:"1px solid #ccc",background:s==="MANUAL"?"#1890ff":"white",color:s==="MANUAL"?"white":"black",cursor:"pointer"},children:s==="MANUAL"?"Manuel":"Automatique"})]})}),p.length===0&&x.jsx("p",{style:{color:"#999",fontStyle:"italic"},children:"No space created. Create your first space below."}),p.map(({id:f,space:g,isActive:C,areasCount:w})=>x.jsxs("div",{style:{padding:"1rem",marginBottom:"0.5rem",border:`2px solid ${C?"#1890ff":"#eee"}`,borderRadius:"4px",background:C?"#e6f7ff":"white",cursor:"pointer",transition:"all 0.2s"},onClick:()=>{o(f),a("MANUAL")},children:[x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[x.jsx("h4",{style:{margin:0},children:g.name}),x.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[x.jsx("input",{type:"color",value:g.sharedState.color||"#1890ff",onChange:y=>h(f,y.target.value),style:{height:"26px",width:"40px",padding:"0",border:"1px solid #ccc",borderRadius:"4px"},onClick:y=>y.stopPropagation()}),x.jsx("button",{onClick:y=>{y.stopPropagation(),window.confirm(`Supprimer l'espace "${g.name}" ?`)&&r(f)},style:{padding:"0.25rem 0.5rem",borderRadius:"4px",border:"none",background:"#ff4d4f",color:"white",cursor:"pointer"},children:"Delete"})]})]}),x.jsx("div",{style:{fontSize:"0.9rem",color:"#666"},children:w===0?x.jsx("span",{style:{fontStyle:"italic"},children:"No area in this space"}):x.jsxs(x.Fragment,{children:[x.jsx("b",{children:w})," area",w>1?"s":""," in this space"]})})]},f)),x.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[x.jsx("input",{type:"text",value:c,onChange:f=>d(f.target.value),placeholder:"Space name",style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #ccc",flex:1}}),x.jsx("input",{type:"color",value:m,onChange:f=>v(f.target.value),style:{height:"38px",width:"50px",padding:"0",border:"1px solid #ccc",borderRadius:"4px"}}),x.jsx("button",{onClick:k,disabled:!c.trim(),style:{padding:"0.5rem 1rem",borderRadius:"4px",border:"none",background:"#1890ff",color:"white",cursor:c.trim()?"pointer":"not-allowed",opacity:c.trim()?1:.6},children:"+"})]})]})})},rS=()=>{const{updateArea:e}=P.getState(),{registerComponent:t}=qe("space-manager-area","bottom-outer"),n=B().getAllSpaces(),r=o=>{const i=o.areaId;i&&e({id:i,type:"space-manager-area",state:W.getInitialState("space-manager-area")})};return E.useMemo(()=>{t(()=>x.jsxs("div",{style:{color:"white"},children:[Object.keys(n).length," available space",Object.keys(n).length>1?"s":""]}),{name:"bottomOuterSlot",type:"menu"},{order:990,width:"auto",alignment:"center"})},[t]),gn("space-manager-area",nS,{},{displayName:"Space Manager",defaultSize:{width:400,height:500},supportedActions:["delete","move","resize"],role:oe.SELF,icon:av}),Fe("area.create-space-manager-area",r),null};function oS(e){const t=parseInt(e.substring(1,3),16),n=parseInt(e.substring(3,5),16),r=parseInt(e.substring(5,7),16);return(.299*t+.587*n+.114*r)/255>.5?"#000000":"#ffffff"}const iS=({id:e,state:t,viewport:n,targetSpace:r})=>{var f,g,C,w;const{activeSpaceId:o,updateSharedState:i}=bn(),s=P(),a=s.activeScreenId,l=((f=s.screens[a])==null?void 0:f.areas.areas)||{},u=(g=s.screens[a])==null?void 0:g.areas.lastLeadAreaId,[c,d]=E.useState(r||o||"");E.useEffect(()=>{u&&c!==u&&d(u)},[u]);const m=u?l[u]:null,v=m==null?void 0:m.spaceId,S=B(),k=(v?(w=(C=S.spaces[v])==null?void 0:C.sharedState)==null?void 0:w.color:void 0)||t.color||"#ffffff",h=y=>{var L,N;const I=P.getState().activeScreenId,z=(L=P.getState().screens[I])==null?void 0:L.areas.lastLeadAreaId,A=((N=P.getState().screens[I])==null?void 0:N.areas.areas)||{},M=z?A[z]:null;M!=null&&M.spaceId&&i(M.spaceId,{color:y})};return x.jsxs("div",{style:{width:n.width,height:n.height},children:[x.jsx("style",{children:`
                input.color-picker::-webkit-color-swatch {
                    border: 0 none;
                    }
                input.color-picker::-moz-color-swatch {
                    border: 0 none;
                    }
                `}),x.jsx("input",{className:"color-picker",type:"color",value:k,onChange:y=>h(y.target.value),style:{width:"100%",height:"100%",border:"0 none",borderColor:k,cursor:"pointer",padding:"0",backgroundColor:k,outline:"0 none"}}),x.jsx("div",{style:{fontSize:"1.25rem",color:oS(k),position:"absolute",top:"0",left:"0",height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",pointerEvents:"none"},children:x.jsx("code",{children:k})})]})},sS=()=>{const{updateArea:e}=P.getState(),t=n=>{const r=n.areaId;r&&e({id:r,type:"color-picker-area",state:W.getInitialState("color-picker-area")})};return gn("color-picker-area",iS,{},{displayName:"Color Picker",defaultSize:{width:300,height:200},role:oe.FOLLOW,icon:Op}),Fe("area.create-color-picker-area",t),null},aS=({state:e,targetSpace:t})=>{var v,S,p,k;const{activeSpaceId:n}=bn(),r=P(),o=r.activeScreenId,i=((v=r.screens[o])==null?void 0:v.areas.areas)||{},s=(S=r.screens[o])==null?void 0:S.areas.lastLeadAreaId,[a,l]=E.useState(t||n||"");E.useEffect(()=>{s&&a!==s&&l(s)},[s]);const u=s?i[s]:null,c=u==null?void 0:u.spaceId,d=B(),m=c?(k=(p=d.spaces[c])==null?void 0:p.sharedState)==null?void 0:k.color:void 0;return x.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",padding:"1rem",background:"#fff",borderRadius:"8px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)"},children:[x.jsxs("div",{children:[x.jsx("strong",{children:"LEAD area"})," : ",u?`${u.type} (id : ${u.id})`:"Aucune"]}),x.jsxs("div",{children:[x.jsx("strong",{children:"Espace du LEAD"})," : ",c||"Aucun"]}),x.jsxs("div",{children:["Couleur du space du LEAD : ",x.jsx("span",{style:{color:m},children:m||"N/A"})]})]})},lS=()=>{const{updateArea:e}=P.getState(),t=n=>{const r=n.areaId;r&&e({id:r,type:"debug-area",state:W.getInitialState("debug-area")})};return gn("debug-area",aS,{},{displayName:"Debug",defaultSize:{width:300,height:200},role:oe.FOLLOW,icon:Op}),Fe("area.create-debug-area",t),null},uS=""+new URL("icon-CwewC0cV.svg",import.meta.url).href,cS=({})=>{const{registerComponent:e}=qe("apptitle","top-outer"),{registerComponent:t}=qe("app","top-outer"),{registerComponent:n}=qe("app","bottom-outer");return E.useMemo(()=>{n(()=>x.jsx("div",{style:{color:"white",padding:"8px"},children:"Screen management 💪==>"}),{name:"screen-status-bar",type:"status"},{order:990,alignment:"right",width:"auto"}),t(()=>x.jsx(y0,{}),{name:"topOuterLeftSlot",type:"menu"},{order:990,width:"auto",alignment:"left"}),t(()=>x.jsx(H0,{}),{name:"topOuterLayoutSlot",type:"menu"},{order:991,width:"auto",alignment:"left"}),e(()=>{const{activeSpaceId:r,getSpaceById:o}=bn(),i=r?o(r):null;return x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"white"},children:[x.jsx("img",{src:uS,style:{width:"28px",height:"28px"}}),x.jsx("strong",{children:"Karmyc core Demo"}),i&&x.jsx("span",{style:{marginLeft:"8px",opacity:.7},children:i.name})]})},{name:"topOuterLeftSlot",type:"menu"},{order:990,width:"auto",alignment:"left"}),e(()=>x.jsx("a",{href:"https://github.com/yannloosli/karmyc",target:"_blank",style:{display:"flex",alignItems:"center"},children:x.jsx("svg",{viewBox:"0 0 24 24",style:{width:"28px",height:"28px",fill:"white"},children:x.jsx("path",{d:"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"})})}),{name:"github_link",type:"link"},{order:990,width:"auto",alignment:"right"})},[n,t,e]),x.jsxs(x.Fragment,{children:[x.jsx(W0,{}),x.jsx(Q0,{}),x.jsx(G0,{}),x.jsx(sS,{}),x.jsx(lS,{}),x.jsx(Z0,{}),x.jsx(tS,{}),x.jsx(rS,{})]})};function dS(e,t){const n=Math.abs(t.x),r=Math.abs(t.y),o=n>r,i=r>n;if(o)switch(e){case"ne":case"se":return t.x<0;case"nw":case"sw":return t.x>0}else if(i)switch(e){case"ne":case"nw":return t.y>0;case"se":case"sw":return t.y<0}switch(e){case"ne":return t.x<0&&t.y>0;case"nw":return t.x>0&&t.y>0;case"se":return t.x<0&&t.y<0;case"sw":return t.x>0&&t.y<0;default:return console.warn("Direction de coin inconnue dans determineIfMovingInwards:",e),!1}}const fS=(e,t,n,r,o,i)=>{var z;if((z=P.getState().screens[P.getState().activeScreenId])==null?void 0:z.areas.isDetached)return;e.preventDefault();const a=ve.fromEvent(e);let l=a,u=null,c=null;const d=()=>{var M;const A=P.getState();return(M=A.screens[A.activeScreenId])==null?void 0:M.areas},m=d();if(!m){console.error("handleAreaDragFromCorner: Could not get active screen state.");return}const v=m.layout,S=m.rootId;if(!S||!v||!v[S]){console.error("handleAreaDragFromCorner: Invalid initial active screen state (rootId or layout missing/invalid)");return}const k=En(v)[n];function h(A){const M=A?r.width:r.height,L=Vi*2;if(M<L){g(),u&&u(l);return}const N=P.getState().getAreaById(n);if(!N){console.error("Source area data not found");return}const _=P.getState().splitArea({areaIdToSplit:n,parentRowId:k,horizontal:A,corner:t});if(!_||!_.newRowId||_.separatorIndex===void 0){console.error("Failed to split area or get split result info. Switching to join/move."),g(),u&&u(l);return}const{newRowId:j,separatorIndex:D}=_;setTimeout(()=>{const F=d();if(!F){console.error("Failed to get active screen state after split");return}const T=F.layout[j];if(!T||T.type!=="area_row"){console.error(`Split seemed successful but row ${j} not found or not a row in active screen state.`);return}if(!T.areas.every(H=>H.size>=.1)){console.error("Invalid sizes detected in new row layout");return}const b=T.areas[D].id;P.getState().updateArea({id:b,type:N.type,state:{...N.state}});const U=T.areas.map(()=>1/T.areas.length);P.getState().setRowSizes({rowId:j,sizes:U}),f(T,D,o),u&&u(l)},0)}function f(A,M,L){var Z,ne;const N=A.orientation==="horizontal",_=(Z=A.areas[M-1])==null?void 0:Z.id,j=(ne=A.areas[M])==null?void 0:ne.id;if(!_||!j){console.error("Cannot set up resize handlers: invalid separator index or missing areas.",{rowToResize:A,sepIndex:M}),u=null,c=()=>{};return}const D=A.areas.map(X=>X.size),R=D[M-1]+D[M];if(R<=0){console.error("Invalid total size for resize operation"),u=null,c=()=>{};return}let F=null;const T=75;let O=.5;const b=X=>{if(X.some(ye=>ye<.1)){console.warn("Invalid sizes detected, adjusting to minimum values");const ye=X.map(ie=>Math.max(ie,.1)),Me=ye.reduce((ie,fe)=>ie+fe,0),ue=ye.map(ie=>ie/Me);P.getState().setRowSizes({rowId:A.id,sizes:ue})}else P.getState().setRowSizes({rowId:A.id,sizes:X})},U=X=>{F!==null&&clearTimeout(F),F=setTimeout(()=>{F=null,b(X)},T)},H=()=>{F!==null&&(clearTimeout(F),F=null)};u=X=>{const re=d();if(!re)return;const q=re.layout,ye=q[A.id],Me=re.rootId;if(!ye||!Me||ye.type!=="area_row"){console.warn("Resize handler: Row or rootId not found/invalid in current active screen state.");return}const ue=kr(q,Me,ko()),ie=ue[_],fe=ue[j];if(!ie||!fe){console.warn("Resize handler: Viewports for adjacent areas not found.");return}const Ne=N?{left:ie.left,top:ie.top,width:ie.width+fe.width,height:ie.height}:{left:ie.left,top:ie.top,width:ie.width,height:ie.height+fe.height},Ke=N?Ne.width:Ne.height;if(Ke<=0){console.warn("Resize handler: Shared viewport size is zero or negative.");return}const vn=Math.max(.1,Vi/Ke),ce=N?Ne.left:Ne.top,pt=ce+Ke,Qe=N?X.x:X.y,Ft=Ep(vn,1-vn,(Qe-ce)/(pt-ce));O=Ft,L({rowId:A.id,separatorIndex:M,t:Ft});const Re=Ft*R,To=(1-Ft)*R,Sn=ye.areas.map((kt,Pt)=>Pt===M-1?Re:Pt===M?To:kt.size),Ye=.1;if(Sn.some(kt=>kt<Ye)){console.warn("Invalid sizes detected in preview, adjusting to minimum values");const kt=Sn.map(Ge=>Math.max(Ge,Ye)),Pt=kt.reduce((Ge,Po)=>Ge+Po,0),wn=kt.map(Ge=>Ge/Pt);U(wn)}else{const kt=Sn.reduce((Pt,wn)=>Pt+wn,0);if(kt>0){const Pt=Sn.map(wn=>wn/kt);U(Pt)}else console.warn("Resize handler: Debounce skipped, zero total size.")}},c=()=>{var ie;H();const X=O*R,re=(1-O)*R,q=(ie=d())==null?void 0:ie.layout[A.id];if(!q||q.type!=="area_row"){console.error("Resize mouseup: Cannot find final row state."),L(null),u=null,c=null;return}const ye=q.areas.map((fe,Ne)=>Ne===M-1?X:Ne===M?re:fe.size),Me=ye.reduce((fe,Ne)=>fe+Ne,0);let ue=ye;if(Me>0)ue=ye.map(fe=>fe/Me);else{console.error("Resize mouseup: Final total size is zero, cannot normalize. Using equal distribution as fallback.");const fe=q.areas.length;ue=Array(fe).fill(1/fe)}b(ue),setTimeout(()=>L(null),0),u=null,c=null}}function g(){const A=k?v[k]:null;if(!A||A.type!=="area_row"){console.error("Join/Move setup: Source area does not have a valid parent row. Cannot determine siblings."),u=null,c=()=>{P.getState().setJoinPreview(null)};return}const M=A.areas.findIndex(D=>D.id===n);if(M===-1){console.error(`Join/Move setup: Source area ${n} not found within its supposed parent row ${k}.`),u=null,c=()=>{P.getState().setJoinPreview(null)};return}const L=A.areas.filter((D,R)=>R!==M).map(D=>D.id),N=M>0?A.areas[M-1].id:null,_=M<A.areas.length-1?A.areas[M+1].id:null,j=[N,_].filter(D=>D!==null);u=D=>{var H;const R=d();if(!R)return;const F=R.layout,T=R.rootId;if(!T)return;const O=kr(F,T,ko());let b=null,U=null;for(const Z of j){const ne=O[Z];if(ne&&D.x>=ne.left&&D.x<=ne.left+ne.width&&D.y>=ne.top&&D.y<=ne.top+ne.height){b=Z;const X=O[n];if(X){const re=ne,q=re.left+re.width/2-(X.left+X.width/2),ye=re.top+re.height/2-(X.top+X.height/2);A.orientation==="horizontal"?U=q>0?"e":"w":U=ye>0?"s":"n"}break}}b&&U?P.getState().setJoinPreview({areaId:b,movingInDirection:U,eligibleAreaIds:L}):((H=d())==null?void 0:H.joinPreview)!==null&&P.getState().setJoinPreview(null)},c=()=>{var F;const D=d(),R=D==null?void 0:D.joinPreview;R&&R.areaId&&R.movingInDirection&&j.includes(R.areaId)&&P.getState().joinOrMoveArea({sourceAreaId:n,targetAreaId:R.areaId,direction:R.movingInDirection}),((F=d())==null?void 0:F.joinPreview)!==null&&P.getState().setJoinPreview(null),u=null,c=null}}let C=!1;const w=A=>{const M=new ve(A.x-a.x,A.y-a.y);if(M.length()<10)return;window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",I);const N=dS(t,M),_=Math.abs(M.x),j=Math.abs(M.y),D=_>j;N?h(D):g(),C=!0,u&&u(A)},y=A=>{const M=ve.fromEvent(A);l=M,C?u&&u(M):w(M)},I=A=>{var M;document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",I),C?c?c():console.warn("Mouse up, direction determined but no final handler set."):((M=d())==null?void 0:M.joinPreview)!==null&&P.getState().setJoinPreview(null)};document.addEventListener("mousemove",y),document.addEventListener("mouseup",I)};class pS extends rt.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){console.error("Area error:",t,n)}render(){var n;if(this.state.hasError)return x.jsxs("div",{style:{position:"absolute",left:this.props.viewport.left,top:this.props.viewport.top,width:this.props.viewport.width,height:this.props.viewport.height,backgroundColor:"#fff5f5",border:"1px solid #feb2b2",borderRadius:"4px",padding:"16px",color:"#c53030"},children:[x.jsx("h3",{children:"Une erreur est survenue dans la zone"}),x.jsx("p",{children:(n=this.state.error)==null?void 0:n.message})]});const t=this.props.component;return x.jsx(t,{id:this.props.areaId,state:this.props.areaState,type:this.props.type,viewport:this.props.viewport,Component:t})}}const hS=()=>W._roleMap||{},oh=()=>{const e=Ve(d=>d.isVisible&&d.menuType==="custom"),t=Ve(d=>d.position),n=Ve(d=>d.closeContextMenu),r=Ve(d=>d.targetId)||"",o=hS(),i=Array.from(W.getRegisteredTypes()),s=B(d=>d.spaces),a=B(d=>d.activeSpaceId),l=[{role:oe.LEAD,title:"LEAD",items:[]},{role:oe.FOLLOW,title:"FOLLOW",items:[]},{role:oe.SELF,title:"SELF",items:[]}];i.forEach(d=>{const m=o[d]||oe.SELF,v=l.find(S=>S.role===m);v&&v.items.push(d)});const u=d=>{P.getState().updateArea({id:r,type:d}),n&&n()},c=d=>{P.getState().updateArea({id:r,spaceId:d}),n&&n()};return x.jsx(yu,{anchorPoint:t,state:e?"open":"closed",onClose:n,transition:!0,direction:"right",menuClassName:"switch-area-type-context-menu",children:l.map(d=>x.jsxs("div",{style:{flex:1,margin:"0 8px",width:"250px"},children:[x.jsx("div",{style:{padding:"4px 0 16px",marginBottom:8,textAlign:"left",borderBottom:"2px ridge #444",paddingBottom:4},children:d.title}),d.items.map(m=>{const v=W.getIcon(m);return x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer",marginBottom:4},onClick:()=>u(m),onMouseDown:S=>S.preventDefault(),children:[x.jsx(v,{style:{width:16,height:16}}),W.getDisplayName(m)]},m)}),d.role===oe.LEAD&&x.jsxs(x.Fragment,{children:[x.jsx("div",{style:{padding:"4px 0 16px",marginTop:16,marginBottom:8,textAlign:"left",borderBottom:"2px ridge #444",paddingBottom:4},children:"SPACES"}),Object.entries(s).map(([m,v])=>{var S;return x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer",marginBottom:4,backgroundColor:m===a?"rgba(255, 255, 255, 0.1)":"transparent",padding:"4px 8px",borderRadius:4},onClick:()=>c(m),onMouseDown:p=>p.preventDefault(),children:[x.jsx("div",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:((S=v.sharedState)==null?void 0:S.color)||"#666"}}),v.name]},m)})]})]},d.role))})},ih=({state:e,type:t,id:n,style:r})=>{var z,A,M,L,N;const[o,i]=E.useState(!1),s=P(_=>_.updateArea),a=P(_=>{var j;return((j=_.getAreaById(n))==null?void 0:j.isLocked)||!1}),l=P(_=>{var j;return((j=_.options)==null?void 0:j.manageableAreas)??!0}),u=P(_=>_.getAreaById(n)),c=(u==null?void 0:u.enableFullscreen)??!1,d=((z=W._supportFullscreenMap)==null?void 0:z[t])??!1;P(_=>_.updateLayout),P(_=>{var j;return(j=_.screens[_.activeScreenId])==null?void 0:j.areas.rootId});const{handleDragStart:m,handleDragOver:v,handleDrop:S,handleDragEnd:p}=rh({type:t,id:n,state:e}),k=Ve(_=>_.openCustomContextMenu),h=E.useRef(null);E.useRef(null);const f=_=>{if(l&&h.current){const j=h.current.getBoundingClientRect();k({targetId:n,position:{x:j.left,y:j.top},component:x.jsx(oh,{})})}},g=B(_=>_.getSpaceById((u==null?void 0:u.spaceId)||""));let C=((A=g==null?void 0:g.sharedState)==null?void 0:A.color)||"#0000ff";if((u==null?void 0:u.role)==="FOLLOW"){const _=P.getState().activeScreenId,j=(M=P.getState().screens[_])==null?void 0:M.areas.lastLeadAreaId,D=((L=P.getState().screens[_])==null?void 0:L.areas.areas)||{},R=j?D[j]:null,F=R==null?void 0:R.spaceId;if(F){const T=B.getState().spaces[F];T&&((N=T.sharedState)!=null&&N.color)&&(C=T.sharedState.color)}}const w=_=>{l&&(_.stopPropagation(),P.getState().detachArea(n))},y=_=>{l&&(_.stopPropagation(),P.getState().removeArea(n))},I=_=>{var D,R;if(!l)return;_.stopPropagation();const j=document.querySelector(`[data-areaid="${n}"]`);if(j)if(c)document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),s({id:n,enableFullscreen:!1,previousLayout:void 0,previousRootId:void 0});else{const F=(D=P.getState().screens[P.getState().activeScreenId])==null?void 0:D.areas.layout,T=(R=P.getState().screens[P.getState().activeScreenId])==null?void 0:R.areas.rootId;s({id:n,enableFullscreen:!0,previousLayout:F,previousRootId:T}),j.requestFullscreen?j.requestFullscreen():j.webkitRequestFullscreen?j.webkitRequestFullscreen():j.msRequestFullscreen&&j.msRequestFullscreen();const O=()=>{!document.fullscreenElement&&!document.webkitFullscreenElement&&!document.msFullscreenElement&&(s({id:n,enableFullscreen:!1,previousLayout:void 0,previousRootId:void 0}),document.removeEventListener("fullscreenchange",O),document.removeEventListener("webkitfullscreenchange",O),document.removeEventListener("msfullscreenchange",O))};document.addEventListener("fullscreenchange",O),document.addEventListener("webkitfullscreenchange",O),document.addEventListener("msfullscreenchange",O)}};return x.jsxs("div",{className:"select-area-button",draggable:l&&!a&&!c,onDragStart:_=>{!l||c||(i(!0),m(_),requestAnimationFrame(()=>{h.current&&(h.current.style.pointerEvents="none",h.current.style.opacity="0.5")}))},onDragOver:_=>{!l||c||v(_)},onDrop:_=>{!l||c||o||S(_)},onDragEnd:_=>{!l||c||(i(!1),h.current.style.pointerEvents="auto",h.current.style.opacity="1",p(_))},onContextMenu:_=>{!l||c||(_.preventDefault(),f())},style:{cursor:!l||c||a?"default":o?"grabbing":"grab","--space-color":C,pointerEvents:"auto",height:gt+"px",...r},ref:h,children:[x.jsxs("div",{className:"select-area-button__main",children:[E.createElement(W.getIcon(t),{className:"select-area-button__icon",style:{color:C}}),W.getDisplayName(t)]}),x.jsxs("div",{className:"select-area-button__action-icons",children:[l&&!a&&x.jsxs(x.Fragment,{children:[x.jsx("button",{className:"select-area-icons select-area-button__detach",onClick:w,children:x.jsx(Rp,{})}),x.jsx("button",{className:"select-area-icons select-area-button__close",onClick:y,children:x.jsx(Fp,{})})]}),l&&x.jsxs(x.Fragment,{children:[d&&x.jsx("button",{className:"select-area-icons select-area-button__fullscreen",onClick:I,children:c?x.jsx(kv,{}):x.jsx(wv,{})}),x.jsx("button",{className:`select-area-icons select-area-button__lock-icon ${a?"locked":""}`,onClick:_=>{_.stopPropagation(),s({id:n,isLocked:!a})},children:a?x.jsx(vv,{}):x.jsx(yv,{})})]})]})]})},mS=rt.memo(({rowId:e,row:t,areas:n})=>{const r=P(p=>p.updateLayout),o=P(p=>p.setActiveArea);P(p=>{var k;return(k=p.screens[p.activeScreenId])==null?void 0:k.areas.activeAreaId});const[i,s]=E.useState({targetId:null,position:null}),[a,l]=E.useState(null),u=p=>{const k=n[p];k&&(r({id:e,activeTabId:p}),o(p),k.spaceId&&B.getState().setActiveSpace(k.spaceId))},c=(p,k)=>{p.stopPropagation(),l(k),p.dataTransfer.setData("text/plain",JSON.stringify({type:"tab",areaId:k,sourceRowId:e})),p.dataTransfer.setData("karmyc/tab-drag-source","true"),p.dataTransfer.effectAllowed="move"},d=(p,k)=>{if(p.dataTransfer.types.includes("karmyc/tab-drag-source")){p.preventDefault(),p.dataTransfer.dropEffect="move";const f=p.currentTarget.getBoundingClientRect(),g=f.left+f.width/2,C=p.clientX<g?"before":"after";(i.targetId!==k||i.position!==C)&&s({targetId:k,position:C})}},m=p=>{p.currentTarget.contains(p.relatedTarget)||s({targetId:null,position:null})},v=(p,k)=>{try{const h=p.dataTransfer.getData("text/plain");if(!h){s({targetId:null,position:null});return}const f=JSON.parse(h);if(f.type==="tab"&&f.sourceRowId===e){p.preventDefault(),p.stopPropagation();const g=f.areaId,{targetId:C,position:w}=i;if(g===k&&C!==k){s({targetId:null,position:null});return}if(g===k&&C===k&&w===null){s({targetId:null,position:null});return}const y=[...t.areas],I=y.findIndex(N=>N.id===g),z=t.areas.findIndex(N=>N.id===k);if(I===-1||z===-1){s({targetId:null,position:null});return}const[A]=y.splice(I,1);let M=z;I<z&&M--,g===k&&(M=I);let L=M;C===k&&w==="after"&&(L=M+1),y.splice(L,0,A),r({id:e,areas:y,activeTabId:t.activeTabId})}}catch(h){console.error("Error handling tab drop:",h)}s({targetId:null,position:null}),l(null)},S=p=>{l(null),s({targetId:null,position:null})};return x.jsx("div",{className:"area-tabs",onDragLeave:m,children:t.areas.map(({id:p})=>{const k=n[p];if(!k)return null;const h=t.activeTabId===p,g=i.targetId===p?`drop-indicator-${i.position}`:"",C=a===p;return x.jsx("div",{className:`area-tab ${h?"area-tab--active":""} ${g} ${C?"is-dragging-source":""}`,onClick:()=>u(p),draggable:k.isLocked,onDragStart:w=>k.isLocked?c(w,p):void 0,onDragOver:w=>d(w,p),onDrop:w=>v(w,p),onDragEnd:S,"data-areaid":p,children:x.jsx(ih,{id:p,state:k.state,type:k.type})},p)})})}),yS=rt.memo(({id:e,layout:t,areas:n,viewport:r,setResizePreview:o})=>{var l;const i=t.activeTabId||((l=t.areas[0])==null?void 0:l.id),s=i?n[i]:null;if(!s)return null;const a=W.getComponent(s.type);return a?x.jsxs("div",{className:"area-stack",style:{left:r.left,top:r.top,width:r.width,height:r.height},"data-areaid":e,children:[x.jsx(mS,{rowId:t.id,row:t,areas:n}),x.jsx("div",{className:"area-stack__content",children:x.jsx(gu,{isChildOfStack:!0,id:i,Component:a,state:s.state,type:s.type,viewport:{left:0,top:0,width:r.width,height:r.height},setResizePreview:o,raised:!!s.raised})})]}):null}),gu=({id:e,Component:t,state:n,type:r,viewport:o,raised:i,isChildOfStack:s=!1,setResizePreview:a})=>{o||(console.warn(`No viewport found for area ${e}, using default viewport`),o={left:0,top:0,width:100,height:100});const l=P(w=>{var y;return((y=w.screens[w.activeScreenId])==null?void 0:y.areas.activeAreaId)===e}),u=P(w=>w.setActiveArea),c=E.useRef(null),d=P(w=>w.getAreaById(e)),m=B(w=>w.setActiveSpace),v=B(w=>w.activeSpaceId),S=B(w=>w.pilotMode),p=B(w=>w.spaces),k=P(w=>{var y;return((y=w.options)==null?void 0:y.resizableAreas)??!0}),h=P(w=>{var y;return((y=w.options)==null?void 0:y.manageableAreas)??!0});E.useEffect(()=>{var w,y;if(v)if(S==="AUTO"&&(d==null?void 0:d.role)===oe.FOLLOW){const I=P.getState().activeScreenId,z=(w=P.getState().screens[I])==null?void 0:w.areas.lastLeadAreaId,A=((y=P.getState().screens[I])==null?void 0:y.areas.areas)||{},M=z?A[z]:null;M&&M.spaceId===v&&u(M.id)}else S==="MANUAL"&&(d==null?void 0:d.spaceId)!==v&&P.getState().updateArea({id:e,spaceId:v})},[v,d==null?void 0:d.role,S]);const f=()=>{if(!l&&(u(e),(d==null?void 0:d.role)===oe.LEAD&&S!=="MANUAL"))if(d.spaceId)m(d.spaceId);else{const w=Object.keys(p);if(w.length>0){const y=v||w[0];P.getState().updateArea({id:e,spaceId:y}),m(y)}else{const y=B.getState().addSpace({name:`Space for ${d.type}`,sharedState:{}});y&&(P.getState().updateArea({id:e,spaceId:y}),m(y))}}},g=P(w=>w.activeScreenId),C=P(w=>{var y;return(y=w.screens[g])==null?void 0:y.isDetached})||!1;return x.jsxs(ug.Provider,{value:e,children:[!C&&!s&&x.jsx(ih,{id:e,state:n,type:r}),x.jsx(ol,{areaId:e,areaType:r,areaState:n,viewport:o,children:x.jsxs("div",{ref:c,"data-areaid":e,className:`area ${i?"area--raised":""}`,style:{width:"100%",height:C||d!=null&&d.enableFullscreen?"100%":`calc(${typeof o.height=="string"?o.height:o.height+"px"} - ${gt}px)`},onClick:f,children:[!C&&!s&&k&&h&&["ne","nw","se","sw"].map(w=>x.jsx("div",{className:`area__corner area__corner--${w}`,onMouseDown:y=>fS(y.nativeEvent,w,e,o,a)},w)),x.jsx("div",{className:`area-main-content-wrapper ${r}`,style:{opacity:l?1:.9,height:"100%",width:d!=null&&d.enableFullscreen?"100vw":"100%",top:d!=null&&d.enableFullscreen?0:"auto",left:d!=null&&d.enableFullscreen?0:"auto",zIndex:d!=null&&d.enableFullscreen?9999:"auto"},children:x.jsx(pS,{component:t,areaId:e,areaState:n,type:r,viewport:{left:0,top:0,width:d!=null&&d.enableFullscreen?window.innerWidth:o.width,height:d!=null&&d.enableFullscreen?window.innerHeight:o.height-(C?0:gt)}})})]})})]})},gS=rt.memo(({id:e,viewport:t,setResizePreview:n})=>{const r=P(N=>N.getAreaById(e)),o=P(N=>{var _;return(_=N.screens[N.activeScreenId])==null?void 0:_.areas.layout[e]}),i=P(N=>{var _;return(_=N.screens[N.activeScreenId])==null?void 0:_.areas.areas}),s=P(N=>N.activeScreenId),a=P(N=>{var _;return(_=N.screens[s])==null?void 0:_.isDetached})||!1,l=P(N=>{var j;const _=(j=N.screens[N.activeScreenId])==null?void 0:j.areas.layout;if(!_)return!1;for(const[,D]of Object.entries(_))if(D.type==="area_row"&&D.orientation==="stack"&&D.areas.some(R=>R.id===e))return!0;return!1}),u=(o==null?void 0:o.type)==="area_row",c=u?o:null,d=u&&c.orientation==="stack",m=u&&!d,v=r!=null&&r.type?W.getComponent(r.type):null;let S=e,p=r,k=v;d&&(c.activeTabId?(S=c.activeTabId,p=i==null?void 0:i[S],k=p!=null&&p.type?W.getComponent(p.type):null):(p=void 0,k=null));const{getComponents:h}=qe((p==null?void 0:p.type)||"","top-outer"),{getComponents:f}=qe((p==null?void 0:p.type)||"","bottom-outer"),g=h(),C=f(),w=g.length>0,y=C.length>0,I=w?gt:0,z=y?gt:0,A=E.useMemo(()=>a?t:{...t,top:t.top,height:t.height-(I+z)},[t,a,I,z,e]),M=E.useMemo(()=>({left:0,top:0,width:t.width||0,height:A.height||0}),[t.width,A.height]),L={position:"absolute",left:`${t.left||0}px`,top:a?"0px":`${A.top||0}px`,width:`${t.width||0}px`,height:a?"100%":`${t.height||0}px`,boxSizing:"border-box",overflow:"hidden"};return l&&!d?null:(!e.includes("row-")||d)&&e!=="root"&&x.jsxs("div",{className:"area-container "+e,style:L,"data-areaid":e,"data-areatype":d?"stack-row":m?`${c==null?void 0:c.orientation}-row`:(r==null?void 0:r.type)||"unknown-leaf",children:[d&&c&&x.jsx(yS,{id:e,areas:i,layout:c,viewport:M,setResizePreview:n}),!u&&k&&p&&x.jsx(gu,{id:p.id,Component:k,state:p.state,type:p.type,viewport:M,raised:!!p.raised,setResizePreview:n,isChildOfStack:!1})]})});function vS(e,t){document.body.style.userSelect="none";const n=o=>{e(o)},r=()=>{document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",r),document.body.style.userSelect="",t()};document.addEventListener("mousemove",n),document.addEventListener("mouseup",r)}const SS=(e,t,n,r,o)=>{var O,b;if((O=P.getState().screens[P.getState().activeScreenId])==null?void 0:O.areas.isDetached)return;if(!t||!t.areas||t.areas.length===0){console.error("Invalid row data for resize");return}if(r<1||r>=t.areas.length){console.error("Invalid areaIndex for resize:",{areaIndex:r,areasLength:t.areas.length});return}const s=P.getState(),a=s.activeScreenId,l=(b=s.screens[a])==null?void 0:b.areas;if(!l||!l.layout||!l.rootId){console.error("Invalid active screen area state for resize:",l);return}const u=l.layout,c=l.rootId,d=cg(c,u),m=ko();if(!m){console.error("Unable to get root viewport");return}const v=kr(u,c,m),S=t.areas[r-1],p=t.areas[r];if(!S||!p){console.error("Invalid area indices:",{areaIndex:r,areas:t.areas});return}let k=v[S.id],h=v[p.id];if(!k||!h){console.error("Missing initial viewports:",{a0:S.id,a1:p.id,viewports:v});return}const f=U=>{const H=u[U];if(!H||H.type==="area")return 1;const Z=d[H.id];return n?(Z==null?void 0:Z.width)??1:(Z==null?void 0:Z.height)??1},g=f(S.id),C=f(p.id);let w=S.size+p.size;(isNaN(w)||w<=0)&&(w=1);const y={width:n?k.width+h.width:k.width,height:n?k.height:k.height+h.height,left:k.left,top:k.top},I=n?y.width:y.height;if(I<=0){console.error("Invalid viewport size:",I);return}const z=Vi*g/I,A=Vi*C/I;if(z+A>=.99){console.warn("Not enough space to resize:",{tMin0:z,tMin1:A});return}let M=0;const L=16;let N=null,_=null;const j=U=>{const H=performance.now();H-M<L||(M=H,P.getState().setRowSizes({rowId:t.id,sizes:U}))},D=U=>{if(!_){_=U;return}const H=n?y.left:y.top,Z=n?y.left+y.width:y.top+y.height,ne=n?U.x:U.y,X=Ep(z,1-A,(ne-H)/(Z-H));o({rowId:t.id,separatorIndex:r,t:X});const re=[X,1-X].map(q=>qa(0,w,q));if(!re.some(q=>isNaN(q)||q<0)){const q=t.areas.map((Me,ue)=>{var fe,Ne;if(ue===r-1)return re[0];if(ue===r)return re[1];const ie=u[t.id];return((Ne=(fe=ie==null?void 0:ie.areas)==null?void 0:fe[ue])==null?void 0:Ne.size)||0}),ye=q.reduce((Me,ue)=>Me+ue,0);if(ye>0&&Math.abs(ye-1)>.001){const Me=q.map(ue=>ue/ye);j(Me)}else j(q)}},R=()=>{_&&D(_),N=requestAnimationFrame(R)},F=U=>{_=U,N||(N=requestAnimationFrame(R))},T=()=>{N!==null&&(cancelAnimationFrame(N),N=null),_=null};vS(U=>{const H=ve.fromEvent(U);F(H)},()=>{T(),setTimeout(()=>o(null),0)})},wS=e=>{const{row:t,setResizePreview:n,offset:r}=e;P(c=>c.setRowSizes);const o=P(c=>{var d;return((d=c.screens[c.activeScreenId])==null?void 0:d.areas.layout)??{}}),i=P(c=>{var d;return(d=c.screens[c.activeScreenId])==null?void 0:d.areas.rootId}),s=P(c=>{var d;return(d=c.screens[c.activeScreenId])==null?void 0:d.areas.viewports}),a=P(c=>{var d;return((d=c.options)==null?void 0:d.resizableAreas)??!0});if(t.orientation==="stack"||!t||!t.areas||t.areas.length<=1||!o||!i||!t.areas.every(c=>s[c.id]&&o[c.id]))return null;const u=[];for(let c=0;c<t.areas.length-1;c++){const d=t.areas[c],m=t.areas[c+1];if(!d||!m)continue;const v=s[d.id],S=s[m.id];if(!o[d.id]||!o[m.id]||!v||!S)continue;const p=t.orientation==="horizontal";let k;if(p?k={left:S.left-qo,top:S.top+gt-r,width:qo*2,height:Math.max(S.height-gt,5)}:k={left:S.left,top:S.top-qo-r,width:Math.max(S.width,5),height:qo*2},isNaN(k.left)||isNaN(k.top)||isNaN(k.width)||isNaN(k.height))continue;k.width=Math.max(0,k.width),k.height=Math.max(0,k.height);const h=f=>{f.stopPropagation(),SS(f.nativeEvent,t,p,c+1,n)};u.push(x.jsx("div",{className:`area-separator ${p?"area-separator--horizontal":""}`,style:{...k,flexDirection:p?"column":"row",zIndex:p?2001:2e3,cursor:a?void 0:"default"},onMouseDown:a?h:void 0,children:a&&(p?x.jsxs(x.Fragment,{children:[x.jsx(Bc,{size:32}),x.jsx(Bc,{size:32})]}):x.jsxs(x.Fragment,{children:[x.jsx(Wc,{size:32}),x.jsx(Wc,{size:32})]}))},`sep-${d.id}-${m.id}`))}return x.jsx(x.Fragment,{children:u})},xS=rt.memo(({areaToOpen:e,dimensions:t})=>{const n=W.getComponent(e.area.type);return n?x.jsx("div",{className:"area-preview",style:{left:e.position.x,top:e.position.y},children:x.jsx(gu,{id:"-1",Component:n,raised:!0,isChildOfStack:!1,state:e.area.state,type:e.area.type,viewport:{left:0,top:0,height:t.y,width:t.x},setResizePreview:()=>{}})}):null}),kS=rt.memo(({areaToOpen:e,dimensions:t,setAreaToOpenDimensions:n})=>{const r=P(m=>m.setViewports),o=P(m=>{var v;return(v=m.screens[m.activeScreenId])==null?void 0:v.areas.viewports}),{handleDragOver:i,handleDrop:s,areaToOpenTargetId:a,areaToOpenTargetViewport:l,calculatedPlacement:u}=rh();E.useEffect(()=>{if(!a||!l)return;const m=ve.new(l.width,l.height);(m.x!==t.x||m.y!==t.y)&&n(m)},[a,l,t,n]),E.useEffect(()=>{r(o)},[o,r]);const c=E.useMemo(()=>{if(!l)return{lines:[],placementLines:{}};const m=l,v=Math.min(m.width,m.height)*ag,S=ve.new(v,v),p=m.width,k=m.height,h=ve.new(0,0),f=ve.new(p,0),g=ve.new(p,k),C=ve.new(0,k),w=h.add(S),y=f.add(S.scaleX(-1)),I=g.add(S.scale(-1)),z=C.add(S.scaleY(-1));return{lines:[[h,w],[f,y],[C,z],[g,I],[w,y],[y,I],[I,z],[z,w]],placementLines:{left:[h,w,z,C],top:[h,f,y,w],right:[y,f,g,I],bottom:[C,z,I,g],stack:[w,y,I,z]}}},[l]),d=E.useMemo(()=>!l||!c.placementLines||!c.placementLines[u]?"":c.placementLines[u].map(v=>[v.x,v.y].join(",")).map((v,S)=>[S===0?"M":"L",v].join(" ")).join(" ")+" Z",[l,c.placementLines,u]);return l?x.jsx(x.Fragment,{children:x.jsx("div",{className:"area-to-open-overlay",onDragOver:i,onDrop:s,children:l&&x.jsxs("svg",{width:l.width,height:l.height,className:"area-to-open-overlay__placement",style:{left:l.left,top:l.top},children:[c.lines.map(([m,v],S)=>x.jsx("line",{x1:m.x,y1:m.y,x2:v.x,y2:v.y},S)),x.jsx("path",{d})]})})}):null}),IS=rt.memo(()=>{const e=P(o=>{var i;return(i=o.screens[o.activeScreenId])==null?void 0:i.areas.areaToOpen}),t=E.useMemo(()=>ve.new(100,100),[]),[n,r]=E.useState(t);return e?x.jsxs(x.Fragment,{children:[x.jsx(xS,{areaToOpen:e,dimensions:n}),x.jsx(kS,{areaToOpen:e,dimensions:n,setAreaToOpenDimensions:r})]}):null}),CS=e=>{const{viewport:t,movingInDirection:n}=e,r=Math.min(256,Math.min(t.width,t.height)*5);return x.jsx("div",{className:"join-area-preview",style:{left:t.left,top:t.top,width:t.width,height:t.height},children:x.jsx("div",{className:`join-area-preview__arrow-container join-area-preview__arrow-container--${n}`,children:x.jsx("div",{className:`join-area-preview__arrow join-area-preview__arrow--${n}`,style:{width:r,height:r},children:x.jsx(Qg,{size:r+"px",style:{color:"transparent"}})})})})};function sh(e,t){return e.map(n=>n.children&&n.children.length>0?x.jsx(U0,{label:n.label,disabled:n.disabled,children:sh(n.children,t)},n.id):n.actionId==="area.separator"||n.label.match(/^[-\u2500]+$/)?x.jsx("div",{style:{margin:"4px 0",borderBottom:"1px solid #ccc"}},n.id):x.jsxs(Kr,{disabled:n.disabled,onClick:()=>t(n.actionId,n.metadata,n),children:[n.icon&&rt.createElement(n.icon),n.label]},n.id))}const ES=()=>{const e=Ve(a=>a.isVisible&&a.menuType==="default"),t=Ve(a=>a.items),n=Ve(a=>a.position),r=Ve(a=>a.closeContextMenu),o=Ve(a=>a.metadata),i=Ve(a=>a.menuClassName),s=(a,l,u)=>{Q.executeAction(a,{...o,...l}),r&&r()};return e?x.jsx(yu,{anchorPoint:n,state:e?"open":"closed",onClose:r,transition:!0,direction:"right",menuClassName:i,children:sh(t,s)}):null},AS=({children:e})=>x.jsxs(x.Fragment,{children:[e,x.jsx(ES,{}),x.jsx(oh,{})]});function _S(){const e=P(r=>r.activeScreenId),t=P(r=>{var o;return(o=r.screens[e])==null?void 0:o.isDetached}),n=P(r=>r.removeScreen);return E.useEffect(()=>{if(!t)return;const r=()=>{n(e)};return window.addEventListener("beforeunload",r),()=>window.removeEventListener("beforeunload",r)},[e,t,n]),null}function MS(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const o of n){if(!t.hasOwnProperty(o))return!1;const i=e[o],s=t[o];if(i.left!==s.left||i.top!==s.top||i.width!==s.width||i.height!==s.height)return!1}return!0}const zS=e=>{var t;return(t=e.screens[e.activeScreenId])==null?void 0:t.areas},jS=({offset:e=0})=>{const t=P(zS),n=P(S=>{var p;return(p=S.screens[S.activeScreenId])==null?void 0:p.isDetached}),r=E.useMemo(()=>t==null?void 0:t.rootId,[t==null?void 0:t.rootId]),o=E.useMemo(()=>(t==null?void 0:t.layout)??{},[t==null?void 0:t.layout]),i=E.useMemo(()=>t==null?void 0:t.joinPreview,[t==null?void 0:t.joinPreview]),s=E.useMemo(()=>t==null?void 0:t.areaToOpen,[t==null?void 0:t.areaToOpen]),a=E.useRef(null),[l,u]=E.useState(()=>n?{left:0,top:0,width:window.innerWidth,height:window.innerHeight}:ko()),[c,d]=E.useState(null),m=P(S=>S.setViewports);E.useEffect(()=>{if(!n){const S=document.querySelector(".area-root");if(S){const p=S.getBoundingClientRect();u({left:0,top:0,width:p.width,height:p.height})}}},[n]),E.useEffect(()=>{const S=()=>{if(n){const p={left:0,top:0,width:window.innerWidth,height:window.innerHeight};(!a.current||p.width!==a.current.width||p.height!==a.current.height)&&u(p)}else{const p=document.querySelector(".area-root");if(p){const k=p.getBoundingClientRect(),h={left:0,top:0,width:k.width,height:k.height};(!a.current||h.width!==a.current.width||h.height!==a.current.height)&&u(h)}}};return window.addEventListener("resize",S),()=>window.removeEventListener("resize",S)},[n]),E.useEffect(()=>{var k;const S=Object.keys(o).length,p=r?o[r]:null;if(!r||!p||S===0){a.current!==null&&(a.current=null,m({}));return}if(!(!l||l.width<=0||l.height<=0))try{const h=kr(o,r,{...l,top:l.top+e}),f=(k=P.getState().screens[P.getState().activeScreenId])==null?void 0:k.areas.viewports;MS(f,h)||Object.keys(h).some(C=>{const w=f==null?void 0:f[C],y=h[C];return w?Math.abs(w.left-y.left)>1||Math.abs(w.top-y.top)>1||Math.abs(w.width-y.width)>1||Math.abs(w.height-y.height)>1:!0})&&(a.current=l,m(h))}catch(h){console.error("[Karmyc] Erreur lors du calcul du viewportMap:",h)}},[o,r,l,c,m]);const v=E.useCallback(S=>{var y;const p=P.getState(),k=p.screens[p.activeScreenId],h=(k==null?void 0:k.areas.viewports)||{},f=h[S];if(k!=null&&k.isDetached)return{...f,left:0,top:0,width:window.innerWidth,height:window.innerHeight};if(!c)return f;let g,C=-1;if(g=Object.values(o).filter(I=>I.type==="area_row").find(I=>{const z=I.areas.findIndex(A=>A.id===S);return z!==-1?(C=z,!0):!1}),!g||g.id!==c.rowId)return f;const w=c.separatorIndex;if(C===w-1||C===w){const I=C===w-1?w:w-1,z=(y=g.areas[I])==null?void 0:y.id;if(!z)return f;const A=h[z];if(!A)return f;const M=C===w-1,L=c.t;if(!h[g.id])return f;const _=M?f:A,j=M?A:f,D={left:_.left,top:_.top,width:_.width+j.width,height:_.height+j.height};if(g.orientation==="horizontal"){const R=D.width,F=Math.max(0,Math.floor(R*L)),T=Math.max(0,R-F),O=M?F:T,b=M?D.left:D.left+F;return isNaN(O)||isNaN(b)?(console.warn(`[VisViewport] ${S}: NaN detected in horizontal calc.`),f):{...f,width:O,left:b}}else if(g.orientation==="vertical"){const R=D.height,F=Math.max(0,Math.floor(R*L)),T=Math.max(0,R-F),O=M?F:T,b=M?D.top:D.top+F;return isNaN(O)||isNaN(b)?(console.warn(`[VisViewport] ${S}: NaN detected in vertical calc.`),f):{...f,height:O,top:b}}else if(g.orientation==="stack")return f}return f},[o,c]);return x.jsxs(AS,{children:[x.jsx(_S,{}),x.jsxs("div",{className:"area-root",children:[Object.values(o).map(S=>{var p;if(S.type==="area_row"){const k=S,h=((p=P.getState().screens[P.getState().activeScreenId])==null?void 0:p.areas.viewports)||{};if(k.areas.every(g=>h[g.id]))return x.jsx(wS,{offset:e,row:k,setResizePreview:d},S.id)}return null}),Object.entries(o).map(([S])=>{const p=v(S);return p?x.jsx(gS,{id:S,viewport:{...p,top:p.top-e},setResizePreview:d},S):null}),i&&i.areaId&&(()=>{var k;const p=(((k=P.getState().screens[P.getState().activeScreenId])==null?void 0:k.areas.viewports)||{})[i.areaId];return p?x.jsx(CS,{viewport:p,movingInDirection:i.movingInDirection}):null})(),s&&x.jsx(IS,{})]})]})},TS=()=>{const e={plugins:[],initialAreas:[{id:"area-1",type:"demo-area",state:{},role:oe.LEAD},{id:"area-2",type:"logo-karmyc-area",state:{},role:oe.SELF},{id:"area-3",type:"keyboard-shortcuts-area",state:{},role:oe.SELF}],keyboardShortcutsEnabled:!0,builtInLayouts:[{id:"default",name:"Layout par défaut",config:{_id:10,rootId:"root",errors:[],activeAreaId:"area-1",joinPreview:null,layout:{root:{id:"root",type:"area_row",orientation:"horizontal",areas:[{id:"area-1",size:.3},{id:"area-2",size:.4},{id:"area-3",size:.3}]},"area-1":{type:"area",id:"area-1"},"area-2":{type:"area",id:"area-2"},"area-3":{type:"area",id:"area-3"}},areas:{"area-1":{id:"area-1",type:"demo-area",state:{},role:oe.LEAD},"area-2":{id:"area-2",type:"logo-karmyc-area",state:{},role:oe.SELF},"area-3":{id:"area-3",type:"keyboard-shortcuts-area",state:{},role:oe.SELF}},viewports:{},areaToOpen:null,lastSplitResultData:null,lastLeadAreaId:"area-1"},isBuiltIn:!0},{id:"minimal",name:"Layout minimal",config:{_id:10,rootId:"root",errors:[],activeAreaId:"area-1",joinPreview:null,layout:{root:{id:"root",type:"area_row",orientation:"vertical",areas:[{id:"area-1",size:.7},{id:"area-2",size:.3}]},"area-1":{type:"area",id:"area-1"},"area-2":{type:"area",id:"area-2"}},areas:{"area-1":{id:"area-1",type:"demo-area",state:{},role:oe.LEAD},"area-2":{id:"area-2",type:"logo-karmyc-area",state:{},role:oe.SELF}},viewports:{},areaToOpen:null,lastSplitResultData:null,lastLeadAreaId:"area-1"},isBuiltIn:!0}],initialLayout:"default",resizableAreas:!0,manageableAreas:!0,multiScreen:!0},t=Tg(e);return x.jsxs($g,{options:t,children:[x.jsx(cS,{}),x.jsx(ol,{areaType:"apptitle",children:x.jsx(ol,{areaType:"app",children:x.jsx(jS,{offset:gt*2})})})]})};gp(document.getElementById("root")).render(x.jsx(E.StrictMode,{children:x.jsx(TS,{})}));
